<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:38:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:UnrealScript Language Reference/States - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States" />
<link rel="shortcut icon" href="../w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="../w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="States.html" />
<link rel="copyright" href="../Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="../w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="../w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:UnrealScript_Language_Reference/States","wgTitle":"UnrealScript Language Reference/States","wgCurRevisionId":8514,"wgRevisionId":8514,"wgArticleId":3288,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:UnrealScript_Language_Reference/States","wgRelevantArticleId":3288,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_UnrealScript_Language_Reference_States skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>The three virtues of a programmer: Laziness, Impatience, and Hubris. &#8211; Larry Wall
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:UnrealScript Language Reference/States</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../Legacy_UnrealScript_Language_Reference.html" title="Legacy:UnrealScript Language Reference">Legacy:UnrealScript Language Reference</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#UnrealScript_Language_Reference"><span class="tocnumber">1</span> <span class="toctext">UnrealScript Language Reference</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#States"><span class="tocnumber">2</span> <span class="toctext">States</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Overview_of_States"><span class="tocnumber">2.1</span> <span class="toctext">Overview of States</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#State_Labels_and_Latent_Functions"><span class="tocnumber">2.2</span> <span class="toctext">State Labels and Latent Functions</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#State_Inheritance_and_Scoping_Rules"><span class="tocnumber">2.3</span> <span class="toctext">State Inheritance and Scoping Rules</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Advanced_State_Programming"><span class="tocnumber">2.4</span> <span class="toctext">Advanced State Programming</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Related_Topics"><span class="tocnumber">3</span> <span class="toctext">Related Topics</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="UnrealScript_Language_Reference">UnrealScript Language Reference</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=1" title="Edit section: UnrealScript Language Reference">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><i>This subpage is part of a document by Tim Sweeney. The Unreal Wiki has been granted permission to host it. Please don't make any edits to these pages other than basic formatting of the text. If you have more to say on a topic here, please start a new Wiki page on it, for example from <a href="../Legacy_UnrealScript.html" title="Legacy:UnrealScript">UnrealScript</a> or <a href="../Legacy_Unreal_Engine.html" title="Legacy:Unreal Engine">Unreal Engine</a>, and then add a "related topics" section to the very end of a page here.</i></p>
<blockquote class="legacyquote">
<p>Tim Sweeney<br />
Epic MegaGames, Inc.<br />
tim@epicgames.com<br />
<a rel="nofollow" class="external free" href="http://www.epicgames.com/">http://www.epicgames.com</a></p>
</blockquote>
<h2><span class="mw-headline" id="States">States</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=2" title="Edit section: States">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Overview_of_States">Overview of States</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=3" title="Edit section: Overview of States">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Historically, game programmers have been using the concept of states ever since games evolved past the "pong" phase. States (and what is known as "state machine programming") are a natural way of making complex object behaviour manageable. However, before UnrealScript, states have not been supported at the language level, requiring developers to create C/C++ "switch" statements based on the object?s state. Such code was difficult to write and update.</p>
<p>UnrealScript supports states at the language level.</p>
<p>In UnrealScript, each actor in the world is always in one and only one state. Its state reflects the action it wants to perform. For example, moving brushes have several states like "StandOpenTimed" and "BumpOpenTimed". Pawns have several states such as "Dying", "Attacking", and "Wandering".</p>
<p>In UnrealScript, you can write functions and code which exist in a particular state. These functions are only called when the actor is in that state. For example, say you?re writing a monster script, and you?re contemplating how to handle the "SeePlayer" function. When you?re wandering around, you want to attack the player you see. When you?re already attacking the player, you want to continue on uninterrupted.</p>
<p>The easiest way to do this is by defining several states (Wandering and Attacking), and writing a different version of "Touch" in each state. UnrealScript supports this.</p>
<p>Before delving deeper into states, you need to understand that there are two major benefits to states, and one complication:</p>
<ul>
<li><b>Benefit:</b> States provide a simple way to write state-specific functions, so that you can handle the same function in different ways, depending on what the actor is doing.</li>
</ul>
<ul>
<li><b>Benefit:</b> With a state, you can write special "state code", using all of the regular UnrealScript commands plus several special functions known as "latent functions". A latent function is a function which executes "slowly", and may return after a certain amount of "game time" has passed. This enables you to perform time-based programming&#160;? a major benefit which neither C, C++, nor Java offer. Namely, you can write code in the same way you conceptualize it; for example, you can write a script that says the equivalent of "open this door; pause 2 seconds; play this sound effect; open that door; release that monster and have it attack the player". You can do this with simple, linear code, and the Unreal engine takes care of the details of managing the time-based execution of the code.</li>
</ul>
<ul>
<li><b>Complication:</b> Now that you can have functions (like "Touch") overridden in multiple states as well as in child classes, you have the burden of figuring out exactly which "Touch" function is going to be called in a specific situation. UnrealScript provides rules which clearly delineate this process, but it is something you must be aware of if you create complex hierarchies of classes and states.</li>
</ul>
<p>Here is an example of states from the TriggerLight script:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Trigger turns the light on.</span>
<span class="kw1">state</span><span class="br0">(</span><span class="br0">)</span> TriggerTurnsOn
<span class="br0">{</span>
	<span class="kw1">function</span> <span class="kw4">Trigger</span><span class="br0">(</span> <span class="kw9">actor</span> Other, <span class="kw9">pawn</span> EventInstigator <span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw4">Trigger</span> <span class="sy0">=</span> <span class="kw5">None</span>;
		Direction <span class="sy0">=</span> <span class="nu0">1.0</span>;
		<span class="kw3">Enable</span><span class="br0">(</span> <span class="st0">'Tick'</span> <span class="br0">)</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="co1">// Trigger turns the light off.</span>
<span class="kw1">state</span><span class="br0">(</span><span class="br0">)</span> TriggerTurnsOff
<span class="br0">{</span>
	<span class="kw1">function</span> <span class="kw4">Trigger</span><span class="br0">(</span> <span class="kw9">actor</span> Other, <span class="kw9">pawn</span> EventInstigator <span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw4">Trigger</span> <span class="sy0">=</span> <span class="kw5">None</span>;
		Direction <span class="sy0">=</span> <span class="sy0">-</span><span class="nu0">1.0</span>;
		<span class="kw3">Enable</span><span class="br0">(</span> <span class="st0">'Tick'</span> <span class="br0">)</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Here you are declaring two different states (TriggerTurnsOn and TriggerTurnsOff), and you?re writing a different version of the Trigger function in each state. Though you could pull off this implementation without states, using states makes the code far more modular and expandable: in UnrealScript, you can easily subclass an existing class, add new states, and add new functions. If you had tried to do this without states, the resulting code would be more difficult to expand later.</p>
<p>A state can be declared as editable, meaning that the user can set an actor?s state in UnrealEd, or not. To declare an editable state, do the following:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">state</span><span class="br0">(</span><span class="br0">)</span> MyState
<span class="br0">{</span>
	<span class="co1">//...</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>To declare a non-editable state, do this:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">state</span> MyState
<span class="br0">{</span>
	<span class="co1">//...</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>You can also specify the automatic, or initial state that an actor should be in by using the "auto" keyword. This causes all new actors to be placed in that state when they first are activated:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">auto</span> <span class="kw1">state</span> MyState
<span class="br0">{</span>
	<span class="co1">//...</span>
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="State_Labels_and_Latent_Functions">State Labels and Latent Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=4" title="Edit section: State Labels and Latent Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In addition to functions, a state can contain one or more labels followed by UnrealScript code. For example:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">auto</span> <span class="kw1">state</span> MyState
<span class="br0">{</span>
<span class="kw2">Begin</span>:
	<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"MyState has just begun!"</span> <span class="br0">)</span>;
	<span class="kw4">Sleep</span><span class="br0">(</span> <span class="nu0">2.0</span> <span class="br0">)</span>;
	<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"MyState has finished sleeping"</span> <span class="br0">)</span>;
	goto<span class="br0">(</span> <span class="st0">'Begin'</span> <span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>The above state code prints the message "MyState has just begun!", then it pauses for two seconds, then it prints the message "MyState has finished sleeping". The interesting thing in this example is the call to the latent function "Sleep": this function call doesn?t return immediately, but returns after a certain amount of game time has passed. Latent functions can only be called from within state code, and not from within functions. Latent functions let you manage complex chains of events which include the passage of time.</p>
<p>All state code begins with a label definition; in the above example the label is named "Begin". The label provides a convenient entry point into the state code. You can use any label name in state code, but the "Begin" label is special: it is the default starting point for code in that state.</p>
<p>There are three main latent functions available to all actors:</p>
<dl>
<dt>Sleep( float Seconds )&#160;</dt>
<dd>Pauses the state execution for a certain amount of time, and then continues.</dd>
</dl>
<dl>
<dt>FinishAnim()&#160;</dt>
<dd>Waits until the current animation sequence you?re playing completes, and then continues. This function makes it easy to write animation-driven scripts, scripts whose execution is governed by mesh animations. For example, most of the AI scripts are animation-driven (as opposed to time-driven), because smooth animation is a key goal of the AI system.</dd>
</dl>
<dl>
<dt>FinishInterpolation()&#160;</dt>
<dd>Waits for the current InterpolationPoint movement to complete, and then continues.</dd>
</dl>
<p>The Pawn class defines several important latent functions for actions such as navigating through the world and short-term movement. See the separate AI docs for descriptions of their usage.</p>
<p>Three native UnrealScript functions are particularly useful when writing state code:</p>
<ul>
<li>The "Goto" function (similar to the C/C++/Basic goto) within a state causes the state code to continue executing at a different label.</li>
</ul>
<ul>
<li>The special Goto('') command within a state causes the state code execution to stop. State code execution doesn?t continue until you go to a new state, or go to a new label within the current state.</li>
</ul>
<ul>
<li>The "GotoState" function causes the actor to go to a new state, and optionally continue at a specified label (if you don?t specify a label, the default is the "Begin" label). You can call GotoState from within state code, and it goes to the destination immediately. You can also call GotoState from within any function in the actor, but that does not take effect immediately: it doesn?t take effect until execution returns back to the state code.</li>
</ul>
<p>Here is an example of the state concepts discussed so far:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// This is the automatic state to execute.</span>
<span class="kw1">auto</span> <span class="kw1">state</span> Idle
<span class="br0">{</span>
	<span class="co1">// When touched by another actor?</span>
	<span class="kw1">function</span> <span class="kw4">Touch</span><span class="br0">(</span> <span class="kw9">actor</span> Other <span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">log</span><span class="br0">(</span> <span class="st0">"I was touched, so I?m going to Attacking"</span> <span class="br0">)</span>;
		<span class="kw3">GotoState</span><span class="br0">(</span> <span class="st0">'Attacking'</span> <span class="br0">)</span>;
		<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"I have gone to the Attacking state"</span> <span class="br0">)</span>;
	<span class="br0">}</span>
<span class="kw2">Begin</span>:
	<span class="kw3">log</span><span class="br0">(</span> <span class="st0">"I am idle?"</span> <span class="br0">)</span>;
	<span class="kw4">sleep</span><span class="br0">(</span> <span class="nu0">10</span> <span class="br0">)</span>;
	goto<span class="br0">(</span> <span class="st0">'Begin'</span> <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// Attacking state.</span>
<span class="kw1">state</span> Attacking
<span class="br0">{</span>
<span class="kw2">Begin</span>:
	<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"I am executing the attacking state code"</span> <span class="br0">)</span>;
	<span class="co1">//...</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>When you run this program and then go touch the actor, you will see:</p>
<pre>
 I am idle...
 I am idle...
 I am idle...
 I was touched, so I?m going to Attacking
 I have gone to the Attacking state
 I am executing the attacking state code
</pre>
<p>Make sure you understand this important aspect of GotoState: When you call GotoState from within a function, it does not go to the destination immediately, rather it goes there once execution returns back to the state code.</p>
<h3><span class="mw-headline" id="State_Inheritance_and_Scoping_Rules">State Inheritance and Scoping Rules</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=5" title="Edit section: State Inheritance and Scoping Rules">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In UnrealScript, when you subclass an existing class, your new class inherits all of the variables, functions and states from its parent class. This is well-understood.</p>
<p>However, the addition of the state abstraction to the UnrealScript programming model adds additional twists to the inheritance and scoping rules. The complete inheritance rules are:</p>
<ul>
<li>A new class inherits all of the variables from its parent class.</li>
</ul>
<ul>
<li>A new class inherits all of its parent class's non-state functions. You can override any of those inherited non-state functions. You can add entirely new non-state functions.</li>
</ul>
<ul>
<li>A new class inherits all of its parent class's states, including the functions and labels within those states. You can override any of the inherited state functions, and you can override any of the inherited state labels, you can add new state functions, and you can add new state labels.</li>
</ul>
<p>Here is an example of all the overriding rules:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Here is an example parent class.</span>
<span class="kw1">class</span> MyParentClass <span class="kw1">extends</span> <span class="kw9">Actor</span>;
 
<span class="co1">// A non-state function.</span>
<span class="kw1">function</span> MyInstanceFunction<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw3">log</span><span class="br0">(</span> <span class="st0">"Executing MyInstanceFunction"</span> <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// A state.</span>
<span class="kw1">state</span> MyState
<span class="br0">{</span>
	<span class="co1">// A state function.</span>
	<span class="kw1">function</span> MyStateFunction<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"Executing MyStateFunction"</span> <span class="br0">)</span>;
	<span class="br0">}</span>
<span class="co1">// The "Begin" label.</span>
<span class="kw2">Begin</span>:
	<span class="kw3">Log</span><span class="br0">(</span><span class="st0">"Beginning MyState"</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Here is an example child class.</span>
<span class="kw1">class</span> MyChildClass <span class="kw1">extends</span> MyParent<span class="re0">Class</span>&lt; SEMI &gt;
 
<span class="co1">// Here I?m overriding a non-state function.</span>
<span class="kw1">function</span> MyInstanceFunction<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"Executing MyInstanceFunction in child class"</span> <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// Here I?m redeclaring MyState so that I can override MyStateFunction.</span>
<span class="kw1">state</span> MyState
<span class="br0">{</span>
	<span class="co1">// Here I?m overriding MyStateFunction.</span>
	<span class="kw1">function</span> MyStateFunction<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"Executing MyStateFunction"</span> <span class="br0">)</span>;
	<span class="br0">}</span>
<span class="co1">// Here I?m overriding the "Begin" label.</span>
<span class="kw2">Begin</span>:
	<span class="kw3">Log</span><span class="br0">(</span> <span class="st0">"Beginning MyState in MyChildClass"</span> <span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>When you have a function that is implemented globally, in one or more states, and in one or more parent classes, you need to understand which version of the function will be called in a given context. The scoping rules, which resolves these complex situations, are:</p>
<ul>
<li>If the object is in a state, and an implementation of the function exists somewhere in that state (either in the actor?s class or in some parent class), the most-derived state version of the function is called.</li>
</ul>
<ul>
<li>Otherwise, the most-derived non-state version of the function is called.</li>
</ul>
<h3><span class="mw-headline" id="Advanced_State_Programming">Advanced State Programming</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=6" title="Edit section: Advanced State Programming">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If a state doesn?t override a state of the same name in the parent class, then you can optionally use the "extends" keyword to make the state extend on an existing state in the current class. This is useful, for example, in a situation where you have a group of similar states (such as MeleeAttacking and RangeAttacking) which have a lot of functionality in common. In this case you could declare a base Attacking state as follows:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Base Attacking state.</span>
<span class="kw1">state</span> Attacking
<span class="br0">{</span>
	<span class="co1">// Stick base functions here...</span>
<span class="br0">}</span> 
 
<span class="co1">// Attacking up-close.</span>
<span class="kw1">state</span> MeleeAttacking <span class="kw1">extends</span> Attacking
<span class="br0">{</span>
	<span class="co1">// Stick specialized functions here...</span>
<span class="br0">}</span> 
 
<span class="co1">// Attacking from a distance.</span>
<span class="kw1">state</span> RangeAttacking <span class="kw1">extends</span> Attacking
<span class="br0">{</span>
	<span class="co1">// Stick specialized functions here...</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>A state can optionally use the "ignores" specifier to ignore functions while in a state. The syntax for this is:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Declare a state.</span>
<span class="kw1">state</span> Retreating
<span class="br0">{</span>
	<span class="co1">// Ignore the following messages...</span>
	<span class="kw1">ignores</span> <span class="kw4">Touch</span>, <span class="kw4">UnTouch</span>, MyFunction;
 
	<span class="co1">// Stick functions here...</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>You can tell what specific state an actor is in from its "state" variable, a variable of type "name", or by the Actor function <code>GetStateName()</code>.</p>
<p>It is possible for an actor to be in "no state" by using <code>GotoState(<i>)</i></code><i>. When an actor is in "no state", only its global (non-state) functions are called.</i></p>
<p>Whever you use the GotoState command to set an actor?s state, the engine can call two special notification functions, if you have defined them: <code>EndState()</code> and <code>BeginState()</code>. EndState is called in the current state immediately before the new state is begun, and BeginState is called immediately after the new state begins. These functions provide a convenient place to do any state-specific initialization and cleanup which your state may require.</p>
<hr />
<p>Prev Page: <a href="Program_Structure.html" title="Legacy:UnrealScript Language Reference/Program Structure">Legacy:UnrealScript Language Reference/Program Structure</a> – <b>Section 6 of 9</b> – Next Page: <a href="Language_Functionality.html" title="Legacy:UnrealScript Language Reference/Language Functionality">Legacy:UnrealScript Language Reference/Language Functionality</a></p>
<h2><span class="mw-headline" id="Related_Topics">Related Topics</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States?section=7" title="Edit section: Related Topics">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="../Legacy_State.html" title="Legacy:State">State</a></li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.137 seconds
Real time usage: 0.142 seconds
Preprocessor visited node count: 151/1000000
Preprocessor generated node count: 343/1000000
Post‐expand include size: 362/2097152 bytes
Template argument size: 96/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.395      1 - -total
100.00%    3.395      1 - Template:Innerbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3288-0!*!0!!en!*!* and timestamp 20161215133741 and revision id 8514
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States?oldid=8514">https://wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States?oldid=8514</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="States.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:UnrealScript_Language_Reference/States?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:UnrealScript_Language_Reference/States" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:UnrealScript_Language_Reference/States" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-anonuserpage"><a href="../User_188.162.37.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">188.162.37.3</a></li>
													<li id="pt-anontalk"><a href="../User_talk_188.162.37.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUnrealScript+Language+Reference%2FStates&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUnrealScript+Language+Reference%2FStates" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="../index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="../Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:UnrealScript_Language_Reference/States" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:UnrealScript_Language_Reference/States" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States?oldid=8514" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:UnrealScript_Language_Reference/States" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 10:11, 26 July 2006.</li>
									<li id="copyright">Licensed as <a href="../Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="../Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="../Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":96});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:UnrealScript_Language_Reference/States by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:38:01 GMT -->
</html>
