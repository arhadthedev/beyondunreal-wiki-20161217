<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:State by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:State - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:State" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:State" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_State.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:State","wgTitle":"State","wgCurRevisionId":7369,"wgRevisionId":7369,"wgArticleId":2749,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:State","wgRelevantArticleId":2749,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_State skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>Gah - a solution with more questions. &#8211;Â EntropicLqd
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:State</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This topic will probably get linked from both mapping pages and scripting pages...</p>
<p>For mapping see <a href="Legacy_InitialState.html" title="Legacy:InitialState">InitialState</a>, perhaps.</p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Declaring_States"><span class="tocnumber">2</span> <span class="toctext">Declaring States</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#State_modifiers"><span class="tocnumber">2.1</span> <span class="toctext">State modifiers</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Configurable_states"><span class="tocnumber">2.2</span> <span class="toctext">Configurable states</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Extending"><span class="tocnumber">2.3</span> <span class="toctext">Extending</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Ignores_statement"><span class="tocnumber">2.4</span> <span class="toctext">Ignores statement</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Functions"><span class="tocnumber">2.5</span> <span class="toctext">Functions</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#State_code"><span class="tocnumber">2.6</span> <span class="toctext">State code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#State_Flow"><span class="tocnumber">3</span> <span class="toctext">State Flow</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Example"><span class="tocnumber">3.1</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Interrogation"><span class="tocnumber">3.2</span> <span class="toctext">Interrogation</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Example_2"><span class="tocnumber">3.3</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#State_Scoping"><span class="tocnumber">4</span> <span class="toctext">State Scoping</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Example_3"><span class="tocnumber">4.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Related_topics"><span class="tocnumber">5</span> <span class="toctext">Related topics</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Tutorials"><span class="tocnumber">5.1</span> <span class="toctext">Tutorials</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Comments"><span class="tocnumber">6</span> <span class="toctext">Comments</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For a good overview of the concept of states, see the opening of <a href="Legacy_UnrealScript_Language_Reference/States.html" title="Legacy:UnrealScript Language Reference/States">UnrealScript Language Reference/States</a>.</p>
<p>There are two fairly different strategies for state programming. On the one hand are actors such as <a href="Legacy_Pawn_(UT).html" title="Legacy:Pawn (UT)">Pawn (UT)</a> that change their state in-game according to what they are doing. Other actors such as <a href="Legacy_Trigger.html" title="Legacy:Trigger">Trigger</a> and <a href="Legacy_Mover.html" title="Legacy:Mover">Mover</a> and <a href="Legacy_SpecialEvent.html" title="Legacy:SpecialEvent">SpecialEvent</a> use segregated states to essentially create several different types of behaviour in one class. The Mover class, for example, only changes its own state to go dormant if Mover.bTriggerOnceOnly is set.</p>
<p>The term <b>State code</b> means code within states, in labels outside of functions.</p>
<p>Note that while you <i>can</i> declare states in classes not descendent from <a href="Legacy_Actor.html" title="Legacy:Actor">Actor</a> or <a href="Legacy_Console.html" title="Legacy:Console">Console</a> (in <a href="Legacy_UT.html" title="Legacy:UT" class="mw-redirect">UT</a>) or <a href="Legacy_Interaction.html" title="Legacy:Interaction">Interaction</a> (in <a href="Legacy_UT2003.html" title="Legacy:UT2003" class="mw-redirect">UT2003</a>), they simply won't work there.</p>
<h2><span class="mw-headline" id="Declaring_States">Declaring States</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=2" title="Edit section: Declaring States">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A state is declared as a block of code in the class. States can contain the <i>Ignores</i> statement, functions and/or state code, but they don't have to.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="sy0">&lt;</span><span class="kw1">optional</span> <span class="kw1">state</span> modifiers<span class="sy0">&gt;</span> <span class="kw1">State</span><span class="br0">[</span><span class="br0">(</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">&lt;</span><span class="kw1">state</span> name<span class="sy0">&gt;</span> <span class="br0">[</span><span class="kw1">extends</span> <span class="sy0">&lt;</span>parent <span class="kw1">state</span> name<span class="sy0">&gt;</span><span class="br0">]</span>
<span class="br0">{</span>
<span class="kw1">Ignores</span> <span class="sy0">&lt;</span><span class="kw1">function</span> name<span class="sy0">&gt;</span>, <span class="sy0">&lt;</span><span class="kw1">function</span> name<span class="sy0">&gt;</span>, ... ;
 
    <span class="sy0">&lt;</span><span class="kw1">state</span> functions<span class="sy0">&gt;</span>
 
<span class="kw2">Begin</span>:
    <span class="sy0">&lt;</span><span class="kw1">state</span> code<span class="sy0">&gt;</span>
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="State_modifiers">State modifiers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=3" title="Edit section: State modifiers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Note:</b> These modifiers only have an effect when used in an actor subclass. They don't have any effect in other classes states can be used in.</p>
<dl>
<dt>auto&#160;</dt>
<dd>The state should be the initial state of the object. This can be overridden by the InitialState variable in Actors.</dd>
<dt>simulated&#160;</dt>
<dd>State code can be simulated like functions. See <a href="Legacy_Simulated_Function.html" title="Legacy:Simulated Function">Simulated Function</a>.</dd>
</dl>
<h3><span class="mw-headline" id="Configurable_states">Configurable states</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=4" title="Edit section: Configurable states">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Just like the var keyword, the state keyword can be followed by a pair of parentheses. This makes the state available in the Object -&gt; InitialState property in UnrealEd for a placed instance of the actor. Actors like <a href="Legacy_Trigger.html" title="Legacy:Trigger">Trigger</a> and <a href="Legacy_Mover.html" title="Legacy:Mover">Mover</a> use this technique to expose several different behaviours to mappers with just one control. The value specified for InitialState will of course override any states declared with the Auto keyword.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">state</span><span class="br0">(</span><span class="br0">)</span> MyState <span class="br0">{</span>
  <span class="co1">// rest of state block</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Since InitialState is simply a name variable, you can use the property yourself. For example, you might want to reset the actor:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
  <span class="kw3">GoToState</span><span class="br0">(</span>InitialState<span class="br0">)</span>;
</pre></div>
</div>
<h3><span class="mw-headline" id="Extending">Extending</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=5" title="Edit section: Extending">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <i>extends</i> &lt;parent state name&gt; part is optional for new states and may not be used for states which override a state with the same name in the parent class.</p>
<p>See <a href="Legacy_Extending_States.html" title="Legacy:Extending States">Extending States</a>. There's sort of an example of this on <a href="Legacy_Scripting_Movers.html" title="Legacy:Scripting Movers">Scripting movers</a>.</p>
<h3><span class="mw-headline" id="Ignores_statement">Ignores statement</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=6" title="Edit section: Ignores statement">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The ignores statement effectively does the same as overriding functions with empty functions, just more efficient. This is how it should work, but unfortunately doesn't. If you absolutely do not want a function to execute while an Actor is in a particular state, you must override it:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> DontExecuteMe<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw3">log</span><span class="br0">(</span> <span class="st0">"ignore keyword isn't reliable"</span> <span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">state</span> MyState
<span class="br0">{</span>
    <span class="kw1">function</span> DontExecuteMe<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>Ignore effectively does a Disable() on the specified function, which is meaningless to anything but native events, and even then most events don't respect the probing status properly. When all else fails, just override the function and then write an email to Tim and tell him to fix his code.</p>
<h3><span class="mw-headline" id="Functions">Functions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=7" title="Edit section: Functions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Functions are defined within a state just as they would be elsewhere in the class. Functions of the same name can exist outside state blocks, and in each state block.</p>
<p>Which version of a function is called is determined by special state scoping rules â see below. This can be overriden by the Super and Global <a href="Legacy_Special_UnrealScript_Keywords.html" title="Legacy:Special UnrealScript Keywords">Special UnrealScript Keywords</a>.</p>
<p>Functions declared only within a state are local to that state. You cannot call them from outside the state since they do not exist there. (A possible alternative behavior of the language could be to treat functions exclusively declared in a certain state as empty functions in any other state; but that's not how it works.)</p>
<p>Note that you can cause a nasty crash using functions that exist only in states if you are not careful. The compiler will allow you do execute state-specific functions after a call to GotoState, which might suggest that the state change is delayed. This is not true. For instance:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">state</span> A
<span class="br0">{</span>
  <span class="kw1">function</span> C<span class="br0">(</span><span class="br0">)</span>;
 
  <span class="co1">// This crashes, because there is no C() function in state B.</span>
  <span class="co1">// The compiler, however, allows it, even though it is not</span>
  <span class="co1">// technically permissable.</span>
  <span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span> <span class="kw5">float</span> Delta <span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw3">GotoState</span><span class="br0">(</span> <span class="st0">'B'</span> <span class="br0">)</span>;
    C<span class="br0">(</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">state</span> B
<span class="br0">{</span>
<span class="br0">}</span>
 
<span class="co1">// Calls the E state's F() function, not our own.</span>
<span class="kw1">state</span> D
<span class="br0">{</span>
  <span class="kw1">function</span> F<span class="br0">(</span><span class="br0">)</span>;
 
  <span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span> <span class="kw5">float</span> Delta <span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'E'</span><span class="br0">)</span>;
    F<span class="br0">(</span><span class="br0">)</span>;
  <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">state</span> E
<span class="br0">{</span>
  <span class="kw1">function</span> F<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="State_code">State code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=8" title="Edit section: State code">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>State code is code that is within the state block, but outside of any functions. It is usually divided up into sections with labels.Adding ":" after the name declares it as a lable. When the actor is put into a particular state, a destination label can be specified (see State Flow below), or the code at the special <b>Begin:</b> label is executed.</p>
<p>Note that labels don't stop execution of state code. Unless you explicitely put a <tt>Stop</tt> command at the end of the code following the "Open" label in the example below, the code following the "Close" will also be executed:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
Open:
 <span class="co1">// some code</span>
Close:
 <span class="co1">// some more code</span>
</pre></div>
</div>
<p>State code is only inherited as a whole. If a subclass puts at least one line of state code in its own version of that state, the parent class' state code will not be used. This one line of code could be just a "Begin:" label, which basically removes all executable state code.</p>
<h2><span class="mw-headline" id="State_Flow">State Flow</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=9" title="Edit section: State Flow">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Movement between states are controlled by the following functions:</p>
<dl>
<dt>GotoState (<i>state name</i>, <i>optional label name</i>)&#160;</dt>
<dd>This call not only places the object into the state requested but starts code execution at the label specified. If the second parameter is omitted, then code at the <b>Begin:</b> label is executed, if it exists. The BeginState() function is called in all instances, from within the GotoState function, ie before the state code is executed.</dd>
<dt>Goto (<i>label name</i>)&#160;</dt>
<dd>This call simply continues code execution at the label specified within the current state.</dd>
</dl>
<h3><span class="mw-headline" id="Example">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=10" title="Edit section: Example">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>An example of how state flow can have unexpected results</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> Foo<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  <span class="kw2">if</span><span class="br0">(</span> bTest <span class="br0">)</span>
    <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'FirstState'</span><span class="br0">)</span>;
  <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'SecondState'</span><span class="br0">)</span>; 
<span class="br0">}</span>
</pre></div>
</div>
<p>This actor will always end up in SecondState, because the second GotoState() is always executed. The BeginState() and EndState() of state FirstState <i>will</i> be called.</p>
<h3><span class="mw-headline" id="Interrogation">Interrogation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=11" title="Edit section: Interrogation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following functions allow the interrogation of objects to determine things about their state:</p>
<dl>
<dt>GetStateName ( )&#160;</dt>
<dd>This function returns the name of the current state the object is in.</dd>
<dt>IsInState (<i>state name</i>)&#160;</dt>
<dd>This function returns <i>true</i> if the object is in the state specified, and false if not.<br />
Note however, that this will also return true if the object is in a state that is extended from "state name". (Bug or behaviour?) If this is going to cause a problem, use <tt>GetStateName() == 'desiredStateName'</tt> instead.</dd>
</dl>
<p><b>SuperApe:</b> Is there a way to find out if a particular state exists? Or, if I try to send an object to a state that doesn't exist, how can I recover?</p>
<p><b>SuperApe:</b> I seem to remember reading somewhere that there is an Event called when an object has recovered from a bad state (or was it bad state code?). Anyway, if an object is sent to a non-existant state, it will revert to a state of it's class Name. One method to recover this is:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Some object</span>
<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'DoesntExist'</span><span class="br0">)</span>;
<span class="kw2">if</span> <span class="br0">(</span> <span class="kw3">IsInState</span><span class="br0">(</span> <span class="kw5">Name</span> <span class="br0">)</span> <span class="br0">)</span>
     <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'DoesExist'</span><span class="br0">)</span>;
</pre></div>
</div>
<h3><span class="mw-headline" id="Example_2">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=12" title="Edit section: Example">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Some extremely contrived example code:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
 <span class="kw1">function</span> DrinkBeer<span class="br0">(</span><span class="br0">)</span> <span class="co1">//but don't drive afterwards!!!</span>
 <span class="br0">{</span>
     <span class="kw2">if</span> <span class="br0">(</span> <span class="kw3">IsInState</span><span class="br0">(</span><span class="st0">'Quenched'</span><span class="br0">)</span> <span class="br0">)</span>
     <span class="br0">{</span>
         <span class="co1">// Second parameter not passed so "Begin" label is used</span>
         <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'DryAsABone'</span><span class="br0">)</span>;
     <span class="br0">}</span>
     <span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span> <span class="kw3">GetStateName</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">'Drinking'</span> <span class="br0">)</span>
     <span class="br0">{</span>
         <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Quenched'</span><span class="br0">)</span>;
     <span class="br0">}</span>
     <span class="kw2">return</span>;
 <span class="br0">}</span>
 <span class="kw1">state</span> DryAsABone
 <span class="br0">{</span>
 <span class="kw2">Begin</span>:
     PurchaseBeer<span class="br0">(</span><span class="st0">'Guinness'</span><span class="br0">)</span>;
     <span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Drinking'</span>,<span class="st0">'FullPint'</span><span class="br0">)</span>;
 <span class="br0">}</span>
 <span class="kw1">state</span> Drinking
 <span class="br0">{</span>
 FullPint:
     DrinkBeer<span class="br0">(</span><span class="br0">)</span>;
 <span class="br0">}</span>
 <span class="kw1">state</span> Quenched
 <span class="br0">{</span>
 <span class="kw2">Begin</span>:
     <span class="co1">// Code</span>
 <span class="br0">}</span>
</pre></div>
</div>
<p>As a general rule of thumb you should place all of your labels together at the end of your state block after the function declarations.</p>
<p>Note that instead of using IsInState('Quenched') to branch within the function DrinkBeer(), we could have made a versions of the function within each state.</p>
<h2><span class="mw-headline" id="State_Scoping">State Scoping</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=13" title="Edit section: State Scoping">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The concept of states adds an extra complication to the question: <i>which version of a function does an actor call?</i> Here's the answer:</p>
<blockquote class="legacyquote">
<p>from <a href="Legacy_UnrealScript_Language_Reference/States.html" title="Legacy:UnrealScript Language Reference/States">UnrealScript Language Reference/States</a></p>
<p>The scoping rules, which resolves these complex situations, are:</p>
<ul>
<li>If the object is in a state, and an implementation of the function exists somewhere in that state (either in the actorâs class or in some parent class), the most-derived state version of the function is called.</li>
<li>Otherwise, the most-derived non-state version of the function is called.</li>
</ul>
<p><br /></p>
</blockquote>
<p>Basically, if the actor is in state Foo, when it looks for a function, it searches within code declared as within that state as much as possible.</p>
<h3><span class="mw-headline" id="Example_3">Example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=14" title="Edit section: Example">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Suppose we have the following functions defined (using non-standard notation to indicate states):</p>
<ul>
<li>Monster.Trigger</li>
<li>Monster.Idle.Trigger</li>
<li>BugEyedMonster.Trigger (a child class of Monster)</li>
</ul>
<p>Now BugEyedMonster is in state Idle, and there is a call of Trigger. What should it do?</p>
<ol>
<li>there is no BugEyedMonster.Idle.Trigger</li>
<li>look higher up the class tree...</li>
<li>there is a Monster.Idle.Trigger. Execute that.</li>
</ol>
<p>Now suppose we have:</p>
<ul>
<li>Monster.UnTrigger</li>
<li>BugEyedMonster.UnTrigger (a child class of Monster)</li>
</ul>
<ol>
<li>there is no BugEyedMonster.Idle.UnTrigger</li>
<li>look higher up the class tree...</li>
<li>there is no Monster.Idle.UnTrigger</li>
<li>Monster is the "eldest" class that defines a state Idle. So we have to give up looking in that state. Switch to looking for non-state version, back at the current class, BugEyedMonster</li>
<li>there is a BugEyedMonster.UnTrigger. Execute that.</li>
</ol>
<h2><span class="mw-headline" id="Related_topics">Related topics</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=15" title="Edit section: Related topics">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="Legacy_Flow_Syntax.html" title="Legacy:Flow Syntax">Flow Syntax</a></li>
<li><a href="Legacy_UnrealScript_Language_Reference/States.html" title="Legacy:UnrealScript Language Reference/States">UnrealScript Language Reference/States</a></li>
<li><a href="Legacy_Latent_Function.html" title="Legacy:Latent Function">Latent function</a></li>
</ul>
<h3><span class="mw-headline" id="Tutorials">Tutorials</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=16" title="Edit section: Tutorials">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul>
<li><a href="Legacy_TriggerJumpPad.html" title="Legacy:TriggerJumpPad">TriggerJumpPad</a></li>
</ul>
<h2><span class="mw-headline" id="Comments">Comments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:State?section=17" title="Edit section: Comments">edit</a><span class="mw-editsection-bracket">]</span></span></h2>

<!-- 
NewPP limit report
CPU time usage: 0.126 seconds
Real time usage: 0.128 seconds
Preprocessor visited node count: 160/1000000
Preprocessor generated node count: 307/1000000
Postâexpand include size: 1006/2097152 bytes
Template argument size: 455/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.948      1 - -total
100.00%    2.948      1 - Template:Innerbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:2749-0!*!0!!en!*!* and timestamp 20161215142716 and revision id 7369
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:State?oldid=7369">https://wiki.beyondunreal.com/Legacy:State?oldid=7369</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_State.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:State?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:State" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:State" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AState&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AState" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:State" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:State" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:State?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:State?oldid=7369" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:State" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 01:57, 18 July 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":90});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:State by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:29 GMT -->
</html>
