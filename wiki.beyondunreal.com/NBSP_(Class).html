<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/NBSP_(Class) by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 11:38:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>UE1:NBSP (Class) - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="UE1_NBSP_(Class).html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="canonical" href="UE1_NBSP_(Class).html" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"UE1","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":102,"wgPageName":"UE1:NBSP_(Class)","wgTitle":"NBSP (Class)","wgCurRevisionId":34429,"wgRevisionId":34429,"wgArticleId":24109,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["NBSP Classes"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"UE1:NBSP_(Class)","wgRelevantArticleId":24109,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"NBSP_(Class)","wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgInternalRedirectTargetUrl":"/UE1:NBSP_(Class)"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.redirect","mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-102 ns-subject page-UE1_NBSP_Class skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>I'm a doctor, not a mechanic
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">UE1:NBSP (Class)</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="mw-redirectedfrom">(Redirected from <a href="NBSP_(Class)c25d.html?redirect=no" title="NBSP (Class)">NBSP (Class)</a>)</span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Purpose"><span class="tocnumber">1</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_it_works"><span class="tocnumber">2</span> <span class="toctext">How it works</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Generating_the_nbspMagik_number"><span class="tocnumber">2.1</span> <span class="toctext">Generating the nbspMagik number</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Detecting_if_UTPure_is_loaded"><span class="tocnumber">2.2</span> <span class="toctext">Detecting if UTPure is loaded</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Discussion"><span class="tocnumber">3</span> <span class="toctext">Discussion</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Replacing_the_PlayerInfo_struct_with_an_Info_class"><span class="tocnumber">3.1</span> <span class="toctext">Replacing the PlayerInfo struct with an Info class</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Issues"><span class="tocnumber">3.2</span> <span class="toctext">Issues</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Variables"><span class="tocnumber">4</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Methods"><span class="tocnumber">5</span> <span class="toctext">Methods</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Complete_source_code"><span class="tocnumber">6</span> <span class="toctext">Complete source code</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Footer"><span class="tocnumber">7</span> <span class="toctext">Footer</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Purpose">Purpose</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=1" title="Edit section: Purpose">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This is the mutator part of NBSP.</p>
<h2><span class="mw-headline" id="How_it_works">How it works</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=2" title="Edit section: How it works">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Generating_the_nbspMagik_number">Generating the nbspMagik number</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=3" title="Edit section: Generating the nbspMagik number">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This number is generated when the NBSP class is spawned. MagikPolynomial is initialized with the hexadecimal number 0xedb82433 (3988268083 decimal) and is used as a seed to retrieve a random number between 0 and MagikPolynomial - 1. This means the resulting floating point number is practically different each time NBSP is run.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">var</span> <span class="kw5">int</span> nbspMagik;
<span class="kw1">const</span> MagikPolynomial <span class="sy0">=</span> 0xedb82433;
nbspMagik <span class="sy0">=</span> <span class="kw3">RandRange</span><span class="br0">(</span><span class="nu0">0</span>, <span class="br0">(</span>MagikPolynomial <span class="sy0">*</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;
</pre></div>
</div>
<h3><span class="mw-headline" id="Detecting_if_UTPure_is_loaded">Detecting if UTPure is loaded</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=4" title="Edit section: Detecting if UTPure is loaded">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To detect if UTPure is running you can scan all Actors and obtain their class name by using the Left() function.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw2">if</span> <span class="br0">(</span>UTPureMode<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">foreach</span> <span class="kw7">Level</span>.<span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'Actor'</span>,a<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Left</span><span class="br0">(</span>a.<span class="kw1">Class</span>,<span class="nu0">6</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">"UTPure"</span><span class="br0">)</span>
		<span class="br0">{</span>
			Pure<span class="sy0">=</span><span class="kw6">true</span>;
			PureVersion <span class="sy0">=</span> <span class="kw3">Left</span><span class="br0">(</span> <span class="kw5">String</span><span class="br0">(</span>a.<span class="kw1">Class</span><span class="br0">)</span>, <span class="kw3">InStr</span><span class="br0">(</span><span class="kw5">String</span><span class="br0">(</span>a.<span class="kw1">Class</span><span class="br0">)</span>, <span class="st0">"."</span><span class="br0">)</span> <span class="br0">)</span>;
			<span class="kw2">break</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>Pure<span class="br0">)</span>
		UTPureMode <span class="sy0">=</span> <span class="kw6">false</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>TODO: Explain how th version extraction is done&lt;/todo&gt;</p>
<h2><span class="mw-headline" id="Discussion">Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=5" title="Edit section: Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Replacing_the_PlayerInfo_struct_with_an_Info_class">Replacing the PlayerInfo struct with an Info class</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=6" title="Edit section: Replacing the PlayerInfo struct with an Info class">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Some of the methods are relative to the PI[] array which contains PlayerInfo structs. It would be possible to transform this struct into an Info class and have class specific methods. This has already been done for the nbsp[] and poll[] This could incur a performance hit (jump to find class in memory then another jump to call the function) though and might not be appropriate if time is critical.</p>
<h3><span class="mw-headline" id="Issues">Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=7" title="Edit section: Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There is a serious issue with this class. Every player is associated with an NBSPChecker and a Poller object, as well as a PlayerInfo structure. The association is made by using the PlayerID of the player as an offset into each array, eg:<br /></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Assume we have a playerpawn PP</span>
<span class="kw1">local</span> PlayerPawn PP;
<span class="kw1">local</span> <span class="kw5">int</span> C;
 
<span class="co1">// Then the PlayerID of this player will be</span>
C <span class="sy0">=</span> PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span>;
 
<span class="co1">// The associated NBSPChecker, Poller and PlayerInfo are</span>
Checker <span class="sy0">=</span> nbsp<span class="br0">[</span>c<span class="br0">]</span>;
Poller <span class="sy0">=</span> poll<span class="br0">[</span>c<span class="br0">]</span>;
<span class="kw9">Info</span> <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>;
</pre></div>
</div>
<p>The huge problem here is that the code falsely assumes that PlayerIDs are "recycled", eg: when the Player with PlayerID == 1 leaves the game, the next player to enter will get PlayerID 1. This is however <b>NOT</b> true. PlayerIDs keep increasing. Every new Player will get a higher PlayerID than the previous player that entered the game.<br />
As you can see the maximum size of each of the arrays is 256. This means that when the 256'th player joins (whose PlayerID will be 256), NBSP will be unable to associate a checker, poller or a playerinfo with this player. This would flood the serverlog with "accessed nones".</p>
<p>--<a href="https://wiki.beyondunreal.com/edit/User:AnthraX?redlink=1" class="new" title="User:AnthraX (page does not exist)">AnthraX</a> 17:11, 22 May 2009 (UTC)</p>
<h2><span class="mw-headline" id="Variables">Variables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=8" title="Edit section: Variables">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li>var NBSPLog logger - Reference to an instance of the Logger ( <a href="NBSPLog_(Class).html" title="NBSPLog (Class)" class="mw-redirect">NBSPLog (Class)</a> ) class</li>
<li>var NBSPSettings settings</li>
<li>var NBSPReporter reporter - Reference to Reporter class</li>
<li>var NBSPWorker worker</li>
<li>var NBSPPackages packages</li>
<li>var NBSPMsgMutator fix</li>
<li>var NBSPChecker nbsp[256]</li>
<li>var NBSPPoll poll[256]</li>
<li>var NBSPNotify ny</li>
<li>var int nbspMagik - Used for generating magic number</li>
<li>var PlayerInfo PI[256] - Struct containing various information on players</li>
<li>var string paths, canvas, packs</li>
<li>var private float zTCT</li>
<li>var string PureVersion</li>
<li>var config string h</li>
<li>var Sound shs</li>
<li>var config string AllowedClientVersions - List of allowed client versions</li>
<li>var config bool UseNBSPLog;</li>
<li>var config string LogDirectory - Directory where external log should be placed.</li>
<li>var config bool LogSettings</li>
<li>var config bool LogIdentd</li>
<li>var config bool LogToExternal - Boolean to indicate if external log should be used.</li>
<li>var config bool UTPureMode</li>
<li>var config bool DebugMode - Used for toggling debug mode</li>
</ul>
<h2><span class="mw-headline" id="Methods">Methods</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=9" title="Edit section: Methods">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li>AddMutator( Mutator m )</li>
</ul>
<dl>
<dd>
<dl>
<dd>Added to keep the mutator chain working when NBSP is made the basemutator.</dd>
</dl>
</dd>
</dl>
<ul>
<li>nlog( string a )</li>
</ul>
<dl>
<dd>
<dl>
<dd>Logs to both normal log and external log as well as sending a message to messagingspectators.</dd>
</dl>
</dd>
</dl>
<ul>
<li>dlog( string a )</li>
</ul>
<dl>
<dd>
<dl>
<dd>Used for debug logging.</dd>
</dl>
</dd>
</dl>
<ul>
<li>Spawned()</li>
<li>Tick( float a)</li>
<li>ServerInit ()</li>
<li>checkPackages ( NBSPChecker a, playerpawn b, int c )</li>
</ul>
<dl>
<dd>
<dl>
<dd><a href="NBSPChecker_(Class).html" title="NBSPChecker (Class)" class="mw-redirect">NBSPChecker (Class)</a></dd>
</dl>
</dd>
</dl>
<ul>
<li>CheckPackage ( int i, int j, int m )</li>
<li>RunningPackageCheck ( int c, int i, string e )</li>
<li>checkmods ( NBSPChecker a, playerpawn b, int c )</li>
<li>checkmods2 ( NBSPChecker a, playerpawn b, int c )</li>
<li>CheckClasses ( NBSPChecker a, playerpawn b, int i)</li>
<li>CheckActors ( NBSPChecker a, playerpawn b, int c, string e )</li>
<li>ScanConsole ( NBSPChecker a, playerpawn b, NBSPPoll p, string e )</li>
<li>int getArray ( int b, string c )</li>
<li>sortcanvas ( NBSPChecker a, playerpawn b, int c )</li>
<li>confpaths()</li>
<li>string getinfo (int b)</li>
<li>logclient (int b)</li>
<li>int getVersion(int i) { return PI[i].version; }</li>
<li>int returnCRC(int b, int i) { return PI[b].CRC[i]; }</li>
<li>string returnPaths(int b) { return PI[b].paths; }</li>
<li>NBSPPoll findpoll(int i) { return poll[i]; }</li>
<li>int amount(int i) { return PI[i].upackagecount; }</li>
<li>killPoll(int i)</li>
</ul>
<dl>
<dd>
<dl>
<dd>Destroys all the NBSPPolls contained in the poll[] array.</dd>
</dl>
</dd>
</dl>
<ul>
<li>DestroyPI(int i)</li>
<li>string IPOnly(string IP)</li>
<li>fa( NBSPChecker a, PlayerPawn p )</li>
<li>bool xx()</li>
</ul>
<dl>
<dd>
<dl>
<dd>Returns true if the game has ended or the countdown is higher than zeeo in requireready mode.</dd>
</dl>
</dd>
</dl>
<ul>
<li>ModifyLogin(out class&lt;playerpawn&gt; SpawnClass, out string pt, out string o)</li>
<li>string xxF(string o, string i, string v)</li>
<li>string xxG(string zc)</li>
<li>bool xxV(string n)</li>
<li>NextTeam(PlayerPawn p)</li>
<li>bool HandlePickupQuery(Pawn o, Inventory inv, out byte b)</li>
<li>DisableNBSP()</li>
<li>EnableNBSP()</li>
<li>bool IsPaused ()</li>
</ul>
<dl>
<dd>
<dl>
<dd>returns true if the game is paused.</dd>
<dd>Tests the value of Level.Pauser.</dd>
</dl>
</dd>
</dl>
<ul>
<li>Mutate( string a, PlayerPawn b )</li>
<li>Destroyed()</li>
<li>string rts(coerce string t, coerce string r, coerce string w)</li>
<li>int Hash(String a)</li>
</ul>
<dl>
<dd>
<dl>
<dd>Returns some sort of numerical hash based on the input string.</dd>
</dl>
</dd>
</dl>
<p>- Cast nbspMagik (global variable) to String. - Append content of a. - Store result in a. - Repeat from 0 to the length of a&#160;: - Get substring of a at position c and return it's first character. - Transform the result into it's unicode representation. - Add the result to 37 * b. - Store the result in b. - End repeat - If b = 0 return a value of 1 - Return a value a b otherwise.</p>
<ul>
<li>string fb(out string a)</li>
<li>string fc(out string a)</li>
</ul>
<h2><span class="mw-headline" id="Complete_source_code">Complete source code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=10" title="Edit section: Complete source code">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//=============================================================================</span>
<span class="co1">// NBSP ==&gt; NoBullShitPlus v1.09</span>
<span class="co1">//=============================================================================</span>
 
<span class="kw1">class</span> NBSP <span class="kw1">expands</span> <span class="kw9">Mutator</span> <span class="kw1">config</span><span class="br0">(</span>NBSP109<span class="br0">)</span>;
 
<span class="kw1">var</span> <span class="kw5">String</span> version;
 
<span class="kw1">struct</span> PlayerInfo <span class="br0">{</span> 
	<span class="kw1">var</span> <span class="kw5">string</span> <span class="kw5">Name</span>, ip, mods<span class="br0">[</span><span class="nu0">128</span><span class="br0">]</span>, packages<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span>, upackagesT<span class="br0">[</span><span class="nu0">128</span><span class="br0">]</span>, upackagesT2<span class="br0">[</span><span class="nu0">128</span><span class="br0">]</span>, <span class="kw1">Class</span>, RenderDevice, paths, identd; 
	<span class="kw1">var</span> PlayerPawn PP;
	<span class="kw1">var</span> <span class="kw5">int</span> ID, CRC<span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span>, modcount, packagecount, fov, faultyCanvas<span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span>, upackage<span class="br0">[</span><span class="nu0">128</span><span class="br0">]</span>, upackages<span class="br0">[</span><span class="nu0">128</span><span class="br0">]</span>, upackagecount, version, RAct;
<span class="br0">}</span>;
 
<span class="co1">//Spawned items</span>
<span class="kw1">var</span> NBSPLog logger;
<span class="kw1">var</span> NBSPSettings settings;
<span class="kw1">var</span> NBSPReporter reporter;
<span class="kw1">var</span> NBSPWorker worker;
<span class="kw1">var</span> NBSPPackages packages;
<span class="kw1">var</span> NBSPMsgMutator fix;
<span class="kw1">var</span> NBSPChecker nbsp<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span>;       <span class="co1">//64 just in case</span>
<span class="kw1">var</span> NBSPPoll poll<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span>;       <span class="co1">//64 just in case</span>
<span class="kw1">var</span> NBSPNotify ny;
<span class="kw1">var</span> <span class="kw5">int</span> nbspMagik;		<span class="co1">//Execution specific magic number. Randomly generated on server start.</span>
<span class="kw1">var</span> PlayerInfo <span class="kw6">PI</span><span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span>;
<span class="kw1">var</span> <span class="kw5">string</span> paths, <span class="kw8">canvas</span>, packs; <span class="co1">//Serverside Set varaibles</span>
<span class="kw1">var</span> <span class="kw1">private</span> <span class="kw5">float</span> zTCT;
<span class="kw1">var</span> <span class="kw5">string</span> PureVersion;
 
<span class="co1">//Class items</span>
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">string</span> h;
<span class="kw1">var</span> <span class="kw5">Sound</span> shs;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">string</span> AllowedClientVersions;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> UseNBSPLog;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">string</span> LogDirectory;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> LogSettings;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> LogIdentd;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> LogToExternal;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> UTPureMode;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">bool</span> DebugMode;
 
<span class="kw1">function</span> AddMutator<span class="br0">(</span> <span class="kw9">Mutator</span> m <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span> NextMutator <span class="sy0">==</span> <span class="kw5">None</span> <span class="br0">)</span>
		NextMutator <span class="sy0">=</span> m;
	<span class="kw2">else</span>
		NextMutator.<span class="me0">AddMutator</span><span class="br0">(</span>m<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> nlog<span class="br0">(</span> <span class="kw5">string</span> a <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw9">Pawn</span> P;
 
	<span class="kw2">if</span> <span class="br0">(</span>logger<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		logger.<span class="me0">LogEventString</span><span class="br0">(</span>a<span class="br0">)</span>;
		logger.<span class="me0">FileFlush</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span>LogToExternal<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">for</span> <span class="br0">(</span>P <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="me0">PawnList</span>; P <span class="sy0">!=</span> <span class="kw5">None</span>; P <span class="sy0">=</span> P.<span class="me0">NextPawn</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span>P.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'MessagingSpectator'</span><span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw3">Log</span><span class="br0">(</span>P<span class="br0">)</span>;
				P.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">""</span><span class="sy0">@</span>a,<span class="st0">'NBSP'</span><span class="br0">)</span>;
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw3">log</span><span class="br0">(</span>a,<span class="st0">'NBSP'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> dlog<span class="br0">(</span> <span class="kw5">string</span> a <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw9">Pawn</span> P;
 
	<span class="kw2">if</span> <span class="br0">(</span>logger<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		logger.<span class="me0">LogEventString</span><span class="br0">(</span>a<span class="br0">)</span>;
		logger.<span class="me0">FileFlush</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="kw3">log</span><span class="br0">(</span>a,<span class="st0">'NBSPDEBUG'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">simulated</span> <span class="kw1">function</span> Spawned<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw9">Actor</span> a;
	<span class="kw1">local</span> <span class="kw5">bool</span> Pure;
 
	<span class="kw1">const</span> MagikPolynomial <span class="sy0">=</span> 0xedb82433;
	<span class="co1">// Make sure this is only done for the server</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">!=</span> <span class="kw7">Role_Authority</span><span class="br0">)</span>
		<span class="kw2">return</span>;
 
	<span class="co1">// Detect UTPURE</span>
	<span class="kw2">if</span> <span class="br0">(</span>UTPureMode<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">foreach</span> <span class="kw7">Level</span>.<span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'Actor'</span>,a<span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Left</span><span class="br0">(</span>a.<span class="kw1">Class</span>,<span class="nu0">6</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">"UTPure"</span><span class="br0">)</span>
			<span class="br0">{</span>
				Pure<span class="sy0">=</span><span class="kw6">true</span>;
				PureVersion <span class="sy0">=</span> <span class="kw3">Left</span><span class="br0">(</span> <span class="kw5">String</span><span class="br0">(</span>a.<span class="kw1">Class</span><span class="br0">)</span>, <span class="kw3">InStr</span><span class="br0">(</span><span class="kw5">String</span><span class="br0">(</span>a.<span class="kw1">Class</span><span class="br0">)</span>, <span class="st0">"."</span><span class="br0">)</span> <span class="br0">)</span>;
				<span class="kw2">break</span>;
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>Pure<span class="br0">)</span>
			UTPureMode <span class="sy0">=</span> <span class="kw6">false</span>;
	<span class="br0">}</span>
 
	<span class="co1">// Set up a settings handler</span>
	settings <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPSettings'</span><span class="br0">)</span>;
	settings.<span class="me0">init</span><span class="br0">(</span><span class="kw6">self</span><span class="br0">)</span>;
 
	<span class="co1">// Spawn external log</span>
	<span class="kw2">if</span> <span class="br0">(</span>UseNBSPLog<span class="br0">)</span>
		logger <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'NBSPLog'</span><span class="br0">)</span>;
 
	<span class="co1">// Start external log</span>
	<span class="kw2">if</span> <span class="br0">(</span>logger<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		logger.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
		logger.<span class="me0">StartLog</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
	nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
        nlog<span class="br0">(</span><span class="st0">"            **NoBullShitPlus**            "</span><span class="br0">)</span>;
        nlog<span class="br0">(</span><span class="st0">"      Suck &lt;az@thesurfersdream.com&gt;       "</span><span class="br0">)</span>;
	nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
	nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>UTPureMode<span class="br0">)</span>
	<span class="br0">{</span>
       		nlog<span class="br0">(</span><span class="st0">"       **Supporting:-"</span><span class="sy0">@</span>PureVersion<span class="sy0">$</span><span class="st0">"**"</span><span class="br0">)</span>;
		nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="co1">// Sets up advertising</span>
	<span class="kw2">if</span> <span class="br0">(</span> <span class="br0">(</span>settings.<span class="me0">Advertise</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">NetMode</span> <span class="sy0">!=</span> NM_Standalone<span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="kw3">instr</span><span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">GameReplicationInfo</span>.<span class="me0">ServerName</span>,settings.<span class="me0">AdvertiseText</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">)</span>
		<span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">GameReplicationInfo</span>.<span class="me0">ServerName</span> <span class="sy0">=</span> settings.<span class="me0">AdvertiseText</span> <span class="sy0">$</span>Level.<span class="kw7">Game</span>.<span class="me0">GameReplicationInfo</span>.<span class="me0">ServerName</span>;
 
	<span class="co1">// Spwan Notify</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>settings.<span class="me0">DisplayLevel</span> <span class="sy0">==</span> <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> settings.<span class="me0">Enabled</span><span class="br0">)</span>
		ny <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="kw4">Spawn</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'NBSPNotify'</span><span class="br0">)</span>;
 
	<span class="co1">// Spawn Message Mutator &amp; NSBP Auto Pause</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="sy0">!</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'RocketArenaGame'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">!</span>UTPureMode<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>	
		fix <span class="sy0">=</span> <span class="kw4">Spawn</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'NBSPMsgMutator'</span>,<span class="kw6">self</span><span class="br0">)</span>;
		fix.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
	<span class="br0">}</span>
 
	<span class="co1">// Set up a reporter for all logging and verbosing</span>
	reporter <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPReporter'</span><span class="br0">)</span>;
	reporter.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
 
	<span class="co1">// Initialize from here because the references are up.</span>
	nbspMagik <span class="sy0">=</span> <span class="kw3">RandRange</span><span class="br0">(</span><span class="nu0">0</span>, <span class="br0">(</span>MagikPolynomial <span class="sy0">*</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;
 
	<span class="co1">// Set up a worker and references back to NBSP.</span>
	worker <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPWorker'</span><span class="br0">)</span>;
	worker.<span class="me0">xxPreDecrypt</span><span class="br0">(</span>settings.<span class="me0">EncryptionKey</span><span class="br0">)</span>;
	worker.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
 
	<span class="co1">// Initialise Server console commands.</span>
	ServerInit<span class="br0">(</span><span class="br0">)</span>;
 
	<span class="co1">// Dump Settings</span>
	settings.<span class="me0">ReportSettings</span><span class="br0">(</span><span class="kw6">self</span><span class="br0">)</span>;
 
	<span class="co1">// Setup Packages</span>
	packages <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPPackages'</span><span class="br0">)</span>;
	packages.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
	packages.<span class="me0">Precache</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="co1">// HitSoundFix</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>H<span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>settings.<span class="me0">Enabled</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
		shs<span class="sy0">=</span><span class="kw5">Sound</span><span class="br0">(</span><span class="kw3">DynamicLoadObject</span><span class="br0">(</span>H,<span class="kw1">Class</span><span class="st0">'Sound'</span><span class="br0">)</span><span class="br0">)</span>;
		nlog<span class="br0">(</span><span class="st0">"Loaded HitSound: '"</span><span class="sy0">$</span>H<span class="sy0">$</span><span class="st0">"'"</span><span class="br0">)</span>;
	<span class="br0">}</span>
	nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span> <span class="kw5">float</span> a<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> b, c, i;
	<span class="kw1">local</span> <span class="kw5">string</span> g;
	<span class="kw1">local</span> PlayerPawn d;
	<span class="kw1">local</span> <span class="kw9">pawn</span> e;
 
	<span class="co1">//Close the log when game ends</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">bGameEnded</span> <span class="sy0">||</span> <span class="kw7">Level</span>.<span class="me0">NextSwitchCountdown</span> <span class="sy0">&lt;</span> <span class="nu0">0.5</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> logger <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		logger.<span class="me0">StopLog</span><span class="br0">(</span><span class="br0">)</span>;
		logger.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
		logger <span class="sy0">=</span> <span class="kw5">None</span>;		
	<span class="br0">}</span>
 
	<span class="co1">// Checks to see if enabled</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>settings.<span class="me0">Enabled</span><span class="br0">)</span>
		<span class="kw2">return</span>;
 
	<span class="co1">//Give all new players a checker</span>
	<span class="kw2">for</span><span class="br0">(</span> e <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="me0">PawnList</span>; e <span class="sy0">!=</span> <span class="kw5">None</span>; e <span class="sy0">=</span> e.<span class="me0">nextPawn</span> <span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>e.<span class="me0">bIsPlayer</span> <span class="sy0">&amp;&amp;</span> e.<span class="kw3">isA</span><span class="br0">(</span><span class="st0">'PlayerPawn'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> NetConnection<span class="br0">(</span>PlayerPawn<span class="br0">(</span>e<span class="br0">)</span>.<span class="kw8">Player</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span>
		<span class="br0">(</span><span class="sy0">!</span><span class="br0">(</span>e.<span class="kw3">isA</span><span class="br0">(</span><span class="st0">'Spectator'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span>e.<span class="kw3">isA</span><span class="br0">(</span><span class="st0">'Spectator'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> settings.<span class="me0">CheckSpectators</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
			d <span class="sy0">=</span> PlayerPawn<span class="br0">(</span>e<span class="br0">)</span>;
			c <span class="sy0">=</span> d.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span>;
			<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>c<span class="br0">]</span> <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">&amp;&amp;</span> poll<span class="br0">[</span>c<span class="br0">]</span> <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span>d.<span class="kw8">player</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Viewport'</span><span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>IsPaused<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
				<span class="br0">{</span>
					nbsp<span class="br0">[</span>c<span class="br0">]</span> <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPChecker'</span>, d<span class="br0">)</span>;
					poll<span class="br0">[</span>c<span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'NBSPPoll'</span><span class="br0">)</span>;
 
					<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>c<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
					<span class="br0">{</span>
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">checker</span> <span class="sy0">=</span> nbsp<span class="br0">[</span>c<span class="br0">]</span>;
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">ID</span> <span class="sy0">=</span> c;
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">PP</span> <span class="sy0">=</span> d;
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">TimeHash</span> <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="me0">TimeSeconds</span>;
						poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">CSet</span><span class="br0">(</span><span class="br0">)</span>;
						<span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">ValidateResponseClass</span><span class="br0">)</span>
							poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">ClassValidated</span> <span class="sy0">=</span> <span class="kw6">False</span>;		
						<span class="kw2">else</span>
							poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">ClassValidated</span> <span class="sy0">=</span> <span class="kw6">True</span>;
					<span class="br0">}</span>
					<span class="kw2">else</span>
						nlog<span class="br0">(</span><span class="st0">"WARNING - Couldn't spawn server poller for client"</span><span class="br0">)</span>;
 
					<span class="co1">//Predecrypt the client</span>
					nbsp<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">xxPreDecrypt</span><span class="br0">(</span>settings.<span class="me0">EncryptionKey</span><span class="br0">)</span>;
 
					<span class="co1">//Set up magic number</span>
					nbsp<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">replyCMD</span> <span class="sy0">=</span> version;
					nbsp<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">SetMajik</span><span class="br0">(</span>nbspMagik<span class="br0">)</span>;
					fa<span class="br0">(</span>nbsp<span class="br0">[</span>c<span class="br0">]</span>,d<span class="br0">)</span>;
 
					<span class="co1">//Initialise Client</span>
					poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">init</span><span class="br0">(</span><span class="br0">)</span>;
 
					<span class="co1">//Report Join</span>
					g <span class="sy0">=</span> getinfo<span class="br0">(</span>c<span class="br0">)</span>;
					reporter.<span class="me0">ReportEvent</span><span class="br0">(</span><span class="st0">"Player has joined:"</span>,g<span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="co1">//Initialise Servers Paths/Canvas/Packs on startup</span>
<span class="kw1">function</span> ServerInit <span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>	
	<span class="kw1">local</span> <span class="kw1">private</span> <span class="kw5">string</span> a, b;
	<span class="kw1">local</span> <span class="kw1">private</span> <span class="kw5">int</span> x;	
 
	<span class="kw8">canvas</span> <span class="sy0">=</span> <span class="kw4">ConsoleCommand</span><span class="br0">(</span>worker.<span class="me0">h</span><span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="br0">)</span>;
	packs <span class="sy0">=</span> <span class="kw3">caps</span><span class="br0">(</span><span class="kw4">ConsoleCommand</span><span class="br0">(</span>worker.<span class="me0">h</span><span class="br0">[</span><span class="nu0">6</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>;
	paths <span class="sy0">=</span> <span class="kw4">ConsoleCommand</span><span class="br0">(</span>worker.<span class="me0">h</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="br0">)</span>;
 
	<span class="co1">//Configure paths</span>
	confpaths<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">//------------------------------------------</span>
<span class="co1">//PlayerInfo functions/CHECKS</span>
<span class="co1">//------------------------------------------</span>
<span class="kw1">function</span> checkPackages <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> c <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
	<span class="kw1">local</span> <span class="kw5">int</span> m;
	<span class="kw1">local</span> <span class="kw5">bool</span> j;
	<span class="kw1">local</span> <span class="kw5">string</span> q;
 
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackagecount</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackage</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
			<span class="br0">{</span>
				m<span class="sy0">++</span>;
				<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>i<span class="br0">]</span> ~<span class="sy0">=</span> worker.<span class="me0">version</span><span class="br0">)</span>
					j <span class="sy0">=</span> <span class="kw6">true</span>;
 
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkDefault</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
				<span class="br0">{</span>
					worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">5</span>,<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span>;
					<span class="kw2">return</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">RestrictPackages</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkCustom</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
				<span class="br0">{</span>
					worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">11</span>,<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span>;
					<span class="kw2">return</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>	
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">!</span>j<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		q <span class="sy0">=</span> a.<span class="me0">encode</span><span class="br0">(</span>worker.<span class="me0">version</span><span class="br0">)</span>;
		a.<span class="me0">getCustom</span><span class="br0">(</span>q<span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="co1">//Checks that a default amount of packages were checked. (12 to be safe).</span>
	<span class="kw2">if</span> <span class="br0">(</span>m <span class="sy0">&gt;=</span> <span class="nu0">12</span><span class="br0">)</span>
		poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">IsValid3</span> <span class="sy0">=</span> <span class="kw6">True</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> CheckPackage <span class="br0">(</span> <span class="kw5">int</span> i, <span class="kw5">int</span> j, <span class="kw5">int</span> m <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">switch</span><span class="br0">(</span>m<span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">case</span> <span class="nu0">0</span>:
			<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkDefault</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				worker.<span class="me0">hd</span><span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span>,poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span>,<span class="nu0">5</span>,<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span>;
				<span class="kw2">return</span>;
			<span class="br0">}</span>
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="nu0">1</span>:
			<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkCustom</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				worker.<span class="me0">hd</span><span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span>,poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span>,<span class="nu0">11</span>,<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span>;
				<span class="kw2">return</span>;
			<span class="br0">}</span>
			<span class="kw2">break</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
 
<span class="kw1">function</span> RunningPackageCheck <span class="br0">(</span> <span class="kw5">int</span> c, <span class="kw5">int</span> i, <span class="kw5">string</span> e <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkCustom</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
			worker.<span class="me0">hd</span><span class="br0">(</span>nbsp<span class="br0">[</span>c<span class="br0">]</span>,poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">PP</span>,<span class="nu0">11</span>,e<span class="br0">)</span>;
			<span class="kw2">return</span>;
		<span class="br0">}</span>	
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> checkmods <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> c <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> x, i, h;
	<span class="kw1">local</span> <span class="kw5">string</span> f, g, j;	
 
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">modcount</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
			<span class="kw2">return</span>;
 
		f <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">mods</span><span class="br0">[</span>i<span class="br0">]</span>;
		g <span class="sy0">=</span> fb<span class="br0">(</span>f<span class="br0">)</span>;	
		j <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>g,<span class="kw3">Instr</span><span class="br0">(</span>g, <span class="st0">"."</span><span class="br0">)</span>,<span class="br0">(</span><span class="kw3">Len</span><span class="br0">(</span>g<span class="br0">)</span><span class="sy0">-</span><span class="kw3">Instr</span><span class="br0">(</span>g, <span class="st0">"."</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
		h <span class="sy0">=</span> Hash<span class="br0">(</span><span class="kw3">caps</span><span class="br0">(</span>j<span class="br0">)</span><span class="br0">)</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span>packages.<span class="me0">checkMod</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
			worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">12</span>,g<span class="br0">)</span>;
			<span class="kw2">return</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> checkmods2 <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> c <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> x, i, h;
	<span class="kw1">local</span> <span class="kw5">string</span> f, g, j;	
 
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">modcount</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
			<span class="kw2">return</span>;
 
		f <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">mods</span><span class="br0">[</span>i<span class="br0">]</span>;
		g <span class="sy0">=</span> fb<span class="br0">(</span>f<span class="br0">)</span>;	
		j <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>g,<span class="kw3">Instr</span><span class="br0">(</span>g, <span class="st0">"."</span><span class="br0">)</span>,<span class="br0">(</span><span class="kw3">Len</span><span class="br0">(</span>g<span class="br0">)</span><span class="sy0">-</span><span class="kw3">Instr</span><span class="br0">(</span>g, <span class="st0">"."</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
		h <span class="sy0">=</span> Hash<span class="br0">(</span><span class="kw3">caps</span><span class="br0">(</span>j<span class="br0">)</span><span class="br0">)</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span>packages.<span class="me0">checkMod2</span><span class="br0">(</span>h<span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
			worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">12</span>,g<span class="br0">)</span>;
			<span class="kw2">return</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> CheckClasses <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> i<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span>worker.<span class="me0">checkclientclass</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">IsValid2</span><span class="br0">)</span>
			poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">IsValid2</span> <span class="sy0">=</span> <span class="kw6">True</span>;
	<span class="br0">}</span>
	<span class="kw2">else</span>
		poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">classError</span> <span class="sy0">=</span> <span class="kw6">True</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> CheckActors <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> c, <span class="kw5">string</span> e <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">string</span> x, d, m;
	<span class="kw1">local</span> <span class="kw5">int</span> f;
	<span class="kw1">local</span> <span class="kw5">bool</span> t;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">IsValid4</span><span class="br0">)</span>
		poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">IsValid4</span> <span class="sy0">=</span> <span class="kw6">True</span>;
 
	<span class="co1">//Do we validate?? (Not every time)</span>
	<span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">ValidateActors</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">RAct</span> <span class="sy0">&gt;=</span> settings.<span class="me0">SecurityFrequency</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">RAct</span> <span class="sy0">=</span> <span class="nu0">0</span>;
			t <span class="sy0">=</span> <span class="kw6">true</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span>
			<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">RAct</span> <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">RAct</span><span class="sy0">++</span>;
	<span class="br0">}</span>
 
	x <span class="sy0">=</span> a.<span class="me0">decode</span><span class="br0">(</span>e<span class="br0">)</span>;
	<span class="kw2">while</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>x,<span class="st0">","</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
			<span class="kw2">return</span>;
 
		d <span class="sy0">=</span> fc<span class="br0">(</span>x<span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Caps</span><span class="br0">(</span>d<span class="br0">)</span> <span class="sy0">!=</span> packages.<span class="me0">MapName</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">actorExists</span><span class="br0">(</span>d<span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">4</span>,d<span class="br0">)</span>;
				<span class="kw2">return</span>;
			<span class="br0">}</span>
			<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>t<span class="br0">)</span>
			<span class="br0">{</span>
				<span class="co1">//Checks to make sure the actor is a CUSTOM package.</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">isDone</span><span class="br0">(</span>d<span class="br0">)</span><span class="br0">)</span>
				<span class="br0">{</span>
					f <span class="sy0">=</span> getArray<span class="br0">(</span>c,d<span class="br0">)</span>;
					<span class="kw2">if</span> <span class="br0">(</span>f <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
					<span class="br0">{</span>
						<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkCustom</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>f<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
						<span class="br0">{</span>
							worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">4</span>,d<span class="br0">)</span>;
							<span class="kw2">return</span>;
						<span class="br0">}</span>
					<span class="br0">}</span>
					<span class="kw2">else</span>
					<span class="br0">{</span>
						m <span class="sy0">=</span> a.<span class="me0">encode</span><span class="br0">(</span>d<span class="br0">)</span>;
						a.<span class="me0">getCustom</span><span class="br0">(</span>m<span class="br0">)</span>;
					<span class="br0">}</span>	
				<span class="br0">}</span>	
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>	
<span class="br0">}</span>
 
<span class="kw1">function</span> ScanConsole <span class="br0">(</span> NBSPChecker a, playerpawn b, NBSPPoll p, <span class="kw5">string</span> e <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">string</span> d, m;
	<span class="kw1">local</span> <span class="kw5">int</span> f, c;
 
	d <span class="sy0">=</span> <span class="kw3">Left</span><span class="br0">(</span>e,<span class="kw3">Instr</span><span class="br0">(</span>e, <span class="st0">"."</span><span class="br0">)</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">isDone</span><span class="br0">(</span>d<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		c <span class="sy0">=</span> b.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span>;
		f <span class="sy0">=</span> getArray<span class="br0">(</span>c,d<span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>f <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">checkCustom</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>f<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
			<span class="br0">{</span>
				worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">4</span>,<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>f<span class="br0">]</span><span class="br0">)</span>;
				<span class="kw2">return</span>;
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			p.<span class="me0">LastConsole</span> <span class="sy0">=</span> <span class="st0">"Retry"</span>;
			m <span class="sy0">=</span> a.<span class="me0">encode</span><span class="br0">(</span>d<span class="br0">)</span>;
			a.<span class="me0">getCustom</span><span class="br0">(</span>m<span class="br0">)</span>;
		<span class="br0">}</span>	
	<span class="br0">}</span>	
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">int</span> getArray <span class="br0">(</span> <span class="kw5">int</span> b, <span class="kw5">string</span> c <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">upackagecount</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>c ~<span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">upackagesT2</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span>
			<span class="kw2">return</span> i;
	<span class="br0">}</span>
	<span class="kw2">return</span> <span class="sy0">-</span><span class="nu0">1</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> sortcanvas <span class="br0">(</span> NBSPChecker a, playerpawn b, <span class="kw5">int</span> c <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> e, f, i;
	<span class="kw1">local</span> <span class="kw5">string</span> m;
 
	f <span class="sy0">=</span> a.<span class="me0">replyCanvas</span>;
	e <span class="sy0">=</span> hash<span class="br0">(</span><span class="kw8">canvas</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>e <span class="sy0">==</span> f<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">return</span>;
	<span class="br0">}</span>
 
	<span class="kw2">else</span>
	<span class="br0">{</span>
		m <span class="sy0">=</span> a.<span class="me0">encode</span><span class="br0">(</span>worker.<span class="me0">h</span><span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy0">@</span><span class="kw8">canvas</span><span class="br0">)</span>;
		a.<span class="me0">runC</span><span class="br0">(</span>m<span class="br0">)</span>;
		a.<span class="me0">replyCanvas</span> <span class="sy0">=</span> e;
		<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="nu0">8</span>; i<span class="sy0">++</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">faultyCanvas</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">faultyCanvas</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">==</span> f<span class="br0">)</span>
				<span class="br0">{</span>
					worker.<span class="me0">hd</span><span class="br0">(</span>a,b,<span class="nu0">9</span>,a.<span class="me0">decode</span><span class="br0">(</span>a.<span class="me0">replyCanvas2</span><span class="br0">)</span><span class="br0">)</span>;
					<span class="kw2">return</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
			<span class="br0">{</span>
				<span class="kw6">PI</span><span class="br0">[</span>c<span class="br0">]</span>.<span class="me0">faultyCanvas</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> f;
				<span class="kw2">return</span>;
			<span class="br0">}</span>
		<span class="br0">}</span>
	<span class="br0">}</span>	
<span class="br0">}</span>
 
<span class="kw1">function</span> confpaths<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	paths <span class="sy0">=</span> rts<span class="br0">(</span>paths,<span class="st0">"("</span>,<span class="st0">""</span><span class="br0">)</span>;
	paths <span class="sy0">=</span> rts<span class="br0">(</span>paths,<span class="st0">")"</span>,<span class="st0">""</span><span class="br0">)</span>;
	paths <span class="sy0">=</span> rts<span class="br0">(</span>paths,<span class="st0">"<span class="es0">\\</span>"</span>,<span class="st0">"/"</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>paths,<span class="st0">"../System/*.u"</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span>
		paths <span class="sy0">=</span> paths <span class="sy0">$</span> <span class="st0">",<span class="es0">\"</span>../System/*.u<span class="es0">\"</span>"</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>paths,<span class="st0">"../Maps/*.unr"</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span>
		paths <span class="sy0">=</span> paths <span class="sy0">$</span> <span class="st0">",<span class="es0">\"</span>../Maps/*.unr<span class="es0">\"</span>"</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>paths,<span class="st0">"../Textures/*.utx"</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span>
		paths <span class="sy0">=</span> paths <span class="sy0">$</span> <span class="st0">",<span class="es0">\"</span>../Textures/*.utx<span class="es0">\"</span>"</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>paths,<span class="st0">"../Sounds/*.uax"</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span>
		paths <span class="sy0">=</span> paths <span class="sy0">$</span> <span class="st0">",<span class="es0">\"</span>../Sounds/*.uax<span class="es0">\"</span>"</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">Instr</span><span class="br0">(</span>paths,<span class="st0">"../Music/*.umx"</span><span class="br0">)</span><span class="sy0">==-</span><span class="nu0">1</span><span class="br0">)</span>
		paths <span class="sy0">=</span> paths <span class="sy0">$</span> <span class="st0">",<span class="es0">\"</span>../Music/*.umx<span class="es0">\"</span>"</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> getinfo <span class="br0">(</span><span class="kw5">int</span> b<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">return</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span><span class="sy0">$</span><span class="st0">" ("</span><span class="sy0">$</span>PI<span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">ip</span><span class="sy0">$</span><span class="st0">") | "</span><span class="sy0">$</span>PI<span class="br0">[</span>b<span class="br0">]</span>.<span class="kw1">Class</span><span class="sy0">$</span><span class="st0">"/"</span><span class="sy0">$</span>PI<span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">RenderDevice</span><span class="sy0">$</span><span class="st0">" | ID: "</span><span class="sy0">$</span>string<span class="br0">(</span>b<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> logclient <span class="br0">(</span><span class="kw5">int</span> b<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i, j;	
	<span class="kw1">local</span> <span class="kw5">string</span> e;
 
	<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
		<span class="kw2">return</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>settings.<span class="me0">LogLevel</span> <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span>settings.<span class="me0">LogLevel</span> <span class="sy0">==</span> <span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		reporter.<span class="me0">zzParse</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,<span class="st0">"Packages"</span><span class="br0">)</span>;
		<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">packagecount</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>; i<span class="sy0">++</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span>j <span class="sy0">==</span> <span class="nu0">6</span><span class="br0">)</span>
			<span class="br0">{</span>
			  	reporter.<span class="me0">serverlog</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,e<span class="br0">)</span>;
  				e <span class="sy0">=</span> <span class="st0">""</span>;
  				j <span class="sy0">=</span> <span class="nu0">0</span>;
			<span class="br0">}</span>
			<span class="kw2">if</span> <span class="br0">(</span>i <span class="sy0">==</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">packagecount</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>e<span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
					reporter.<span class="me0">serverlog</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,e<span class="br0">)</span>;
 
			<span class="br0">}</span>
			<span class="kw2">else</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>e<span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
					e <span class="sy0">=</span> e <span class="sy0">$</span> <span class="st0">","</span><span class="sy0">@</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">packages</span><span class="br0">[</span>i<span class="br0">]</span>;
				<span class="kw2">else</span>
					e <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">packages</span><span class="br0">[</span>i<span class="br0">]</span>;
			<span class="br0">}</span>
			j<span class="sy0">++</span>;
		<span class="br0">}</span>
	nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">LogLevel</span> <span class="sy0">&gt;=</span> <span class="nu0">2</span><span class="br0">)</span>
	<span class="br0">{</span>
		reporter.<span class="me0">zzParse</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,<span class="st0">"Mods"</span><span class="br0">)</span>;
		<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">modcount</span>; i<span class="sy0">++</span><span class="br0">)</span>
		<span class="br0">{</span>
			reporter.<span class="me0">serverlog</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,<span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">mods</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span>;	
		<span class="br0">}</span>
	nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
	<span class="br0">}</span>	
 
	reporter.<span class="me0">zzParse</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,<span class="st0">"Checksums"</span><span class="br0">)</span>;
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span><span class="nu0">8</span>;i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>packages.<span class="me0">CRC</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">P</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="br0">{</span>
			reporter.<span class="me0">serverlog</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="kw5">Name</span>,<span class="st0">"CRC: ("</span><span class="sy0">$</span>i<span class="sy0">$</span><span class="st0">":"</span><span class="sy0">$</span>packages.<span class="me0">CRC</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">P</span><span class="sy0">$</span><span class="st0">":"</span><span class="sy0">$</span>string<span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">CRC</span><span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="sy0">$</span><span class="st0">")"</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">int</span> getVersion<span class="br0">(</span><span class="kw5">int</span> i<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">version</span>; <span class="br0">}</span>
<span class="kw1">function</span> <span class="kw5">int</span> returnCRC<span class="br0">(</span><span class="kw5">int</span> b, <span class="kw5">int</span> i<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">CRC</span><span class="br0">[</span>i<span class="br0">]</span>; <span class="br0">}</span>
<span class="kw1">function</span> <span class="kw5">string</span> returnPaths<span class="br0">(</span><span class="kw5">int</span> b<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> <span class="kw6">PI</span><span class="br0">[</span>b<span class="br0">]</span>.<span class="me0">paths</span>; <span class="br0">}</span>
<span class="kw1">function</span> NBSPPoll findpoll<span class="br0">(</span><span class="kw5">int</span> i<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> poll<span class="br0">[</span>i<span class="br0">]</span>; <span class="br0">}</span>
<span class="kw1">function</span> <span class="kw5">int</span> amount<span class="br0">(</span><span class="kw5">int</span> i<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagecount</span>; <span class="br0">}</span>
<span class="kw1">function</span> killPoll<span class="br0">(</span><span class="kw5">int</span> i<span class="br0">)</span>
<span class="br0">{</span>
	poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
	poll<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> <span class="kw5">None</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> DestroyPI<span class="br0">(</span><span class="kw5">int</span> i<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> PlayerInfo p;
        <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> p;
	nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> <span class="kw5">None</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> IPOnly<span class="br0">(</span><span class="kw5">string</span> IP<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
	i <span class="sy0">=</span> <span class="kw3">InStr</span><span class="br0">(</span>IP, <span class="st0">":"</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>i <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
		<span class="kw2">return</span> <span class="kw3">Left</span><span class="br0">(</span>IP, i<span class="br0">)</span>;
	<span class="kw2">else</span>
		<span class="kw2">return</span> IP;
<span class="br0">}</span>
 
<span class="kw1">function</span> fa<span class="br0">(</span> NBSPChecker a, PlayerPawn p <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i, j, y;
	<span class="kw1">local</span> <span class="kw5">string</span> w, e, c, r;
 
	<span class="kw2">if</span> <span class="br0">(</span>p <span class="sy0">==</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="kw2">return</span>;
 
	i <span class="sy0">=</span> p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span> <span class="sy0">==</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span> <span class="sy0">=</span> p;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">ID</span> <span class="sy0">!=</span> i<span class="br0">)</span>
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">ID</span> <span class="sy0">=</span> i;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span> <span class="sy0">!=</span> p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
			reporter.<span class="me0">ReportEvent</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span><span class="sy0">@</span><span class="st0">"changed name to:"</span>,p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="br0">)</span>;
 
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span> <span class="sy0">=</span> p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span>;
	<span class="br0">}</span>	
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">ip</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">ip</span> <span class="sy0">=</span> IPonly<span class="br0">(</span>p.<span class="me0">GetPlayerNetworkAddress</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;	
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">version</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">version</span> <span class="sy0">=</span> a.<span class="me0">replyVersion</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span><span class="sy0">==</span><span class="st0">"UKN"</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">==</span> <span class="st0">"UKN"</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span> 
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>a.<span class="me0">ReplyInfo</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="br0">{</span>
			e <span class="sy0">=</span> a.<span class="me0">decode</span><span class="br0">(</span>a.<span class="me0">ReplyInfo</span><span class="br0">)</span>;
			c <span class="sy0">=</span> fb<span class="br0">(</span>e<span class="br0">)</span>;
			r <span class="sy0">=</span> fb<span class="br0">(</span>e<span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span><span class="sy0">==</span><span class="st0">"UKN"</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>c<span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">instr</span><span class="br0">(</span><span class="kw3">caps</span><span class="br0">(</span>c<span class="br0">)</span>,<span class="st0">"MACVIEWPORT"</span><span class="br0">)</span><span class="sy0">&gt;-</span><span class="nu0">1</span><span class="br0">)</span>
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span> <span class="sy0">=</span> <span class="st0">"MAC"</span>;
			<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span><span class="kw3">instr</span><span class="br0">(</span><span class="kw3">caps</span><span class="br0">(</span>c<span class="br0">)</span>,<span class="st0">"WINDOWSVIEWPORT"</span><span class="br0">)</span><span class="sy0">&gt;-</span><span class="nu0">1</span><span class="br0">)</span>
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span> <span class="sy0">=</span> <span class="st0">"PC"</span>;
			<span class="kw2">else</span>
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span> <span class="sy0">=</span> <span class="st0">"LINUX"</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span>
			<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw1">Class</span> <span class="sy0">=</span> <span class="st0">"UKN"</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">==</span> <span class="st0">"UKN"</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>r<span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">switch</span><span class="br0">(</span>r<span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">case</span> <span class="st0">"Class'D3DDrv.D3DRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"D3D"</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="st0">"Class'SoftDrv.SoftwareRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"SFT"</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="st0">"Class'GlideDrv.GlideRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"GLI"</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="st0">"Class'MetalDrv.MetalRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"MET"</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="st0">"Class'OpenGLDrv.OpenGLRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"OGL"</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="st0">"Class'SglDrv.SglRenderDevice'"</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"SGL"</span>;
				<span class="kw2">break</span>;
				<span class="kw1">default</span>:
				y <span class="sy0">=</span> <span class="kw3">Instr</span><span class="br0">(</span>r, <span class="st0">"'"</span><span class="br0">)</span>;
				w <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>r,<span class="br0">(</span>y<span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>,<span class="kw3">Len</span><span class="br0">(</span>r<span class="br0">)</span> <span class="sy0">-</span> y<span class="br0">)</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> rts<span class="br0">(</span><span class="kw3">Caps</span><span class="br0">(</span><span class="kw3">Left</span><span class="br0">(</span>w,<span class="kw3">Instr</span><span class="br0">(</span>w,<span class="st0">"."</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<span class="st0">"DRV"</span>,<span class="st0">""</span><span class="br0">)</span>;
				<span class="kw2">break</span>;
			<span class="br0">}</span>
		<span class="br0">}</span>
		<span class="kw2">else</span>
			<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">RenderDevice</span> <span class="sy0">=</span> <span class="st0">"UKN"</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">identd</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span>a.<span class="me0">replyName</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">//Create Identd</span>
		e <span class="sy0">=</span> a.<span class="me0">decode</span><span class="br0">(</span>a.<span class="me0">replyName</span><span class="br0">)</span>;
		<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">identd</span> <span class="sy0">=</span> e;		
		<span class="kw2">if</span> <span class="br0">(</span>LogIdentd<span class="br0">)</span>
		<span class="br0">{</span>
			reporter.<span class="me0">ReportEvent</span><span class="br0">(</span><span class="st0">"Computer Name of "</span><span class="sy0">$</span>p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="sy0">$</span><span class="st0">":"</span>,<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">identd</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>		
<span class="br0">}</span>
 
<span class="co1">//------------------------------------------</span>
<span class="co1">//GameInfo functions</span>
<span class="co1">//------------------------------------------  </span>
<span class="kw1">function</span> <span class="kw5">bool</span> xx<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
<span class="kw1">local</span> DeathMatchPlus dmp;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'DeathMatchPlus'</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		dmp <span class="sy0">=</span> DeathMatchPlus<span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span><span class="br0">)</span>; 
		<span class="kw2">if</span> <span class="br0">(</span>dmp.<span class="me0">bGameEnded</span> <span class="sy0">||</span> <span class="br0">(</span>dmp.<span class="me0">bRequireReady</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>dmp.<span class="me0">CountDown</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
			<span class="kw2">return</span> <span class="kw6">false</span>;
	<span class="br0">}</span>
	<span class="kw2">return</span> <span class="kw6">true</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> ModifyLogin<span class="br0">(</span><span class="kw1">out</span> class<span class="sy0">&lt;</span>playerpawn<span class="sy0">&gt;</span> SpawnClass, <span class="kw1">out</span> <span class="kw5">string</span> pt, <span class="kw1">out</span> <span class="kw5">string</span> o<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> class<span class="sy0">&lt;</span>TournamentPlayer<span class="sy0">&gt;</span> p;
	<span class="kw1">local</span> <span class="kw5">string</span> s, f, k;
	<span class="kw1">local</span> <span class="kw5">texture</span> t;
	<span class="kw1">local</span> <span class="kw5">int</span> x;
 
	<span class="kw6">Super</span>.<span class="me0">ModifyLogin</span><span class="br0">(</span>SpawnClass, pt, o<span class="br0">)</span>;
 
	p <span class="sy0">=</span> class<span class="sy0">&lt;</span>TournamentPlayer<span class="sy0">&gt;</span><span class="br0">(</span>SpawnClass<span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>p <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">// now, check for invalid skin names ...</span>
		s <span class="sy0">=</span> <span class="kw3">Caps</span><span class="br0">(</span>xxG<span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">ParseOption</span><span class="br0">(</span>o, <span class="st0">"Skin"</span> <span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
		f <span class="sy0">=</span> <span class="kw3">Caps</span><span class="br0">(</span>xxG<span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">ParseOption</span><span class="br0">(</span>o, <span class="st0">"Face"</span> <span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
		k <span class="sy0">=</span> <span class="kw3">Caps</span><span class="br0">(</span>xxG<span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">ParseOption</span><span class="br0">(</span>o, <span class="st0">"Voice"</span> <span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
 
		<span class="co1">// Add voice to actor database</span>
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>packages.<span class="me0">actorExists</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
			packages.<span class="me0">ACTS</span><span class="br0">[</span>packages.<span class="me0">ACTSa</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw3">caps</span><span class="br0">(</span>k<span class="br0">)</span>;
			packages.<span class="me0">ACTSa</span><span class="sy0">++</span>;
		<span class="br0">}</span>
 
 		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>xxV<span class="br0">(</span>s<span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span>f <span class="sy0">!=</span> <span class="st0">""</span> <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span>xxV<span class="br0">(</span>f<span class="br0">)</span> <span class="br0">)</span><span class="br0">)</span>		
		<span class="br0">{</span>
			o <span class="sy0">=</span> xxF<span class="br0">(</span>o, <span class="st0">"Skin"</span>, p.<span class="kw1">default</span>.<span class="me0">DefaultSkinName</span><span class="br0">)</span>;
			o <span class="sy0">=</span> xxF<span class="br0">(</span>o, <span class="st0">"Face"</span>, <span class="st0">""</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
  	<span class="kw2">if</span> <span class="br0">(</span> NextMutator <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
    		NextMutator.<span class="me0">ModifyLogin</span><span class="br0">(</span>SpawnClass, pt, o<span class="br0">)</span>;	
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> xxF<span class="br0">(</span><span class="kw5">string</span> o, <span class="kw5">string</span> i, <span class="kw5">string</span> v<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">string</span> n, p, xk, xv;
 
	n <span class="sy0">=</span> <span class="st0">""</span>;
	<span class="kw2">while</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">GrabOption</span><span class="br0">(</span>o, p<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">GetKeyValue</span><span class="br0">(</span>p, xk, xv<span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>xk ~<span class="sy0">=</span> i<span class="br0">)</span>
			n <span class="sy0">=</span> n <span class="sy0">$</span> <span class="st0">"?"</span> <span class="sy0">$</span> xk <span class="sy0">$</span> <span class="st0">"="</span> <span class="sy0">$</span> v;
		<span class="kw2">else</span>
			n <span class="sy0">=</span> n <span class="sy0">$</span> <span class="st0">"?"</span> <span class="sy0">$</span> p;
	<span class="br0">}</span>
	<span class="kw2">return</span> n;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> xxG<span class="br0">(</span><span class="kw5">string</span> zc<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">string</span> z;
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	z <span class="sy0">=</span> <span class="kw3">Caps</span><span class="br0">(</span>zc<span class="br0">)</span>;
	i <span class="sy0">=</span> <span class="kw3">instr</span><span class="br0">(</span>z,<span class="st0">"."</span><span class="br0">)</span>;
	<span class="kw2">return</span> <span class="kw3">left</span><span class="br0">(</span>z,i<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">bool</span> xxV<span class="br0">(</span><span class="kw5">string</span> n<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	i<span class="sy0">=</span><span class="kw3">instr</span><span class="br0">(</span>packs, <span class="kw3">Chr</span><span class="br0">(</span><span class="nu0">34</span><span class="br0">)</span><span class="sy0">$</span>n<span class="sy0">$</span>Chr<span class="br0">(</span><span class="nu0">34</span><span class="br0">)</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>i <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span> <span class="sy0">||</span> n ~<span class="sy0">=</span> <span class="st0">"BOTPACK"</span><span class="br0">)</span>
		<span class="kw2">return</span> <span class="kw6">false</span>;
 
	<span class="kw2">return</span> <span class="kw6">true</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> NextTeam<span class="br0">(</span>PlayerPawn p<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> n;
	<span class="kw1">local</span> TeamGamePlus t;
	<span class="kw1">local</span> <span class="kw5">float</span> z;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">bTeamGame</span> <span class="sy0">&amp;&amp;</span> <span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'TeamGamePlus'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">TimeSeconds</span> <span class="sy0">-</span> zTCT<span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		t <span class="sy0">=</span> TeamGamePlus<span class="br0">(</span><span class="kw7">Level</span>.<span class="kw7">Game</span><span class="br0">)</span>;
		z <span class="sy0">=</span> p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">Team</span>;
		n <span class="sy0">=</span> z <span class="sy0">+</span> <span class="nu0">1</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span>n <span class="sy0">&gt;=</span> t.<span class="me0">MaxTeams</span><span class="br0">)</span>
			n <span class="sy0">=</span> <span class="nu0">0</span>;
 
		p.<span class="me0">ChangeTeam</span><span class="br0">(</span>n<span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>p.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">Team</span> <span class="sy0">!=</span> z<span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">// View from self if changing team is valid </span>
			<span class="kw2">if</span> <span class="br0">(</span>p.<span class="me0">ViewTarget</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
			<span class="br0">{</span>
				p.<span class="me0">bBehindView</span> <span class="sy0">=</span> <span class="kw6">false</span>;
				p.<span class="me0">ViewTarget</span> <span class="sy0">=</span> <span class="kw5">None</span>;
			<span class="br0">}</span>
			zTCT <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="me0">TimeSeconds</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">bool</span> HandlePickupQuery<span class="br0">(</span><span class="kw9">Pawn</span> o, <span class="kw9">Inventory</span> inv, <span class="kw1">out</span> <span class="kw5">byte</span> b<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">bool</span> v;
	<span class="kw1">local</span> <span class="kw5">int</span> i;
	<span class="kw1">local</span> <span class="kw9">Inventory</span> belt, pads, <span class="kw9">armor</span>;
 
	v <span class="sy0">=</span> <span class="kw6">false</span>;
	<span class="kw2">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="nu0">4</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>o.<span class="me0">Touching</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">==</span> inv<span class="br0">)</span>
			v<span class="sy0">=</span><span class="kw6">true</span>;
	<span class="br0">}</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>v<span class="br0">)</span>
		<span class="kw2">return</span> <span class="kw6">false</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>inv.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'UT_ShieldBelt'</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		inv.<span class="kw1">Default</span>.<span class="me0">Charge</span><span class="sy0">=</span><span class="nu0">150</span>;
	<span class="br0">}</span>
	<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>inv.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Armor2'</span><span class="br0">)</span> <span class="sy0">||</span> inv.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'ThighPads'</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		belt <span class="sy0">=</span> o.<span class="me0">FindInventoryType</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'UT_ShieldBelt'</span><span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>belt <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="br0">{</span>
			belt.<span class="kw1">Default</span>.<span class="me0">Charge</span> <span class="sy0">=</span> <span class="nu0">150</span>;
			pads <span class="sy0">=</span> o.<span class="me0">FindInventoryType</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'ThighPads'</span><span class="br0">)</span>;
			<span class="kw9">armor</span> <span class="sy0">=</span> o.<span class="me0">FindInventoryType</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'Armor2'</span><span class="br0">)</span>;
 
			<span class="co1">// Only care if Belt+Pads are present</span>
			<span class="kw2">if</span> <span class="br0">(</span>inv.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Armor2'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> pads <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				belt.<span class="kw1">Default</span>.<span class="me0">Charge</span> <span class="sy0">=</span> <span class="nu0">150</span> <span class="sy0">-</span> pads.<span class="me0">charge</span>;
			<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>inv.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'ThighPads'</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="kw9">armor</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				belt.<span class="kw1">Default</span>.<span class="me0">Charge</span> <span class="sy0">=</span> <span class="nu0">150</span> <span class="sy0">-</span> <span class="kw9">armor</span>.<span class="me0">charge</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>	
	<span class="kw2">return</span> <span class="kw6">super</span>.<span class="me0">HandlePickupQuery</span><span class="br0">(</span>o, inv, b<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> DisableNBSP<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="co1">//Kill all players/references</span>
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="nu0">256</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">//Destroy References</span>
			<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				nbsp<span class="br0">[</span>i<span class="br0">]</span>.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
			<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				killPoll<span class="br0">(</span>i<span class="br0">)</span>;
 
			DestroyPI<span class="br0">(</span>i<span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span>ny <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		ny.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> EnableNBSP<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="co1">// Spwan Notify</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>settings.<span class="me0">DisplayLevel</span> <span class="sy0">==</span> <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> settings.<span class="me0">Enabled</span><span class="br0">)</span>
			ny <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="kw4">Spawn</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'NBSPNotify'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">bool</span> IsPaused <span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  	<span class="kw2">return</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">Pauser</span> <span class="sy0">!=</span> <span class="st0">""</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">//------------------------------------------</span>
<span class="co1">//Mutate Shit</span>
<span class="co1">//------------------------------------------  </span>
<span class="kw1">function</span> Mutate<span class="br0">(</span> <span class="kw5">string</span> a, PlayerPawn b <span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">String</span> c, d, e, f, q, l, t;
	<span class="kw1">local</span> <span class="kw5">bool</span> g;
	<span class="kw1">local</span> NBSPChecker m;
	<span class="kw1">local</span> <span class="kw5">int</span> i, j, k, p; 
	<span class="kw1">local</span> <span class="kw9">pawn</span> PP;
 
	f <span class="sy0">=</span> a;
	i <span class="sy0">=</span> b.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span>;
	c <span class="sy0">=</span> fb<span class="br0">(</span>a<span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">Enabled</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
			m <span class="sy0">=</span> nbsp<span class="br0">[</span>i<span class="br0">]</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">dead</span><span class="br0">)</span>
				<span class="kw2">return</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw2">switch</span><span class="br0">(</span>c<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">//All commands starting with nbsp are accepted</span>
		<span class="kw2">case</span> <span class="st0">"nbsp"</span>:
 
		<span class="kw2">if</span> <span class="br0">(</span>DebugMode<span class="br0">)</span>
		<span class="br0">{</span>
			dlog<span class="br0">(</span>a<span class="br0">)</span>;
		<span class="br0">}</span>
 
		c <span class="sy0">=</span> fb<span class="br0">(</span>a<span class="br0">)</span>;
		d <span class="sy0">=</span> fb<span class="br0">(</span>a<span class="br0">)</span>;
		<span class="kw2">switch</span><span class="br0">(</span>c<span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw2">case</span> <span class="kw5">String</span><span class="br0">(</span>nbspMagik<span class="br0">)</span>:
			p <span class="sy0">=</span> <span class="kw5">int</span><span class="br0">(</span>d<span class="br0">)</span>;
			<span class="kw2">switch</span><span class="br0">(</span>p<span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">case</span> <span class="nu0">1</span>:
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">crc</span><span class="br0">[</span>m.<span class="me0">replyCRC</span><span class="br0">]</span><span class="sy0">=</span>m.<span class="me0">replyCRC2</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">2</span>:
				j <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">packagecount</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">packages</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">replyPackage</span><span class="br0">)</span>;
				j<span class="sy0">++</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">packagecount</span> <span class="sy0">=</span> j;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">3</span>:
				j <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">modcount</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">mods</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">replyMod</span><span class="br0">)</span>;
				j<span class="sy0">++</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">modcount</span> <span class="sy0">=</span> j;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">4</span>:					
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">paths</span> <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">ReplyPath</span><span class="br0">)</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">5</span>:
				CheckClasses<span class="br0">(</span>m,<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span>,i<span class="br0">)</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">6</span>:
				sortcanvas<span class="br0">(</span>m,b,i<span class="br0">)</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">7</span>:
				q <span class="sy0">=</span> fb<span class="br0">(</span>a<span class="br0">)</span>;
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>poll<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">IsValid3</span><span class="br0">)</span>
				<span class="br0">{</span>
					j <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagecount</span>;
					l <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">replyUPKG2</span><span class="br0">)</span>;
					<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> m.<span class="me0">replyUPKG</span>;
					<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> l;
					<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT2</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> fb<span class="br0">(</span>l<span class="br0">)</span>;
					<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackage</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> <span class="kw5">int</span><span class="br0">(</span>q<span class="br0">)</span>;
					j<span class="sy0">++</span>;
					<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagecount</span> <span class="sy0">=</span> j;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span><span class="kw5">int</span><span class="br0">(</span>q<span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> settings.<span class="me0">RestrictPackages</span><span class="br0">)</span>
					<span class="br0">{</span>
						t <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">replyUPKG2</span><span class="br0">)</span>;
						RunningPackageCheck<span class="br0">(</span>i,m.<span class="me0">replyUPKG</span>,t<span class="br0">)</span>;
					<span class="br0">}</span>
				<span class="br0">}</span>
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">8</span>:
				CheckActors<span class="br0">(</span>m,<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">PP</span>,i,m.<span class="me0">replyActors</span><span class="br0">)</span>;
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">9</span>:
				q <span class="sy0">=</span> fb<span class="br0">(</span>a<span class="br0">)</span>;
				j <span class="sy0">=</span> <span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagecount</span>;
				l <span class="sy0">=</span> m.<span class="me0">decode</span><span class="br0">(</span>m.<span class="me0">replyUPKG4</span><span class="br0">)</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackages</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> m.<span class="me0">replyUPKG3</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> l;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT2</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> fb<span class="br0">(</span>l<span class="br0">)</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackage</span><span class="br0">[</span>j<span class="br0">]</span> <span class="sy0">=</span> <span class="kw5">int</span><span class="br0">(</span>q<span class="br0">)</span>;
				j<span class="sy0">++</span>;
				<span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagecount</span> <span class="sy0">=</span> j;
				<span class="kw2">if</span> <span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">upackagesT2</span><span class="br0">[</span>j<span class="sy0">-</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> worker.<span class="me0">version</span><span class="br0">)</span>
					CheckPackage<span class="br0">(</span>i,j<span class="sy0">-</span><span class="nu0">1</span>,<span class="nu0">0</span><span class="br0">)</span>;
				<span class="kw2">else</span>
					CheckPackage<span class="br0">(</span>i,j<span class="sy0">-</span><span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">)</span>;
 
				<span class="kw2">break</span>;
				<span class="kw2">case</span> <span class="nu0">10</span>:
				<span class="kw2">break</span>;
				<span class="kw1">default</span>:
				<span class="co1">//Validates Client Console.</span>
				<span class="kw2">if</span> <span class="br0">(</span>d <span class="sy0">==</span> m.<span class="me0">ld</span><span class="br0">)</span>
					m.<span class="me0">CV</span> <span class="sy0">=</span> <span class="kw6">true</span>;
				<span class="kw2">break</span>;
			<span class="br0">}</span>
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"set"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
				settings.<span class="me0">set</span><span class="br0">(</span>b,d,a<span class="br0">)</span>;
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"enable"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>settings.<span class="me0">Enabled</span><span class="br0">)</span>
				<span class="br0">{</span>
					settings.<span class="me0">Enabled</span> <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP is now enabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"       **NBSP HAS BEEN ENABLED**       "</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
					EnableNBSP<span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				settings.<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"disable"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>settings.<span class="me0">Enabled</span><span class="br0">)</span>
				<span class="br0">{</span>
					settings.<span class="me0">Enabled</span>  <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP is now disabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">""</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"      **NBSP HAS BEEN DISABLED**      "</span><span class="br0">)</span>;
					nlog<span class="br0">(</span><span class="st0">"__________________________________________"</span><span class="br0">)</span>;
					DisableNBSP<span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				settings.<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"showidentds"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - Listing Player Identds:"</span><span class="br0">)</span>;
				<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="nu0">256</span>; i<span class="sy0">++</span><span class="br0">)</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">len</span><span class="br0">(</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">)</span>
					<span class="br0">{</span>
						b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"["</span><span class="sy0">$</span>PI<span class="br0">[</span>i<span class="br0">]</span>.<span class="kw5">Name</span><span class="sy0">$</span><span class="st0">"]:"</span><span class="sy0">@</span><span class="kw6">PI</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">identd</span><span class="br0">)</span>;
					<span class="br0">}</span>
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"showips"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - Listing Player IPs:"</span><span class="br0">)</span>;
				<span class="kw2">foreach</span> <span class="kw7">Level</span>.<span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Pawn'</span>,PP<span class="br0">)</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span>PP.<span class="me0">bIsPlayer</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span> <span class="sy0">!=</span> <span class="st0">""</span><span class="br0">)</span><span class="br0">)</span>
						b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"["</span><span class="sy0">$</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="sy0">$</span><span class="st0">"]:"</span><span class="sy0">@</span>IPonly<span class="br0">(</span>playerpawn<span class="br0">(</span>PP<span class="br0">)</span>.<span class="me0">GetPlayerNetworkAddress</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"showids"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - Listing Player IDs:"</span><span class="br0">)</span>;
				<span class="kw2">foreach</span> <span class="kw7">Level</span>.<span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Pawn'</span>,PP<span class="br0">)</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span>PP.<span class="me0">bIsPlayer</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span> <span class="sy0">!=</span> <span class="st0">""</span><span class="br0">)</span><span class="br0">)</span>
						b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"["</span><span class="sy0">$</span>string<span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span><span class="br0">)</span><span class="sy0">$</span><span class="st0">"]:"</span><span class="sy0">@</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"kickid"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">foreach</span> <span class="kw7">Level</span>.<span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Pawn'</span>,PP<span class="br0">)</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span>PP.<span class="me0">bIsPlayer</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span> <span class="sy0">!=</span> <span class="st0">""</span><span class="br0">)</span><span class="br0">)</span>
					<span class="br0">{</span>
						<span class="kw2">if</span> <span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerID</span> <span class="sy0">==</span> <span class="kw5">int</span><span class="br0">(</span>d<span class="br0">)</span><span class="br0">)</span>
							b.<span class="me0">Kick</span><span class="br0">(</span>PP.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span><span class="br0">)</span>;
					<span class="br0">}</span>
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"usenbsplog"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>UseNBSPLog<span class="br0">)</span>
				<span class="br0">{</span>
					<span class="kw2">if</span> <span class="br0">(</span>logger <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
					<span class="br0">{</span>
						logger.<span class="me0">StopLog</span><span class="br0">(</span><span class="br0">)</span>;
						logger.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
						logger <span class="sy0">=</span> <span class="kw5">None</span>;	
					<span class="br0">}</span>
					UseNBSPLog <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Use of the NBSP Log is now disabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					logger <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'NBSPLog'</span><span class="br0">)</span>;
 
					<span class="co1">// Start external log</span>
					<span class="kw2">if</span> <span class="br0">(</span>logger<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
					<span class="br0">{</span>
						logger.<span class="me0">nbsp</span> <span class="sy0">=</span> <span class="kw6">self</span>;
						logger.<span class="me0">StartLog</span><span class="br0">(</span><span class="br0">)</span>;
					<span class="br0">}</span>
					UseNBSPLog <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Use of the NBSP Log is now enabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"logsettings"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>LogSettings<span class="br0">)</span>
				<span class="br0">{</span>
					LogSettings <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Logging of NBSP settings is now disabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					LogSettings <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Logging of NBSP settings is now enabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"logtoexternal"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>LogToExternal<span class="br0">)</span>
				<span class="br0">{</span>
					LogToExternal <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Logging of NBSP to external devices is now disabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					LogToExternal <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Logging of NBSP to external devices is now enabled."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"utpuremode"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>UTPureMode<span class="br0">)</span>
				<span class="br0">{</span>
					UTPureMode <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - UTPureMode is now off."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					UTPureMode <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - UTPureMode is now on."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
			<span class="kw2">case</span> <span class="st0">"logidentd"</span>:
			<span class="kw2">if</span> <span class="br0">(</span>b.<span class="me0">bAdmin</span><span class="br0">)</span>
			<span class="br0">{</span>
				<span class="kw2">if</span> <span class="br0">(</span>LogIdentd<span class="br0">)</span>
				<span class="br0">{</span>
					LogIdentd <span class="sy0">=</span> <span class="kw6">False</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - Identd logging is now off."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
				<span class="kw2">else</span>
				<span class="br0">{</span>
					LogIdentd <span class="sy0">=</span> <span class="kw6">True</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"NBSP - Identd logging is now on."</span><span class="br0">)</span>;
					b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Changes will take effect on map change/restart."</span><span class="br0">)</span>;
					<span class="kw3">SaveConfig</span><span class="br0">(</span><span class="br0">)</span>;
				<span class="br0">}</span>
			<span class="br0">}</span>
			<span class="kw2">else</span>
				b.<span class="kw4">ClientMessage</span><span class="br0">(</span><span class="st0">"Command Invalid. /Admin: False"</span><span class="br0">)</span>;
			<span class="kw2">break</span>;
		<span class="br0">}</span>
		<span class="kw2">break</span>;
		<span class="kw2">case</span> <span class="st0">"nextteam"</span>:
		NextTeam<span class="br0">(</span>b<span class="br0">)</span>;
		<span class="kw2">break</span>;
		<span class="kw2">case</span> <span class="st0">"nbspteam"</span>:
		NextTeam<span class="br0">(</span>b<span class="br0">)</span>;
		<span class="kw2">break</span>;
		<span class="kw2">case</span> <span class="st0">"changeteam"</span>:
		NextTeam<span class="br0">(</span>b<span class="br0">)</span>;
		<span class="kw2">break</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span> NextMutator <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
		NextMutator.<span class="me0">Mutate</span><span class="br0">(</span>f, b<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">event</span> <span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
	<span class="kw1">local</span> <span class="kw5">string</span> g;
 
	<span class="co1">//Kill all players/references</span>
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>; i<span class="sy0">&lt;</span><span class="nu0">256</span>; i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">//Destroy References</span>
			<span class="kw2">if</span> <span class="br0">(</span>nbsp<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				nbsp<span class="br0">[</span>i<span class="br0">]</span>.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
			<span class="kw2">if</span> <span class="br0">(</span>poll<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
				killPoll<span class="br0">(</span>i<span class="br0">)</span>;
 
			DestroyPI<span class="br0">(</span>i<span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>	
 
	<span class="kw2">if</span> <span class="br0">(</span>packages <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		packages.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;		
 
	<span class="kw2">if</span> <span class="br0">(</span>worker <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		worker.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>settings <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		settings.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>ny <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		ny.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>fix <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		fix.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>reporter <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		reporter.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>logger<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		logger.<span class="me0">StopLog</span><span class="br0">(</span><span class="br0">)</span>;
		logger.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
		logger <span class="sy0">=</span> <span class="kw5">None</span>;
	<span class="br0">}</span>
	<span class="kw6">Super</span>.<span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">//------------------------------------------</span>
<span class="co1">//Encoding and String Functions</span>
<span class="co1">//------------------------------------------ </span>
<span class="kw1">function</span> <span class="kw5">string</span> rts<span class="br0">(</span><span class="kw1">coerce</span> <span class="kw5">string</span> t, <span class="kw1">coerce</span> <span class="kw5">string</span> r, <span class="kw1">coerce</span> <span class="kw5">string</span> w<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
    <span class="kw1">local</span> <span class="kw5">string</span> e;
 
    i <span class="sy0">=</span> <span class="kw3">InStr</span><span class="br0">(</span>t, r<span class="br0">)</span>;
    <span class="kw2">while</span> <span class="br0">(</span>i <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">{</span>   
        e <span class="sy0">=</span> e <span class="sy0">$</span> <span class="kw3">Left</span><span class="br0">(</span>t, i<span class="br0">)</span> <span class="sy0">$</span> w;
        t <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>t, i <span class="sy0">+</span> <span class="kw3">Len</span><span class="br0">(</span>r<span class="br0">)</span><span class="br0">)</span>; 
        i <span class="sy0">=</span> <span class="kw3">InStr</span><span class="br0">(</span>t, r<span class="br0">)</span>;
    <span class="br0">}</span>
    e <span class="sy0">=</span> e <span class="sy0">$</span> t;
    <span class="kw2">return</span> e;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">int</span> Hash<span class="br0">(</span><span class="kw5">String</span> a<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> b,c;
 
	<span class="co1">//Take magic number and append (get's hashed through line)</span>
	<span class="co1">//Only done if a dynamic server-to-client hash is required</span>
	a <span class="sy0">=</span> <span class="kw5">String</span><span class="br0">(</span>nbspMagik<span class="br0">)</span> <span class="sy0">$</span> a;
 
	<span class="kw2">for</span> <span class="br0">(</span>c<span class="sy0">=</span><span class="nu0">0</span>; c<span class="sy0">&lt;</span><span class="kw3">len</span><span class="br0">(</span>a<span class="br0">)</span>; c<span class="sy0">++</span><span class="br0">)</span>
		b <span class="sy0">=</span> <span class="nu0">37</span><span class="sy0">*</span>b <span class="sy0">+</span> <span class="kw3">Asc</span><span class="br0">(</span> <span class="kw3">mid</span><span class="br0">(</span> a, c, <span class="nu0">1</span> <span class="br0">)</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>b<span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> 
		<span class="kw2">return</span> <span class="nu0">1</span>;
 
	<span class="kw2">return</span> b;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> fb<span class="br0">(</span><span class="kw1">out</span> <span class="kw5">string</span> a<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> b;
	<span class="kw1">local</span> <span class="kw5">string</span> c;
 
	b <span class="sy0">=</span> <span class="nu0">0</span>;
	<span class="kw2">while</span><span class="br0">(</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b,<span class="nu0">1</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">" "</span> <span class="br0">)</span> 
	b<span class="sy0">++</span>;
	<span class="kw2">if</span> <span class="br0">(</span>b <span class="sy0">&gt;=</span> <span class="kw3">Len</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		a <span class="sy0">=</span> <span class="st0">""</span>;
		<span class="kw2">return</span> <span class="st0">""</span>;
	<span class="br0">}</span>
	a <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	b <span class="sy0">=</span> <span class="kw3">Instr</span><span class="br0">(</span>a,<span class="st0">" "</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>b <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
	<span class="br0">{</span>
		c <span class="sy0">=</span> a;
		a <span class="sy0">=</span> <span class="st0">""</span>;
		<span class="kw2">return</span> c;
	<span class="br0">}</span>
	c <span class="sy0">=</span> <span class="kw3">Left</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	a <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	<span class="kw2">return</span> c;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">string</span> fc<span class="br0">(</span><span class="kw1">out</span> <span class="kw5">string</span> a<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> b;
	<span class="kw1">local</span> <span class="kw5">string</span> c;
 
	b <span class="sy0">=</span> <span class="nu0">0</span>;
	<span class="kw2">while</span><span class="br0">(</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b,<span class="nu0">1</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">","</span> <span class="br0">)</span> 
	b<span class="sy0">++</span>;
	<span class="kw2">if</span> <span class="br0">(</span>b <span class="sy0">&gt;=</span> <span class="kw3">Len</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		a <span class="sy0">=</span> <span class="st0">""</span>;
		<span class="kw2">return</span> <span class="st0">""</span>;
	<span class="br0">}</span>
	a <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	b <span class="sy0">=</span> <span class="kw3">Instr</span><span class="br0">(</span>a,<span class="st0">","</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>b <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
	<span class="br0">{</span>
		c <span class="sy0">=</span> a;
		a <span class="sy0">=</span> <span class="st0">""</span>;
		<span class="kw2">return</span> c;
	<span class="br0">}</span>
	c <span class="sy0">=</span> <span class="kw3">Left</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	a <span class="sy0">=</span> <span class="kw3">Mid</span><span class="br0">(</span>a,b<span class="br0">)</span>;
	<span class="kw2">return</span> c;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
	bHidden<span class="sy0">=</span><span class="kw6">true</span>
	version<span class="sy0">=</span><span class="st0">"1.09"</span>
        H<span class="sy0">=</span><span class="st0">"UnrealShare.StingerFire"</span>
	AllowedClientVersions<span class="sy0">=</span><span class="st0">"451,436"</span>
	UseNBSPLog<span class="sy0">=</span><span class="kw6">False</span>
	LogDirectory<span class="sy0">=</span><span class="st0">"../Logs/"</span>
	LogSettings<span class="sy0">=</span><span class="kw6">True</span>
	LogIdentd<span class="sy0">=</span><span class="kw6">True</span>
	LogToExternal<span class="sy0">=</span><span class="kw6">False</span>
	UTPureMode<span class="sy0">=</span><span class="kw6">False</span>
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Footer">Footer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)?section=11" title="Edit section: Footer">edit</a><span class="mw-editsection-bracket">]</span></span></h2>

<!-- 
NewPP limit report
CPU time usage: 0.349 seconds
Real time usage: 0.351 seconds
Preprocessor visited node count: 78/1000000
Preprocessor generated node count: 128/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:24109-0!*!0!!en!*!* and timestamp 20161215182453 and revision id 34429
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/UE1:NBSP_(Class)?oldid=34429">https://wiki.beyondunreal.com/UE1:NBSP_(Class)?oldid=34429</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.beyondunreal.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="Category_NBSP_Classes.html" title="Category:NBSP Classes">NBSP Classes</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-ue1" class="selected"><a href="UE1_NBSP_(Class).html">UE1</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/UE1_talk:NBSP_(Class)?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/UE1:NBSP_(Class)" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/UE1:NBSP_(Class)" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=UE1%3ANBSP+%28Class%29&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=UE1%3ANBSP+%28Class%29" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/UE1:NBSP_(Class)" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/UE1:NBSP_(Class)" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/UE1:NBSP_(Class)?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/UE1:NBSP_(Class)?oldid=34429" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/UE1:NBSP_(Class)" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 12:11, 22 May 2009.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":88});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/NBSP_(Class) by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 11:38:31 GMT -->
</html>
