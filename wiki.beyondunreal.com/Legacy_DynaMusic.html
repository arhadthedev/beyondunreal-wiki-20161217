<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:DynaMusic by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:35:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:DynaMusic - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:DynaMusic" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:DynaMusic" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_DynaMusic.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:DynaMusic","wgTitle":"DynaMusic","wgCurRevisionId":2796,"wgRevisionId":2796,"wgArticleId":1049,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Legacy Custom Class (UT)"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:DynaMusic","wgRelevantArticleId":1049,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_DynaMusic skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>My program doesn't have bugs. It just develops random features.
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:DynaMusic</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><h2><span class="mw-headline" id="DynaMusic_optional_music_for_mappers_.21">DynaMusic optional music for mappers&#160;!</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:DynaMusic?section=1" title="Edit section: DynaMusic optional music for mappersÂ !">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Usage:</p>
<ol>
<li>Follow the directions for <a href="Legacy_Embedding_Code.html" title="Legacy:Embedding Code">Embedding Code</a></li>
<li>Place dynamusic actor on your map</li>
<li>Right click on it to bring up properties</li>
<li>Select the DynaMusic/LoadSong property and type in the song "PackageName.SongName" you want to be optional</li>
<li>Right click on empty part of map to bring up the level properties</li>
<li>Change audio/song to one of the standard UT music packages ( this package won't be optional )</li>
</ol>
<hr />
<p>The way it works:</p>
<ol>
<li>When the player connects DynaMusic attempts to load music package</li>
<li>If it's successful it overides the maps default music (as defined in Level properties), with the optional music</li>
</ol>
<hr />
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//=============================================================================</span>
<span class="co1">// DynaMusic.       By Dirk Fist  with all do credit to the people of the Wiki </span>
<span class="co1">//=============================================================================</span>
<span class="kw1">class</span> DynaMusic <span class="kw1">expands</span> <span class="kw9">Actor</span>;
 
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">string</span> LoadSong;
<span class="kw1">var</span> music song;
<span class="kw1">var</span> PlayerPawn MusicPlayer;
<span class="kw1">var</span> <span class="kw5">bool</span> bMusicStarted;
<span class="kw1">var</span> <span class="kw5">int</span> started;
 
<span class="kw1">replication</span>
<span class="br0">{</span>   <span class="co1">// Variables which will cause replication to all (relevant) clients</span>
    <span class="kw1">reliable</span> <span class="kw2">if</span> <span class="br0">(</span> <span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span> <span class="br0">)</span>
        started,LoadSong;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>           <span class="co1">// executed on server</span>
<span class="br0">{</span>
    started <span class="sy0">+=</span><span class="nu0">1</span>;                  <span class="co1">// force replication</span>
    <span class="kw6">Super</span>.<span class="kw4">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">auto</span> <span class="kw1">simulated</span> <span class="kw1">state</span> startup
<span class="br0">{</span>
<span class="kw2">Begin</span>:
    <span class="kw3">log</span><span class="br0">(</span><span class="st0">"Started"</span>,<span class="st0">'Dynamusic'</span><span class="br0">)</span>;
    song <span class="sy0">=</span> music<span class="br0">(</span><span class="kw3">DynamicLoadObject</span><span class="br0">(</span> LoadSong, <span class="kw1">class</span><span class="st0">'Music'</span>,<span class="kw6">True</span><span class="br0">)</span><span class="br0">)</span>;
    <span class="kw2">if</span> <span class="br0">(</span>song<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
    <span class="br0">{</span>   <span class="co1">// we got a song lets find player</span>
        <span class="kw3">log</span><span class="br0">(</span><span class="kw5">string</span><span class="br0">(</span>song.<span class="kw1">Class</span><span class="br0">)</span>,<span class="st0">'Dynamusic'</span><span class="br0">)</span>;
 
        <span class="kw2">foreach</span> <span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">class</span> <span class="st0">'PlayerPawn'</span>, MusicPlayer<span class="br0">)</span>
            <span class="kw2">if</span> <span class="br0">(</span>Viewport<span class="br0">(</span>MusicPlayer.<span class="kw8">Player</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>  <span class="kw2">break</span>; 
        <span class="kw2">if</span> <span class="br0">(</span>MusicPlayer <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
        <span class="br0">{</span>   <span class="co1">// We got player lets play </span>
            MusicPlayer.<span class="me0">ClientSetMusic</span><span class="br0">(</span> song, <span class="kw7">Level</span>.<span class="me0">SongSection</span>, <span class="kw7">Level</span>.<span class="me0">CdTrack</span>, <span class="kw7">MTRAN_Fade</span> <span class="br0">)</span>;    
            <span class="kw3">log</span><span class="br0">(</span>MusicPlayer.<span class="me0">PlayerReplicationInfo</span>.<span class="me0">PlayerName</span>,<span class="st0">'Dynamusic'</span><span class="br0">)</span>;        
    <span class="br0">}</span>   <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
    bAlwaysRelevant<span class="sy0">=</span><span class="kw6">True</span>
    <span class="kw7">RemoteRole</span><span class="sy0">=</span><span class="kw7">ROLE_SimulatedProxy</span>
<span class="br0">}</span>
</pre></div>
</div>
<hr />
<p><b>Dirk Fist:</b> My First Wiki Project&#160;:)</p>
<p><b>Dirk Fist:</b> Can I upload a .u or .unr file&#160;?</p>
<p><b>Dirk Fist:</b> Found some info on making the packages optional <a rel="nofollow" class="external free" href="http://unreal.epicgames.com/UTMagic.html#PackageFlags">http://unreal.epicgames.com/UTMagic.html#PackageFlags</a></p>
<p><b>Dirk Fist:</b> If any one knows another way I'd be glad to hear it? Since I don't want to cause version conflicts for maps that use non-optional umx(ogg?) version of the file, Since this is a mapping component and many mappers will probably borrow music from other maps.</p>
<p><b>Wormbo:</b> UT200x's OGG files aren't Unreal packages and won't be sent from the server. (They are already optional.) In UT non-optional music packages are sent by the server because the map's dependancy on the music package automatically makes it a ServerPackage. BTW: It's better to put the music loading code in PostBeginPlay() and skip the state code alltogether. Make the whole thing a non-replicated bStatic and/or bNoDelete actor and you won't need to replicate anything because the property LoadSong is already set by the mapper and the actor exists on all clients already.</p>
<p><b>Dirk Fist:</b> Thanks for the suggestions. I tried alot of stuff before getting it to work. I had alot of trouble with the actor not existing until the first replication event. Also for some reason if LoadSong is different from class default then it needs to be replicated to work with pure6E. And although the definition for DynamicLoadObject may not be latent it seems to behave that way for music file's that are very large (Check past revisions of <a href="Legacy_Dirk_Fist.html" title="Legacy:Dirk Fist">Dirk Fist</a> )</p>
<p><b>Dirk Fist:</b> Did'nt mean to sound so defensive. Could someone explain the proper use of bStatic, bNoDelete, and Non-replicated actors link it from <a href="Legacy_Chain_Of_Events_When_Spawning_Actors.html" title="Legacy:Chain Of Events When Spawning Actors">Chain of Events When Spawning Actors</a>, <a href="Legacy_Netcode_Idioms.html" title="Legacy:Netcode Idioms">Netcode Idioms</a>, and <a href="Legacy_Replication.html" title="Legacy:Replication">Replication</a>.</p>

<!-- 
NewPP limit report
CPU time usage: 0.037 seconds
Real time usage: 0.039 seconds
Preprocessor visited node count: 6/1000000
Preprocessor generated node count: 36/1000000
Postâexpand include size: 9/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:1049-0!*!0!*!*!*!* and timestamp 20161215152819 and revision id 2796
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:DynaMusic?oldid=2796">https://wiki.beyondunreal.com/Legacy:DynaMusic?oldid=2796</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.beyondunreal.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="Category_Legacy_Custom_Class_(UT).html" title="Category:Legacy Custom Class (UT)">Legacy Custom Class (UT)</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_DynaMusic.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:DynaMusic?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:DynaMusic" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:DynaMusic" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ADynaMusic&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ADynaMusic" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:DynaMusic" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:DynaMusic" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:DynaMusic?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:DynaMusic?oldid=2796" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:DynaMusic" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 06:31, 19 November 2007.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":94});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:DynaMusic by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:35:03 GMT -->
</html>
