<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Moofed by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:32:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Moofed - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Moofed" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Moofed" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_Moofed.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Moofed","wgTitle":"Moofed","wgCurRevisionId":5390,"wgRevisionId":5390,"wgArticleId":2227,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Legacy Personal Page"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Moofed","wgRelevantArticleId":2227,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Moofed skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>Always snap to grid
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Moofed</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Moofed"><span class="tocnumber">1</span> <span class="toctext">Moofed</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Carjack"><span class="tocnumber">1.1</span> <span class="toctext">Carjack</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Civilians"><span class="tocnumber">1.1.1</span> <span class="toctext">Civilians</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Discussion"><span class="tocnumber">2</span> <span class="toctext">Discussion</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Moofed">Moofed</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Moofed?section=1" title="Edit section: Moofed">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>I'm a newer member of the Unreal modding community. I've been a long time fan of the Unreal games (I had an Unreal hat at one time, but it has long since been lost), but only recently have had the time and skills to look at any unrealscript.</p>
<h3><span class="mw-headline" id="Carjack">Carjack</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Moofed?section=2" title="Edit section: Carjack">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Released!</b> The results of the Carjack project, including a download of the mod, are available from <a rel="nofollow" class="external free" href="http://spock.informatics.indiana.edu/~carjack">http://spock.informatics.indiana.edu/~carjack</a></p>
<p>The performance in general is not that great because of the large amount of physics calculations and AI driver code from about 40 vehicles. Not recommended for Internet play. It would have been unplayable FPS-wise had we used an over-the-shoulder camera due to rendering an entire city's worth of static meshes. The top-down viewpoint avoided that problem nicely. But, it is fun with a couple friends on a LAN. Enjoy!</p>
<hr />
<p>Carjack is a mod I am working on to complete the capstone project for my Informatics degree from Indiana University. It is an attempt to clone the multiplayer gameplay from Grand Theft Auto 2, while making use of the modern amenities found in UnrealEngine2. My reason for this project is GTA2 has always been a blast to play at LAN parties, but it has certain limitations (such as using DirectPlay 6.1 for its netcode and being limited to 6 players) that make having fun playing it more difficult.</p>
<p>A video showcasing the progress of the project as of mid-Feburary 2006 is available:</p>
<p><a rel="nofollow" class="external free" href="https://www.slashtmp.iu.edu/public/download.php?FILE=dlpierce/94788r7kgDF">https://www.slashtmp.iu.edu/public/download.php?FILE=dlpierce/94788r7kgDF</a></p>
<p>Yes, I do know that <a href="Legacy_Mod_Ideas/CarJack.html" title="Legacy:Mod Ideas/CarJack">Mod_Ideas/CarJack</a> has the same name, but I didn't see that page until we had already started work. Plus "Carjack" is only a working title for now, it may change.</p>
<h4><span class="mw-headline" id="Civilians">Civilians</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Moofed?section=3" title="Edit section: Civilians">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Part of what makes GTA2 so neat is there are hordes of civilians wondering the streets that pose no threat to the player. I anticipate this feature to be one of the more difficult in developing the mod, and is why I am writing about it here. What I want to make happen is</p>
<ul>
<li>Have civilian vehicles driving on city streets
<ul>
<li>These drivers should stop when something is in front of them, and when they come to a (red) traffic light.</li>
<li>They must drive on the streets, but will become spooked by gunshots and then drive erratically/aggressively or get out of the vehicle and run for their lives (effectively becoming a spooked pedestrian, see below).</li>
<li>A predetermined number of civilian vehicles will exist in the game at any one time. When one is destroyed, another is spawned at a random VehicleFactory location. Ideally, this will not be visible to the players. I am imagining a garage with doors that open up and the new civilian drives out. Only spawned civilians would be allowed out, no one allowed in.</li>
</ul>
</li>
<li>Have civilian pedestrians wandering the sidewalks.
<ul>
<li>Pedestrians stay on the sidewalks unless spooked, at which point they run away from the player.</li>
<li>There is a chance the pedestrian will not be a total pushover and will whip out a pistol and start shooting back.</li>
<li>Killed pedestrians have a chance of dropping an item (weapon, health, whatever).</li>
</ul>
</li>
</ul>
<p>To do all this I think I will need three seperate bot paths, two for vehicles (one for each side of the road) and one for pedestrians, plus some extra pathnodes only available to bots (if I got that far) and spooked NPCs. Spooked NPCs would also have the vehicle pathnodes at their disposal. Functioning stop lights are also necessary to make a believable traffic simulation, but obviously add much more complexity to the problem.</p>
<p><b>Update:</b> After much experimentation, I have decided that the NavigationPoint system is not suitable for what I want to do. The autoconnecting behavior ruins any attempt to make seperate paths from nodes in close proximity (such as the two lanes of a road).</p>
<p>Instead I have made a custom network of Actor nodes that each have an array of nodes that the vehicle can go to next (randomly selected). This has the advantage of allowing the mapper to precisely define the map's traffic behavior, and the disadvantages of not being automated like NavigationPoints are, and not having any lines displayed in UnrealEd. I can display the network inside the game using HUD.Draw3DLine, but UnrealEd has no HUDs as far as I can tell (or any way to change anything actually). I am thinking of making using a similar node network for civilian pedestrians, leaving the NavigationPoint network free to be dedicated to bots.</p>
<p>At first I was using MoveToward to make my vehicles move, but this again was insufficient. MoveToward dis not control the steering acurately enough to stay on the correct side of the road, instead the drivers would drunkenly drift over the centerline or onto the sidewalks. MoveToward also has no interface to control the vehicle's throttle, giving the all civilians a severe case of lead foot. This is my current driver controller:</p>
<div class="hidden-block">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="hint"><span class="sy0">&lt;/</span>span<span class="sy0">&gt;&lt;</span>div <span class="kw1">class</span><span class="sy0">=</span><span class="st0">"hidden"</span><span class="sy0">&gt;</span><span class="kw1">class</span> CarjackDriver <span class="kw1">extends</span> CarjackNPC;
 
<span class="kw1">var</span> <span class="kw5">int</span> NumRandomJumps;
<span class="kw1">var</span> <span class="kw9">Actor</span> RandDest;
<span class="kw1">var</span> <span class="kw9">Actor</span> TempPoint;
<span class="kw1">var</span> CarjackRoadNode DestRoadNode;
<span class="kw1">var</span> <span class="kw5">float</span> DriverThrottle, DriverSteering; <span class="co1">//Sets respective vehicle variables via Tick in the vehicle's code</span>
 
<span class="kw1">function</span> CarjackRoadNode FindRandomRoadNode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> array<span class="sy0">&lt;</span>CarjackRoadNode<span class="sy0">&gt;</span> NodeList;
	<span class="kw1">local</span> CarjackRoadNode Node;
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="kw2">foreach</span> <span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'CarjackRoadNode'</span>, Node<span class="br0">)</span>
	<span class="br0">{</span>
		NodeList<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> Node;
		i<span class="sy0">++</span>;
	<span class="br0">}</span>
	<span class="kw2">return</span> NodeList<span class="br0">[</span><span class="kw3">Rand</span><span class="br0">(</span>NodeList.<span class="me0">Length</span><span class="br0">)</span><span class="br0">]</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> CarjackRoadNode FindNearestRoadNode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> CarjackRoadNode Node, ClosestNode;
	<span class="kw1">local</span> <span class="kw5">float</span> Dist, ClosestDist;
 
	ClosestDist <span class="sy0">=</span> <span class="nu0">100000.0</span>;
 
	<span class="kw2">foreach</span> <span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'CarjackRoadNode'</span>, Node<span class="br0">)</span>
	<span class="br0">{</span>
		Dist <span class="sy0">=</span> <span class="kw3">VSize</span><span class="br0">(</span>Node.<span class="kw7">Location</span> <span class="sy0">-</span> <span class="kw9">Pawn</span>.<span class="kw7">Location</span><span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>Dist <span class="sy0">&lt;</span> ClosestDist<span class="br0">)</span>
		<span class="br0">{</span>
			ClosestNode <span class="sy0">=</span> Node;
			ClosestDist <span class="sy0">=</span> Dist;
		<span class="br0">}</span>
	<span class="br0">}</span>
	<span class="kw2">return</span> ClosestNode;
<span class="br0">}</span>
 
<span class="kw1">function</span> CarjackRoadNode FindNextRoadNode<span class="br0">(</span>CarjackRoadNode CurrentNode<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">return</span> CurrentNode.<span class="me0">GetNextNode</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">//Check for Pawns in the way.</span>
<span class="kw1">function</span> <span class="kw5">bool</span> CheckObstruction<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">vector</span> HitLocation, HitNormal, ExtentSize;
 
	ExtentSize.<span class="me0">X</span> <span class="sy0">=</span> CarjackVehicle<span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>.<span class="me0">VehicleWidth</span>;
	ExtentSize.<span class="me0">Y</span> <span class="sy0">=</span> CarjackVehicle<span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>.<span class="me0">VehicleWidth</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">(</span><span class="kw4">Trace</span><span class="br0">(</span>HitLocation, HitNormal, <span class="br0">(</span><span class="kw5">vector</span><span class="br0">(</span><span class="kw9">Pawn</span>.<span class="kw7">Rotation</span><span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">250</span><span class="br0">)</span> <span class="sy0">+</span> <span class="kw9">Pawn</span>.<span class="kw7">Location</span>, <span class="kw9">Pawn</span>.<span class="kw7">Location</span>, <span class="kw6">true</span>, ExtentSize<span class="br0">)</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">return</span> <span class="kw6">true</span>;
	<span class="br0">}</span>
	<span class="kw2">return</span> <span class="kw6">false</span>;
<span class="br0">}</span>
 
<span class="kw1">auto</span> <span class="kw1">state</span> Driving
<span class="br0">{</span>
	<span class="kw1">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw1">local</span> <span class="kw9">Vehicle</span> V;
 
		V <span class="sy0">=</span> <span class="kw9">Vehicle</span><span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">VSize</span><span class="br0">(</span>V.<span class="kw7">Velocity</span><span class="br0">)</span> <span class="sy0">&gt;</span> DestRoadNode.<span class="me0">SpeedLimit</span><span class="br0">)</span>
		<span class="br0">{</span>
			DriverThrottle <span class="sy0">=</span> <span class="nu0">0.25</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			DriverThrottle <span class="sy0">=</span> <span class="nu0">0.90</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	<span class="kw1">function</span> SetSteering<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw1">local</span> <span class="kw5">float</span> RadiansDelta, RightOrLeft, ForwardOrBackward;
		<span class="kw1">local</span> <span class="kw9">Vehicle</span> V;
 
		V <span class="sy0">=</span> <span class="kw9">Vehicle</span><span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>;
 
		RadiansDelta <span class="sy0">=</span> <span class="kw3">Acos</span><span class="br0">(</span><span class="kw3">Normal</span><span class="br0">(</span><span class="kw5">vector</span><span class="br0">(</span>V.<span class="kw7">Rotation</span><span class="br0">)</span><span class="br0">)</span> dot <span class="kw3">Normal</span><span class="br0">(</span>DestRoadNode.<span class="kw7">Location</span> <span class="sy0">-</span> V.<span class="kw7">Location</span><span class="br0">)</span><span class="br0">)</span>;
		RightOrLeft <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span><span class="kw5">vector</span><span class="br0">(</span>V.<span class="kw7">Rotation</span><span class="br0">)</span><span class="br0">)</span> cross <span class="kw3">vect</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> dot <span class="kw3">Normal</span><span class="br0">(</span>DestRoadNode.<span class="kw7">Location</span> <span class="sy0">-</span> V.<span class="kw7">Location</span><span class="br0">)</span>;
		ForwardOrBackward <span class="sy0">=</span> <span class="kw5">vector</span><span class="br0">(</span>V.<span class="kw7">Rotation</span><span class="br0">)</span> dot <span class="kw3">Normal</span><span class="br0">(</span>DestRoadNode.<span class="kw7">Location</span> <span class="sy0">-</span> V.<span class="kw7">Location</span><span class="br0">)</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span>RightOrLeft <span class="sy0">&lt;</span> <span class="nu0">0.0</span><span class="br0">)</span> <span class="co1">// Turn Left</span>
		<span class="br0">{</span>
			DriverSteering <span class="sy0">=</span> <span class="kw3">FClamp</span><span class="br0">(</span>RadiansDelta, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span> <span class="sy0">*</span> <span class="sy0">-</span><span class="nu0">1</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>RightOrLeft <span class="sy0">&gt;</span> <span class="nu0">0.0</span><span class="br0">)</span> <span class="co1">// Turn Right</span>
		<span class="br0">{</span>
			DriverSteering <span class="sy0">=</span> <span class="kw3">FClamp</span><span class="br0">(</span>RadiansDelta, <span class="nu0">0.0</span>, <span class="nu0">1.0</span><span class="br0">)</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			DriverSteering <span class="sy0">=</span> <span class="nu0">0.0</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
<span class="kw2">Begin</span>:
	<span class="kw2">if</span> <span class="br0">(</span>DestRoadNode <span class="sy0">==</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		DestRoadNode <span class="sy0">=</span> FindNearestRoadNode<span class="br0">(</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span>CheckObstruction<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">GoToState</span><span class="br0">(</span><span class="st0">'Obstructed'</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">VSize</span><span class="br0">(</span>DestRoadNode.<span class="kw7">Location</span> <span class="sy0">-</span> <span class="kw9">Pawn</span>.<span class="kw7">Location</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">200</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>DestRoadNode.<span class="me0">bStopTraffic</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Stopped'</span><span class="br0">)</span>;
		<span class="br0">}</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			DestRoadNode <span class="sy0">=</span> FindNextRoadNode<span class="br0">(</span>DestRoadNode<span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
 
	SetThrottle<span class="br0">(</span><span class="br0">)</span>;
	SetSteering<span class="br0">(</span><span class="br0">)</span>;
 
	<span class="kw4">Sleep</span><span class="br0">(</span><span class="nu0">0.2</span><span class="br0">)</span>;
	Goto<span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">state</span> Stopped
<span class="br0">{</span>
	<span class="kw1">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		DriverThrottle <span class="sy0">=</span> <span class="nu0">0</span>;
	<span class="br0">}</span>
 
<span class="kw2">Begin</span>:
	SetThrottle<span class="br0">(</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>DestRoadNode.<span class="me0">bStopTraffic</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Driving'</span><span class="br0">)</span>;
	<span class="br0">}</span>
	<span class="kw4">Sleep</span><span class="br0">(</span><span class="nu0">0.5</span><span class="br0">)</span>;
	Goto<span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">state</span> Obstructed
<span class="br0">{</span>
	<span class="kw1">function</span> SetThrottle<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		DriverThrottle <span class="sy0">=</span> <span class="nu0">0</span>;
	<span class="br0">}</span>
 
<span class="kw2">Begin</span>:
	SetThrottle<span class="br0">(</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>CheckObstruction<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Driving'</span><span class="br0">)</span>;
	<span class="br0">}</span>
	<span class="kw4">Sleep</span><span class="br0">(</span><span class="nu0">0.5</span><span class="br0">)</span>;
	Goto<span class="br0">(</span><span class="st0">'Begin'</span><span class="br0">)</span>;
<span class="br0">}</span></span>
</pre></div>
</div>
</div>
<p>Thoughts please.</p>
<h2><span class="mw-headline" id="Discussion">Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Moofed?section=4" title="Edit section: Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Wormbo:</b> Hi and welcome to the Wiki.&#160;:)</p>
<p><b>Jimboh:</b> Hmm...civilians are surprisingly easy. All you have to do is create a pawn...then create an AIController without the monster states - add the model, and PRESTO! Instant Civilian! Of course then you'd have to create some botpaths for your civvies. I remember in Tanus' Syndicate 2003 MOD he had a tutorial on NPC's...the site is down, so if anyone has the tutorial saved, it would be most helpful...</p>
<p><b>Sweavo:</b> Hi there, I posted that <a href="Legacy_Mod_Ideas/Civilians.html" title="Legacy:Mod Ideas/Civilians">Mod Ideas/Civilians</a> page. I'm interested in following progress and assisting in this mod. I'm thinking off-map factories too. See DM-Autoroute2 for a map that would really benefit from civilians. I anticipate the <b>hardest</b> part of this is realistic AI, combining the "milling about" behaviour with the "spooked" to make the civilians look like they have a back-story, . Once that bit's done, the <b>most work</b> would likely be coming up with meshes and textures for the pawns and vehicles. I have no clue when it comes to modelling. Maybe the unwheel project has spare vehicles that can be adapted.</p>
<p><b>SuperApe:</b> Hi, Moofed. (Welcome&#160;:)) What Jimboh is saying is true. It can be easy, but I agree with Sweavo too, in that you'd probably want a different kind of AI. And I think different models, animations and skins are a good idea too. (animations without weapon-holding for example) I suggest, because most of what makes up a Bot and xPawn are geared for combat, borrow what you can from them (perhaps use them for testing purposes too) and then begin to implement your own custom stuff. You and Sweavo should take a look at the <a href="Legacy_Maya_PLE_Character_Model_Tutorial.html" title="Legacy:Maya PLE Character Model Tutorial">Maya PLE Character Model Tutorial</a>, it should not be too hard to implement a custom civilian model and animation. And, check out <a href="Legacy_NPC_Support.html" title="Legacy:NPC Support">NPC Support</a> for ideas. Can't wait to see what you guys come up with. It sounds neat.&#160;:)</p>
<p><b>Moofed:</b> Thanks for the warm welcome everyone!&#160;:cheesy: I should mention that there are two other people working on the mod, one who is concentrating on building a cityscape map, the other is a modeler and is making a first set of real world vehicles to play with, not to mention some staticmeshes for the map. I'm already using some of the skidmark code from UnWheel (with permission of course), so I might see about including some of their vehicles as well. They've been a great help for resolving scaling issues already. I'll try to get a basic pedestrian working tonight.</p>
<p><b>Tarquin:</b> Hi, welcome. Interesting project!</p>
<p><b>Moofed:</b> I thought this would be a simple task, but the FindRandomDest() function insists upon returning nothing but None. If I extend from MonsterController the function works, but as already stated. we want to extend from Controller. Help?</p>
<p><b>SuperApe:</b> Sorry, FindRandomDest() is an EMPTY function. It's actually used in a few places, but it's completely useless in stock Controller classes. It must have been defined for subclass use. But, no big deal. Finding a <i>random</i> destination isn't much harder than picking a NavigationPoint that isn't <tt>taken</tt>.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> <span class="kw9">NavigationPoint</span> FindRandomDest<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
     <span class="kw1">local</span> <span class="kw9">NavigationPoint</span> N;
     <span class="kw1">local</span> array<span class="sy0">&lt;</span>NavigationPoint<span class="sy0">&gt;</span> NP;
     <span class="kw1">local</span> <span class="kw5">int</span> i;
 
     NP.<span class="me0">Insert</span><span class="br0">(</span>i,<span class="nu0">1</span><span class="br0">)</span>;
     <span class="kw2">forEach</span> <span class="kw2">AllActors</span><span class="br0">(</span> <span class="kw1">class</span><span class="st0">'NavigationPoint'</span>, N <span class="br0">)</span>
          <span class="kw2">if</span> <span class="br0">(</span> <span class="sy0">!</span>N.<span class="me0">taken</span> <span class="br0">)</span>
          <span class="br0">{</span>
               NP<span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> N;
               i<span class="sy0">++</span>;
               NP.<span class="me0">Insert</span><span class="br0">(</span>i,<span class="nu0">1</span><span class="br0">)</span>;
          <span class="br0">}</span>
     <span class="kw2">return</span> NP<span class="br0">[</span> <span class="kw3">FRand</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span> i <span class="br0">]</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>Re-define as necessary.&#160;:) <b>Moofed:</b> Thanks! I saw</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">native</span><span class="br0">(</span><span class="nu0">525</span><span class="br0">)</span> <span class="kw1">final</span> <span class="kw1">function</span> <span class="kw9">NavigationPoint</span> FindRandomDest<span class="br0">(</span><span class="br0">)</span>;
</pre></div>
</div>
<p>so I thought it couldn't be overridden and the source would not be available. Maybe it is overridden in yet more native code...</p>
<p><b>SuperApe:</b> Well, whether there is some code to it now or not, I suppose you might as well try to override it for your custom purposes in the Pedestrian/Civilian controller. If you can't override it, perhaps you can use this code anyway in a similar function.</p>
<p><b>Draconx:</b> This is what I use in my mod for original UT... assuming it still works (Why wouldn't it...) it is much more efficient than the above foreach AllActors method.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw2">for</span> <span class="br0">(</span>N <span class="sy0">=</span> <span class="kw7">Level</span>.<span class="me0">NavigationPointList</span>; N <span class="sy0">!=</span> <span class="kw5">None</span>; N <span class="sy0">=</span> N.<span class="me0">NextNavigationPoint</span><span class="br0">)</span>
</pre></div>
</div>
<p><b>SuperApe:</b> That's great!&#160;:) I can use that too. Thanks.</p>

<!-- 
NewPP limit report
CPU time usage: 0.084 seconds
Real time usage: 0.086 seconds
Preprocessor visited node count: 35/1000000
Preprocessor generated node count: 112/1000000
Post‐expand include size: 6/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:2227-0!*!0!!en!*!* and timestamp 20161216065145 and revision id 5390
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Moofed?oldid=5390">https://wiki.beyondunreal.com/Legacy:Moofed?oldid=5390</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.beyondunreal.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="Category_Legacy_Personal_Page.html" title="Category:Legacy Personal Page">Legacy Personal Page</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_Moofed.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Moofed?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Moofed" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Moofed" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AMoofed&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AMoofed" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Moofed" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Moofed" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Moofed?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Moofed?oldid=5390" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Moofed" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 11:28, 28 September 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":177});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Moofed by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:32:59 GMT -->
</html>
