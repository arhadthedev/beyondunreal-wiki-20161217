<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:41:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Genetic Programming/Genes - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Genetic_Programming/Genes" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Genetic_Programming/Genes" />
<link rel="shortcut icon" href="../w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="../w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Genes.html" />
<link rel="copyright" href="../Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="../w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="../w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Genetic_Programming/Genes","wgTitle":"Genetic Programming/Genes","wgCurRevisionId":3462,"wgRevisionId":3462,"wgArticleId":1364,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Genetic_Programming/Genes","wgRelevantArticleId":1364,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Genetic_Programming_Genes skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>I love the smell of UnrealEd crashing in the morning. &#8211;Â tarquin
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Genetic Programming/Genes</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../Legacy_Genetic_Programming.html" title="Legacy:Genetic Programming">Legacy:Genetic Programming</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><a href="../Legacy_ZedSquared/Developer_Journal.html" title="Legacy:ZedSquared/Developer Journal">This page</a> introduced the core class and ideas behind breeding a routine using <a rel="nofollow" class="external text" href="http://www.genetic-programming.com/">Genetic Programming.</a></p>
<p>Having sorted out the core stuff we need to think about the bigger picture:</p>
<p>The 'outer loop' of GP goes like this:</p>
<ol>
<li>Pick a candidate from a population of random programmes</li>
<li>Test the candidate, keep track of how well it does</li>
<li>Repeat untill all candidates have had enough trials to get a measure of their fitness for the task in hand</li>
<li>Breed a new population by:
<ol>
<li>Finding the best performing members of the current 'generation'</li>
<li>Perform 'genetic operations' on these elite performers to generate members of the next generation by combining or changing their code in some way.</li>
<li>Repeat untill you have a new population to test.</li>
</ol>
</li>
<li>Start all over again at 1), repeat until you deem performance good enough.</li>
</ol>
<p>Now the classical way to do this involves running one large population on one machine and this is what I'll start off with. But this can have some disadvantages as the population can become under diversified as an early partial solution to the problem rises to the top and monopolises all the gene pool.</p>
<p>One way around this is to adopt the so called 'island' model and maintain many populations, each randomised at the start, and to allow those to breed for a while and then periodically allow exchange of members with the others thus ensuring some diversity. These populations can be run on different machines communicating over a network, or as many processes on one machine.</p>
<p>Anyway that's getting a bit ahead of myself... I need some way of storing and manipulating these things so it's time for a fresh class: The GPmaster:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//---------------------------------------------------------</span>
<span class="co1">// class that handles breeding, fitness selection etc of GP</span>
<span class="co1">// trees</span>
<span class="co1">//-----------------------------------------------------------</span>
 
<span class="kw1">class</span> GPMaster <span class="kw1">extends</span> <span class="kw9">Info</span> <span class="kw1">config</span><span class="br0">(</span>Genes<span class="br0">)</span>;
</pre></div>
</div>
<p>A good start&#160;:) as the only way of storing persistant data in uscript is via ini files we make this use genes.ini as a gene pool database (see <a href="../Legacy_Config_Vars_And_.html" title="Legacy:Config Vars And .Ini Files">Config_Vars_And_.Ini_Files</a> ).</p>
<p>Uscript never was meant to be used as a heavy duty database so if the breeding programme takes off and requires the tracking of thousands of individuals then I'll have to look at using <a href="../Legacy_TcpLink.html" title="Legacy:TcpLink">TcpLink</a> to talk to an external decent DBMS like MySQL or something. But at this stage in development ini files will do.</p>
<p>To keep track of a member of the population we need to store the code that it uses and its performance in the trials, this sounds like just the job for a struct:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">struct</span> gene
  <span class="br0">{</span>
    <span class="kw1">var</span> <span class="kw5">string</span> code;
    <span class="kw1">var</span> fitnessstats fitness;
    <span class="kw1">var</span> <span class="kw5">int</span> PoolIdx;
    <span class="kw1">var</span> <span class="kw5">int</span> trials;  <span class="co1">// number of times this has been tested in this run</span>
    <span class="kw1">var</span> <span class="kw5">int</span> rank;
  <span class="br0">}</span>;
</pre></div>
</div>
<p>At this point I realised that the GP framework I'm putting together could get used for many different tasks, not just breeding something that's good at steering lightcycles. Different tasks will have different ways of measuring success, not just number of frags... perhaps number of hits/bullets fired, or time spent staying alive, or prisoners rescued... whatever, the point is that we don't know what info will be returned by the other game code (the stuff that's actually running the trials ) so we make this gpmaster class somewhat abstract and fill in nitty gritty details in a subclass.</p>
<p>My first thought was along the lines of:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">struct</span> fitnessstats    <span class="co1">// redefined in subclasses  for different tasks</span>
 
  <span class="br0">{</span>
 
  <span class="br0">}</span>;
 
<span class="kw1">function</span> initfitstats<span class="br0">(</span> fitnessstats f<span class="br0">)</span>
<span class="br0">{</span>
 <span class="co1">// called to initialise stats on new gene</span>
 <span class="co1">// define in subclass</span>
<span class="br0">}</span>
 
 
 
<span class="kw1">function</span> addfitstats<span class="br0">(</span> fitnessStats <span class="kw1">new</span>, fitnessstats old <span class="br0">)</span>
<span class="br0">{</span>
  <span class="co1">// merges fitness stats from gene returning from trial</span>
  <span class="co1">// with those in pool</span>
  <span class="co1">// define in subclass</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> gene best<span class="br0">(</span> gene g1, gene g2 <span class="br0">)</span>
<span class="br0">{</span>
<span class="co1">// evaluate and return fittest of the two genes</span>
<span class="co1">// submitted.</span>
<span class="co1">// Used to sort genes to find the best performers</span>
<span class="co1">// define in subclass</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>And all seemed fine, I coded up a subclass, put some actual variables in the struct and all compiled fine.. then I wrote initfitstats to suit and blarrrt! compiler error about redefining initfitstats, probably because even though the number of arguments to that function seemingly haven't changed (there's still just one struct passed) there are now more variables in that struct, hence the confusion&#160;:) No panic, I'll just have to define an object to hold fitness variables and subclass that instead I guess. Actually this is a bit neater as that class can also hold the functions needed to initialise itself and so on, but is messier as storing these variables is a problem... hmmm some more thought needed there, quick workround for now, though is to define all the stuff I need to get *my* task done up here in the superclass and worry about being versatile later&#160;:) So we have the variable definition block in full:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">struct</span> fitnessstats    <span class="co1">// need to replace this with an object so it can be redifined in subclasses</span>
                       <span class="co1">// for different tasks</span>
  <span class="br0">{</span>
   <span class="kw1">var</span>   <span class="kw5">int</span> gameswonVbots;
   <span class="kw1">var</span>   <span class="kw5">int</span> gameslostVbots;
   <span class="kw1">var</span>   <span class="kw5">int</span> GameswonVhumans;
   <span class="kw1">var</span>   <span class="kw5">int</span> GameslostVhumans;
   <span class="kw1">var</span> <span class="kw5">float</span> timespentplaying;
  <span class="br0">}</span>;
 
 
<span class="kw1">struct</span> gene
  <span class="br0">{</span>
    <span class="kw1">var</span> <span class="kw5">string</span> code;
    <span class="kw1">var</span> fitnessstats fitness;
    <span class="kw1">var</span> <span class="kw5">int</span> PoolIdx;
    <span class="kw1">var</span> <span class="kw5">int</span> trials;  <span class="co1">// number of times this has been tested in this run</span>
    <span class="kw1">var</span> <span class="kw5">int</span> rank;
  <span class="br0">}</span>;
 
<span class="kw1">var</span> <span class="kw1">config</span> gene pool<span class="br0">[</span><span class="nu0">200</span><span class="br0">]</span>;
<span class="kw1">var</span> <span class="kw1">config</span> <span class="kw5">int</span> totaltrials,PoolPtr;
<span class="kw1">var</span> <span class="kw5">int</span> maxdepth;
</pre></div>
</div>
<p>So you can see we have an array of genes, size 200 for our population (number 200 pulled out of the air... may grow later), and a couple of persistant variables to keep track of how many trials have been made and which was the last gene plucked fro the pool for testing.</p>
<p>Right, now for some proper meat:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> PullGene<span class="br0">(</span><span class="kw1">out</span> gpinfo result<span class="br0">)</span>
<span class="br0">{</span>
<span class="co1">// grab a gene from the pool</span>
 
 <span class="kw1">local</span> gpnode root1;
 <span class="kw1">Local</span> <span class="kw5">int</span> idx;
 <span class="kw3">log</span><span class="br0">(</span><span class="st0">" *GPM* pullgene called with gpi = "</span><span class="sy0">$</span>result<span class="br0">)</span>;
 <span class="co1">// alternate between next gene from pool and random gene</span>
 <span class="kw2">if</span><span class="br0">(</span>toggler <span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span> idx <span class="sy0">=</span> <span class="kw3">rand</span><span class="br0">(</span><span class="nu0">600</span><span class="br0">)</span>;
 <span class="kw2">else</span>
   <span class="br0">{</span>
     idx <span class="sy0">=</span> poolptr;
     poolptr <span class="sy0">++</span>;
     <span class="kw2">if</span> <span class="br0">(</span>poolptr <span class="sy0">==</span><span class="nu0">601</span><span class="br0">)</span> poolptr<span class="sy0">=</span><span class="nu0">0</span>;
   <span class="br0">}</span>
 toggler <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">-</span>toggler;
 
 result.<span class="me0">initialise</span><span class="br0">(</span><span class="br0">)</span>;
 <span class="kw2">if</span><span class="br0">(</span> pool<span class="br0">[</span>idx<span class="br0">]</span>.<span class="me0">code</span> <span class="sy0">==</span> <span class="st0">""</span> <span class="br0">)</span>
   <span class="br0">{</span>
     <span class="co1">// grow random tree to fill empty pool position</span>
     root1<span class="sy0">=</span><span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'gpnode'</span><span class="br0">)</span>;
     root1.<span class="me0">RandomGrow</span><span class="br0">(</span><span class="nu0">0</span>,maxdepth<span class="br0">)</span>;
     root1.<span class="me0">WriteToString</span><span class="br0">(</span>result.<span class="me0">code</span><span class="br0">)</span>;
     <span class="kw3">log</span><span class="br0">(</span><span class="st0">" GPM new code generated = "</span><span class="sy0">$</span>result.<span class="me0">code</span><span class="br0">)</span>;
     root1.<span class="me0">prune</span><span class="br0">(</span><span class="br0">)</span>;
     pool<span class="br0">[</span>idx<span class="br0">]</span>.<span class="me0">PoolIdx</span> <span class="sy0">=</span> idx;
     pool<span class="br0">[</span>idx<span class="br0">]</span>.<span class="me0">trials</span><span class="sy0">=</span><span class="nu0">0</span>;
     pool<span class="br0">[</span>idx<span class="br0">]</span>.<span class="me0">code</span><span class="sy0">=</span>result.<span class="me0">code</span>;
     root1.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
   <span class="br0">}</span>
 
 
 result.<span class="me0">code</span><span class="sy0">=</span>pool<span class="br0">[</span>idx<span class="br0">]</span>.<span class="me0">code</span>;
 result.<span class="me0">ID</span><span class="sy0">=</span>idx;
 <span class="kw3">saveconfig</span><span class="br0">(</span><span class="br0">)</span>;
 
<span class="br0">}</span>
 
<span class="kw1">function</span> returngene<span class="br0">(</span> GPinfo incoming <span class="br0">)</span>
<span class="br0">{</span>
 <span class="co1">// maybe some sort of hash function for indexing genes later ?</span>
 addfitstats<span class="br0">(</span>incoming<span class="br0">)</span>;
 pool<span class="br0">[</span>incoming.<span class="me0">id</span><span class="br0">]</span>.<span class="me0">trials</span> <span class="sy0">++</span>;
 pool<span class="br0">[</span>incoming.<span class="me0">id</span><span class="br0">]</span>.<span class="me0">rank</span><span class="sy0">=</span><span class="kw3">eval</span><span class="br0">(</span>pool<span class="br0">[</span>incoming.<span class="me0">id</span><span class="br0">]</span><span class="br0">)</span>;
 totaltrials<span class="sy0">++</span>;
 <span class="kw2">if</span><span class="br0">(</span>totaltrials <span class="sy0">%</span> Trials_per_generation<span class="sy0">==</span><span class="nu0">0</span><span class="br0">)</span>
     breednewpool<span class="br0">(</span><span class="br0">)</span>;
 <span class="kw3">saveconfig</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<p>Pullgene will be used by the game entity that's going to be controlled by the GP tree to request a new brain for testing, it alternately selects either a random gene or the next one in sequence, this was done so I could ensure that as, long as I run at least twice as many tests as there are candidates in the pool, each candidate is guaranteed to be tested but not only against its immediate neighbours as would happen if I were simply to go through the genes sequentially.</p>
<p>Within each gene struct is stored an index to the pool array so that when it comes back from the trial and returngene() is called then the appropriate set of fitness stats gets updated, remember there could be any number of in game bots all requesting new brains at different times during a trial so this is the best way to keep track of things IMO.</p>
<p>Now a break from the higher level logic for an actual genetic operator: the crossover operator. What this should do is take two trees, chose a node at random on each one,and swap over those nodes, along with any sub tree attached to them.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> crossover<span class="br0">(</span> gene g1, gene g2, <span class="kw1">out</span> gene g3, <span class="kw1">out</span> gene g4<span class="br0">)</span>
<span class="br0">{</span>
<span class="kw1">local</span> <span class="kw5">int</span> n1,n2;
<span class="kw1">local</span> <span class="kw5">int</span> nc1,nc2;
<span class="kw1">local</span> <span class="kw5">string</span> s1,s2;
<span class="kw1">local</span> gpnode root1,root2, node1, node2;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" crossover: building trees "</span><span class="br0">)</span>;
root1<span class="sy0">=</span><span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'gpnode'</span><span class="br0">)</span>;
root2<span class="sy0">=</span><span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'gpnode'</span><span class="br0">)</span>;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">"code string1 ="</span><span class="sy0">$</span>g1.<span class="me0">code</span><span class="br0">)</span>;
<span class="kw3">log</span><span class="br0">(</span><span class="st0">"code string2 ="</span><span class="sy0">$</span>g2.<span class="me0">code</span><span class="br0">)</span>;
root1.<span class="me0">ReadFromString</span><span class="br0">(</span>g1.<span class="me0">code</span><span class="br0">)</span>;
root2.<span class="me0">ReadFromString</span><span class="br0">(</span>g2.<span class="me0">code</span><span class="br0">)</span>;
 
<span class="co1">// count nodes in candidates</span>
root1.<span class="me0">CountNodes</span><span class="br0">(</span>nc1<span class="br0">)</span>;
root2.<span class="me0">CountNodes</span><span class="br0">(</span>nc2<span class="br0">)</span>;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" crossover: nodes counted in tree 1 = "</span><span class="sy0">$</span>nc1<span class="br0">)</span>;
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" crossover: nodes counted in tree 2 = "</span><span class="sy0">$</span>nc2<span class="br0">)</span>;
<span class="co1">// select a couple of nodes at random</span>
 
n1 <span class="sy0">=</span> <span class="kw3">rand</span><span class="br0">(</span>nc1<span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">+</span><span class="nu0">2</span>;
 
n2 <span class="sy0">=</span> <span class="kw3">rand</span><span class="br0">(</span>nc2<span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">+</span><span class="nu0">2</span>;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" Crossover point 1 = "</span><span class="sy0">$</span>n1<span class="br0">)</span>;
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" CRossover point 2 = "</span><span class="sy0">$</span>n2<span class="br0">)</span>;
 
node1 <span class="sy0">=</span> root1.<span class="me0">findnode</span><span class="br0">(</span>n1<span class="br0">)</span>;
node2 <span class="sy0">=</span> root2.<span class="me0">findnode</span><span class="br0">(</span>n2<span class="br0">)</span>;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" crossover node on tree1 = "</span><span class="sy0">$</span>node1<span class="br0">)</span>;
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" crossover node on tree2 = "</span><span class="sy0">$</span>node2<span class="br0">)</span>;
<span class="co1">//swap over subtrees</span>
 
node1.<span class="me0">parent</span>.<span class="me0">children</span><span class="br0">[</span>node1.<span class="me0">childnum</span><span class="br0">]</span><span class="sy0">=</span>node2;
node2.<span class="me0">parent</span>.<span class="me0">children</span><span class="br0">[</span>node2.<span class="me0">childnum</span><span class="br0">]</span><span class="sy0">=</span>node1;
 
<span class="co1">// write out new strings</span>
root1.<span class="me0">WriteToString</span><span class="br0">(</span>s1<span class="br0">)</span>;
root2.<span class="me0">WriteToString</span><span class="br0">(</span>s2<span class="br0">)</span>;
 
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" after crossover tree1 ="</span><span class="sy0">$</span>s1<span class="br0">)</span>;
<span class="kw3">log</span><span class="br0">(</span><span class="st0">" after crossover tree2 ="</span><span class="sy0">$</span>s2<span class="br0">)</span>;
 
<span class="co1">// kill orphans</span>
 
 
root1.<span class="me0">prune</span><span class="br0">(</span><span class="br0">)</span>; root1.<span class="kw4">destroy</span><span class="br0">(</span><span class="br0">)</span>;
root2.<span class="me0">prune</span><span class="br0">(</span><span class="br0">)</span>; root2.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
 
<span class="co1">// initialise new stats blocks.</span>
initfitstats<span class="br0">(</span>g3<span class="br0">)</span>;
initfitstats<span class="br0">(</span>g4<span class="br0">)</span>;
 
<span class="co1">// assign new code strings</span>
 
g3.<span class="me0">code</span><span class="sy0">=</span>s1;
g4.<span class="me0">code</span><span class="sy0">=</span>s2;
<span class="co1">// the end!</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>All those logs are from testing and I'm pleased to say it all worked OK... here's some annotated log snippage to illustrate:</p>
<p>ScriptLog: crossover: building trees</p>
<p>ScriptLog: code string1 =XXERQG</p>
<p>ScriptLog: code string2 =N*HNK0.020814LQ-A+&lt;A+HEA+K0.155583GE</p>
<p>ScriptLog: crossover: nodes counted in tree 1 = 7</p>
<p>ScriptLog: crossover: nodes counted in tree 2 = 21</p>
<p>ScriptLog: Crossover point 1 = 7</p>
<p>ScriptLog: CRossover point 2 = 11</p>
<p>ScriptLog: crossover node on tree1 = UTronCyclebottrainerTEST.GPTlookLeft4180</p>
<p>ScriptLog: crossover node on tree2 = UTronCyclebottrainerTEST.GPFplus5064</p>
<p>So the seventh node on tree1 is the chosen crossover point with the eleventh node on tree2. Counting along the strings (starting from 2 to allow for the root node) gives us the characters 'G' and '+' respectively and the logged node types agree... great! that means the node counting and selecting routines all work.</p>
<p>ScriptLog: after crossover tree1 =XXERQ+&lt;A+HEA+K0.155583GE</p>
<p>ScriptLog: after crossover tree2 =N*HNK0.020814LQ-AG</p>
<p>And checking those resulting strings confirms that the crossover went OK, woot!</p>
<p>Now for the next main genetic operator... mutation, but this page is getting large so hop on along to:</p>
<p><a href="Mutation.html" title="Legacy:Genetic Programming/Mutation">Genetic Programming/Mutation</a></p>
<h2><span class="mw-headline" id="your_comments_welcome">your comments welcome</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Genetic_Programming/Genes?section=1" title="Edit section: your comments welcome">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Tarquin:</b> Suggestions:</p>
<ol>
<li>move content out of <a href="../Legacy_ZedSquared/Developer_Journal.html" title="Legacy:ZedSquared/Developer Journal">ZedSquared/Developer Journal</a> to be episode I of GP.</li>
<li>change the page names, eg <a href="Mutation.html" title="Legacy:Genetic Programming/Mutation">Genetic Programming/Mutation</a> for episode 3.</li>
</ol>
<p><b>Zedsquared</b> Cheers for the suggestions Tarq, I'll be doing that sort of thing once I get to the end of my adventure, meanwhile it's somewhat of a shambling pile... bit like me really&#160;:)</p>

<!-- 
NewPP limit report
CPU time usage: 0.100 seconds
Real time usage: 0.102 seconds
Preprocessor visited node count: 57/1000000
Preprocessor generated node count: 128/1000000
Postâexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:1364-0!*!0!*!*!*!* and timestamp 20161215155416 and revision id 3462
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes?oldid=3462">https://wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes?oldid=3462</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Genes.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Genetic_Programming/Genes?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Genetic_Programming/Genes" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Genetic_Programming/Genes" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-anonuserpage"><a href="../User_188.162.37.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">188.162.37.3</a></li>
													<li id="pt-anontalk"><a href="../User_talk_188.162.37.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AGenetic+Programming%2FGenes&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AGenetic+Programming%2FGenes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="../index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="../Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Genetic_Programming/Genes" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Genetic_Programming/Genes" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes?oldid=3462" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Genetic_Programming/Genes" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 10:10, 1 August 2004.</li>
									<li id="copyright">Licensed as <a href="../Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="../Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="../Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":89});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Genetic_Programming/Genes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:41:30 GMT -->
</html>
