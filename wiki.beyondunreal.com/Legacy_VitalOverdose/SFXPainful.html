<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:42:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:VitalOverdose/SFXPainful - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful" />
<link rel="shortcut icon" href="../w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="../w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="SFXPainful.html" />
<link rel="copyright" href="../Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="../w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="../w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:VitalOverdose/SFXPainful","wgTitle":"VitalOverdose/SFXPainful","wgCurRevisionId":44661,"wgRevisionId":44661,"wgArticleId":3639,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Legacy Custom Class (UT2004)"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:VitalOverdose/SFXPainful","wgRelevantArticleId":3639,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_VitalOverdose_SFXPainful skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>I search for solutions in this order: Past Code, Unreal Source, Wiki, BUF, groups.yahoo, google, screaming at monitor. &#8211;Â RegularX
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:VitalOverdose/SFXPainful</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../Legacy_VitalOverdose.html" title="Legacy:VitalOverdose">Legacy:VitalOverdose</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="infobox infobox-class infobox-legacy"><a href="../Legacy_UT2004.html" title="Legacy:UT2004" class="mw-redirect">UT2004</a>&#160;:: <a href="../Legacy_Actor.html" title="Legacy:Actor">Actor</a> &gt;&gt; <a href="../Legacy_Emitter.html" title="Legacy:Emitter">Emitter</a> &gt;&gt;SFXpainful (Package: custom)</div>
<p>by <a href="../Legacy_VitalOverdose.html" title="Legacy:VitalOverdose">VitalOverdose</a></p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Properties"><span class="tocnumber">2</span> <span class="toctext">Properties</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Simulated_Function_PostBeginPlay.28.29"><span class="tocnumber">3</span> <span class="toctext">Simulated Function PostBeginPlay()</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Simulated_Function_Timer.28.29"><span class="tocnumber">4</span> <span class="toctext">Simulated Function Timer()</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Simulated_Function_ProcessCollision.28Pawn_CollidedWith.2C_Vector_ParticleMomentum.29"><span class="tocnumber">5</span> <span class="toctext">Simulated Function ProcessCollision(Pawn CollidedWith, Vector ParticleMomentum)</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#The_Complete_Script"><span class="tocnumber">6</span> <span class="toctext">The Complete Script</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Optimization"><span class="tocnumber">7</span> <span class="toctext">Optimization</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Related_Topcs"><span class="tocnumber">8</span> <span class="toctext">Related Topcs</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#More_custom_emitter_scripts"><span class="tocnumber">8.1</span> <span class="toctext">More custom emitter scripts</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Discussion"><span class="tocnumber">9</span> <span class="toctext">Discussion</span></a></li>
</ul>
</div>
<p></p>
<h3><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This is a custom <a href="../Legacy_Emitter.html" title="Legacy:Emitter">emitter</a> actor that can track up to 20 particles from 1 of its emitters (ActiveEmitterNumb) and cause pain to any pawn they collide with. Using an iterator in this way to scan the particles locations is fairly stressful to the CPU so I've capped the particles to 20.</p>
<h3><span class="mw-headline" id="Properties">Properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=2" title="Edit section: Properties">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Note any changes to the properties will have to be made in the default properties by the mapper. Although you could write a custom spawner that can set the properties as the emitters are spawned (you cant change MaxParticles this way as its a <b>constant</b>)</p>
<pre>
ActiveEmitterNumb        - number of the emitter that is to be tracked.   
TimerFrequency           - Scanning frequency capped to 0.1 of a second max (10x Scans a second)                              
ScanSize                 - scan radius for each particle.
TheDamageType            - damagetype to apply on contact with a pawn.
DamageToVec              - damage amount for vehicles.
DamageToPawn             - damage amount for xpawns.
DamageToMonster          - Damage Amount for monsters.
VecCollisionFx           - Collision FX for vehicles.
PawnCollisionFx          - Collision FX for xpawns.
MonsterCollisionFx       - Collision FX for monsters.
VecCollisionSound        - collision Sound For vehicles.
PawnCollisionSound       - collision Sound For xpawns.
MonsterCollisionSound    - collision Sound For monsters.
</pre>
<h3><span class="mw-headline" id="Simulated_Function_PostBeginPlay.28.29">Simulated Function PostBeginPlay()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=3" title="Edit section: Simulated Function PostBeginPlay()">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>OK here is where the capping takes place any value set outside the range of the programmer has set results in the value being set at its max for the scan size and for its min on the timerfrequency.</p>
<p>The call to destroy the actor if set wrong may seem a little harsh but its not possible to alter the maxparticle count after game-play has started as its a constant variable;</p>
<p>The timer is started at the end of this function. Set to run continuously being called every <b>timerFrequency</b> seconds. This could be called the <b>Scan Rate</b> for the tracked particles.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">Simulated</span> <span class="kw1">Function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 <span class="kw6">Super</span>.<span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 
 <span class="kw2">If</span> <span class="br0">(</span> Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">MaxParticles</span> <span class="sy0">&gt;</span> <span class="nu0">20</span><span class="br0">)</span>
     <span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>;
 
 <span class="kw2">if</span> <span class="br0">(</span>ScanSize <span class="sy0">&lt;</span> <span class="nu0">64</span> <span class="br0">)</span>
     ScanSize<span class="sy0">=</span><span class="nu0">64</span>;
 
 <span class="kw2">if</span> <span class="br0">(</span>TimerFrequency <span class="sy0">&lt;</span> <span class="nu0">0.1</span><span class="br0">)</span>
     TimerFrequency <span class="sy0">=</span> <span class="nu0">0.1</span>;
 
 <span class="kw4">SetTimer</span><span class="br0">(</span> TimerFrequency , <span class="kw6">true</span> <span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="Simulated_Function_Timer.28.29">Simulated Function Timer()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=4" title="Edit section: Simulated Function Timer()">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Every time this function is called (once every Timerfrequency Seconds) the particles from the tracked emitter have their locations scanned with an iterator for any pawns. If one is found the valid ref for the pawn is bundled together with the velocity the particle was traveling at x 500 and set to the function <b>ProcessCollision()</b></p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">Simulated</span> <span class="kw1">Function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 <span class="kw1">local</span> <span class="kw9">Pawn</span>           FoundPawn;
 <span class="kw1">Local</span> <span class="kw5">Int</span>            Counter;
 
 <span class="kw2">for</span> <span class="br0">(</span> Counter<span class="sy0">=</span><span class="nu0">0</span> ; Counter <span class="sy0">&lt;</span> Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span>.<span class="me0">Length</span> ; Counter<span class="sy0">++</span> <span class="br0">)</span>
     <span class="br0">{</span>
      <span class="kw2">foreach</span> <span class="kw2">visiblecollidingActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Pawn'</span>, FoundPawn , ScanSize , Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span><span class="br0">[</span>Counter<span class="br0">]</span>.<span class="kw7">Location</span> <span class="br0">)</span>
              <span class="br0">{</span>
               ProcessCollision <span class="br0">(</span>FoundPawn ,Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span><span class="br0">[</span>Counter<span class="br0">]</span>.<span class="kw7">Velocity</span><span class="sy0">*</span><span class="nu0">500</span><span class="br0">)</span>;
              <span class="br0">}</span>
     <span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="Simulated_Function_ProcessCollision.28Pawn_CollidedWith.2C_Vector_ParticleMomentum.29">Simulated Function ProcessCollision(Pawn CollidedWith, Vector ParticleMomentum)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=5" title="Edit section: Simulated Function ProcessCollision(Pawn CollidedWith, Vector ParticleMomentum)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Here the valid ref of the pawn the particle came in contact with is received along with a slightly increased velocity which comes in the form of a vector. Here the ProcessCollision is really just dealing out the pain ,sound and FX to the unlucky pawn who came in contact with the particle. As there's 3 different possible sets of sounds ,pain amount and fx (one of each for xpawn , monster and vec) it results in 3 lots of code. Ive used local variables to store what has to be played , spawned and ..er applied for each eventuality and then just applied it to one set of actions. This is about the only thing i could come up with to make this function slightly more efficient the just writing out 3 lots of the same code. If you know of a more efficient way of doing it please let me know. CaseSwitch may be more efficient IDK i haven't got round to using it yet.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">Simulated</span> <span class="kw1">function</span> ProcessCollision<span class="br0">(</span><span class="kw9">Pawn</span> CollidedWith, <span class="kw5">vector</span> Particlemomentum<span class="br0">)</span>
 
<span class="br0">{</span>
 
<span class="kw1">Local</span> <span class="kw5">Int</span>            ThePain;
 
<span class="kw1">local</span> <span class="kw9">Emitter</span>        SpawnedFX;
 
<span class="kw1">local</span> <span class="kw5">Sound</span>          CollisionSound;
 
<span class="kw1">local</span> Class<span class="sy0">&lt;</span>emitter<span class="sy0">&gt;</span> Collisionfx<span class="re0">class</span>&lt; SEMI &gt;
 
<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Vehicle'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageTovec <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span>     
   <span class="br0">{</span>
    ThePain <span class="sy0">=</span> DamageTovec;
    <span class="kw2">if</span> <span class="br0">(</span>VecCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
        CollisionSound<span class="sy0">=</span>VecCollisionSound;
    <span class="kw2">if</span> <span class="br0">(</span> VecCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        Collisionfxclass <span class="sy0">=</span> VecCollisionFx;
   <span class="br0">}</span>
 
<span class="kw2">else</span>
 
<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'monster'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageTomonster <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span> 
   <span class="br0">{</span>
    ThePain <span class="sy0">=</span> DamageTomonster;
    <span class="kw2">if</span> <span class="br0">(</span>MonsterCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
        CollisionSound<span class="sy0">=</span>MonsterCollisionSound;
    <span class="kw2">if</span> <span class="br0">(</span> VecCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        Collisionfxclass <span class="sy0">=</span> MonsterCollisionFx;
   <span class="br0">}</span>
 
<span class="kw2">else</span>
 <span class="kw2">if</span> <span class="br0">(</span> <span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'xPawn'</span><span class="br0">)</span> <span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageToPawn <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span>    
    <span class="br0">{</span>
     ThePain <span class="sy0">=</span> DamageToPawn;
     <span class="kw2">if</span> <span class="br0">(</span>VecCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
         CollisionSound<span class="sy0">=</span>PawnCollisionSound;
     <span class="kw2">if</span> <span class="br0">(</span> PawnCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
         Collisionfxclass <span class="sy0">=</span> PawnCollisionFx;
   <span class="br0">}</span>
 
 <span class="kw2">if</span> <span class="br0">(</span> CollisionSound <span class="sy0">!=</span> <span class="kw5">none</span> <span class="br0">)</span>   <span class="co1">// dealing out the pain,the fx,and the sound</span>
     CollidedWith.<span class="kw4">PlaySound</span><span class="br0">(</span> CollisionSound <span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span> Collisionfxclass <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
     SpawnedFX <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span>Collisionfxclass,CollidedWith,,CollidedWith.<span class="kw7">location</span>,CollidedWith.<span class="kw7">rotation</span><span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span> ThePain <span class="sy0">!=</span> <span class="nu0">0</span> <span class="br0">)</span>
     CollidedWith.<span class="kw4">TakeDamage</span><span class="br0">(</span> DamageToPawn, <span class="kw7">Instigator</span>, CollidedWith.<span class="kw7">Location</span> , Particlemomentum, TheDamageType <span class="br0">)</span>;
 
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="The_Complete_Script">The Complete Script</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=6" title="Edit section: The Complete Script">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//=============================================================================</span>
 
<span class="co1">// SFXPainful. - creates particles that hurts players</span>
 
<span class="co1">// By Vitaloverdose http://www.vitaloverdose.com</span>
 
<span class="co1">// updated oct 2007</span>
 
<span class="co1">//=============================================================================</span>
 
<span class="kw1">class</span> SFXPainful <span class="kw1">extends</span> <span class="kw9">emitter</span>
 
<span class="kw1">Placeable</span>;
 
<span class="kw1">var</span>    <span class="kw5">int</span>                    TotalParticles;      <span class="co1">// The mapper has no access to these</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span>                    ActiveEmitterNumb;   <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span>                    TimerFrequency;      <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span>                    DamageToPawn;        <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span>                    DamageToVec;         <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span>                    DamageToMonster;     <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">Var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">float</span>                  ScanSize;            <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> Class<span class="sy0">&lt;</span>DamageType<span class="sy0">&gt;</span>      TheDamageType;       <span class="co1">// The mapper has no access to this property</span>
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw1">class</span> <span class="sy0">&lt;</span>emitter<span class="sy0">&gt;</span>        MonsterCollisionFx;
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw1">class</span> <span class="sy0">&lt;</span>emitter<span class="sy0">&gt;</span>        VecCollisionFx;
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw1">class</span> <span class="sy0">&lt;</span>emitter<span class="sy0">&gt;</span>        PawnCollisionFx;
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">sound</span>                  PawnCollisionSound;
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">Sound</span>                  VecCollisionSound;
 
<span class="kw1">var</span> <span class="br0">(</span><span class="br0">)</span> <span class="kw5">Sound</span>                  MonsterCollisionSound;
 
<span class="kw1">Simulated</span> <span class="kw1">Function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
 
<span class="br0">{</span>
 <span class="kw6">Super</span>.<span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span> Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">MaxParticles</span> <span class="sy0">&gt;</span> <span class="nu0">20</span><span class="br0">)</span>
     <span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span>ScanSize <span class="sy0">&lt;</span> <span class="nu0">64</span> <span class="br0">)</span>
     ScanSize<span class="sy0">=</span><span class="nu0">64</span>;
 <span class="kw2">if</span> <span class="br0">(</span>TimerFrequency <span class="sy0">&lt;</span> <span class="nu0">0.1</span><span class="br0">)</span>
     TimerFrequency <span class="sy0">=</span> <span class="nu0">0.1</span>;
 
<span class="kw4">SetTimer</span><span class="br0">(</span> TimerFrequency , <span class="kw6">true</span> <span class="br0">)</span>;
 
<span class="br0">}</span>
 
<span class="kw1">Simulated</span> <span class="kw1">Function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
 
<span class="br0">{</span>
 <span class="kw1">local</span> <span class="kw9">Pawn</span>           FoundPawn;
 <span class="kw1">Local</span> <span class="kw5">Int</span>            Counter;
 
 <span class="kw2">for</span> <span class="br0">(</span> Counter<span class="sy0">=</span><span class="nu0">0</span> ; Counter <span class="sy0">&lt;</span> Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span>.<span class="me0">Length</span> ; Counter<span class="sy0">++</span> <span class="br0">)</span>
      <span class="kw2">foreach</span> <span class="kw2">visiblecollidingActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Pawn'</span>, FoundPawn , ScanSize , Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span><span class="br0">[</span>Counter<span class="br0">]</span>.<span class="kw7">Location</span> <span class="br0">)</span>
               ProcessCollision <span class="br0">(</span>FoundPawn ,Emitters<span class="br0">[</span>ActiveEmitterNumb<span class="br0">]</span>.<span class="me0">Particles</span><span class="br0">[</span>Counter<span class="br0">]</span>.<span class="kw7">Velocity</span><span class="sy0">*</span><span class="nu0">500</span><span class="br0">)</span>;
 
<span class="br0">}</span>
 
<span class="kw1">Simulated</span> <span class="kw1">function</span> ProcessCollision<span class="br0">(</span><span class="kw9">Pawn</span> CollidedWith, <span class="kw5">vector</span> Particlemomentum<span class="br0">)</span>
 
<span class="br0">{</span>
 
<span class="kw1">Local</span> <span class="kw5">int</span>            ThePain;
 
<span class="kw1">local</span> <span class="kw9">emitter</span>        SpawnedFX;
 
<span class="kw1">local</span> <span class="kw5">sound</span>          CollisionSound;
 
<span class="kw1">local</span> class<span class="sy0">&lt;</span>emitter<span class="sy0">&gt;</span> Collisionfx<span class="re0">class</span>&lt; SEMI &gt;
 
<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Vehicle'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageTovec    <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span>
   <span class="br0">{</span>
    ThePain <span class="sy0">=</span> DamageTovec;
    <span class="kw2">if</span> <span class="br0">(</span>VecCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
        CollisionSound<span class="sy0">=</span>VecCollisionSound;
    <span class="kw2">if</span> <span class="br0">(</span> VecCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        Collisionfxclass <span class="sy0">=</span> VecCollisionFx;
   <span class="br0">}</span>
 
<span class="kw2">else</span>
 
<span class="kw2">if</span> <span class="br0">(</span><span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'monster'</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageTomonster <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span>
   <span class="br0">{</span>
    ThePain <span class="sy0">=</span> DamageTomonster;
    <span class="kw2">if</span> <span class="br0">(</span>MonsterCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
        CollisionSound<span class="sy0">=</span>MonsterCollisionSound;
    <span class="kw2">if</span> <span class="br0">(</span> VecCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        Collisionfxclass <span class="sy0">=</span> MonsterCollisionFx;
   <span class="br0">}</span>
 
<span class="kw2">else</span>
 <span class="kw2">if</span> <span class="br0">(</span> <span class="br0">(</span>CollidedWith.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'xPawn'</span><span class="br0">)</span> <span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>DamageToPawn <span class="sy0">!=</span><span class="nu0">0</span> <span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
     ThePain <span class="sy0">=</span> DamageToPawn;
     <span class="kw2">if</span> <span class="br0">(</span>VecCollisionSound<span class="sy0">!=</span><span class="kw5">None</span><span class="br0">)</span>
         CollisionSound<span class="sy0">=</span>PawnCollisionSound;
     <span class="kw2">if</span> <span class="br0">(</span> PawnCollisionFx <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
         Collisionfxclass <span class="sy0">=</span> PawnCollisionFx;
   <span class="br0">}</span>
 
                                               <span class="co1">// dealing out the pain,the fx,and the sound</span>
 <span class="kw2">if</span> <span class="br0">(</span> CollisionSound <span class="sy0">!=</span> <span class="kw5">none</span> <span class="br0">)</span>
     CollidedWith.<span class="kw4">PlaySound</span><span class="br0">(</span> CollisionSound <span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span> Collisionfxclass <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
     SpawnedFX <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span>Collisionfxclass,CollidedWith,,CollidedWith.<span class="kw7">location</span>,CollidedWith.<span class="kw7">rotation</span><span class="br0">)</span>;
 <span class="kw2">if</span> <span class="br0">(</span> ThePain <span class="sy0">!=</span> <span class="nu0">0</span> <span class="br0">)</span>
     CollidedWith.<span class="kw4">TakeDamage</span><span class="br0">(</span> DamageToPawn, <span class="kw7">Instigator</span>, CollidedWith.<span class="kw7">Location</span> , Particlemomentum, TheDamageType <span class="br0">)</span>;
 
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
 
<span class="br0">{</span>
 
bNoDelete<span class="sy0">=</span><span class="kw6">False</span>
 
<span class="kw7">RemoteRole</span><span class="sy0">=</span><span class="kw7">ROLE_SimulatedProxy</span>
 
<span class="br0">}</span>
</pre></div>
</div>
<p>There may be some small alterations to this at a later date i have a few ideas of making it run more efficiently so more than 20 particles can be tracked. But its all going to need some fairly detailed testing before i make any serious changes to the way it works.</p>
<h2><span class="mw-headline" id="Optimization">Optimization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=7" title="Edit section: Optimization">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Its totally untested as yet as to how many partials can be tracked without out any significant drop in game play speed. If anyone does get round to testing it please let me know.</p>
<h2><span class="mw-headline" id="Related_Topcs">Related Topcs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=8" title="Edit section: Related Topcs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="../Legacy_Emitter.html" title="Legacy:Emitter">Emitter</a></li>
<li><a href="../Legacy_Particle_System.html" title="Legacy:Particle System">Particle System</a></li>
<li><a href="../Legacy_ParticleEmitter.html" title="Legacy:ParticleEmitter">ParticleEmitter</a></li>
<li><a href="../Legacy_ParticleEmitter_Cookbook.html" title="Legacy:ParticleEmitter Cookbook">ParticleEmitter Cookbook</a></li>
<li><a href="http://udn.epicgames.com/Two/EmittersReference" class="extiw" title="udn2:EmittersReference">udn2:EmittersReference</a></li>
<li><a href="http://udn.epicgames.com/Two/EmittersExamples" class="extiw" title="udn2:EmittersExamples">udn2:EmittersExamples</a></li>
</ul>
<h3><span class="mw-headline" id="More_custom_emitter_scripts">More custom emitter scripts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=9" title="Edit section: More custom emitter scripts">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul>
<li><a href="SFXVehicleTeleporting.html" title="Legacy:VitalOverdose/SFXVehicleTeleporting">SFXVehicleTeleporting</a></li>
<li><a href="SFXBoosting.html" title="Legacy:VitalOverdose/SFXBoosting">SFXBoosting</a></li>
<li><a href="SFXTriggering.html" title="Legacy:VitalOverdose/SFXTriggering">SFXTriggering</a></li>
<li><a href="SFXEjecting.html" title="Legacy:VitalOverdose/SFXEjecting">SFXEjecting</a></li>
<li><a href="SFXMonsterSpawning.html" title="Legacy:VitalOverdose/SFXMonsterSpawning">SFXMonsterSpawning</a></li>
<li><a href="SFXHealing.html" title="Legacy:VitalOverdose/SFXHealing">SFXHealing</a></li>
<li><a href="SFXSelfScaling.html" title="Legacy:VitalOverdose/SFXSelfScaling">SFXSelfScaling</a></li>
<li><a href="SFXUltraLight-2.html" title="Legacy:VitalOverdose/SFXUltraLight">SFXUltraLight</a></li>
<li><a href="InventoryFlare.html" title="Legacy:VitalOverdose/InventoryFlare">InventoryFlare</a></li>
<li><a href="ExampleFlares.html" title="Legacy:VitalOverdose/ExampleFlares">ExampleFlares</a></li>
</ul>
<h2><span class="mw-headline" id="Discussion">Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful?section=10" title="Edit section: Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>DaWrecka:</b> Have you considered making the emitter work server-side? If you could guarantee running on the server (which is required for dealing damage anyway) you can easily use Level.ControllerList. Since it's a linked list of nothing but controllers, you can vastly reduce the number of actors iterated through, since you can be sure that if Controller.Pawn&#160;!= None, then the Pawn is a) a Pawn and not something else (obviously), b) Valid, and thus c) fair game. You're also not iterating through actors you wouldn't want damaged anyway like static meshes and brushes. The load will reduce vastly and consequently allow you to either use no cap or a much higher cap.</p>
<p><b>Vitaloverdose</b> Sounds promising, ill look into it.</p>

<!-- 
NewPP limit report
CPU time usage: 0.107 seconds
Real time usage: 0.109 seconds
Preprocessor visited node count: 86/1000000
Preprocessor generated node count: 185/1000000
Postâexpand include size: 366/2097152 bytes
Template argument size: 112/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.475      1 - -total
100.00%    2.475      1 - Template:Classbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3639-0!*!0!!en!*!* and timestamp 20161215155553 and revision id 44661
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful?oldid=44661">https://wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful?oldid=44661</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.beyondunreal.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="../Category_Legacy_Custom_Class_(UT2004).html" title="Category:Legacy Custom Class (UT2004)">Legacy Custom Class (UT2004)</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="SFXPainful.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:VitalOverdose/SFXPainful?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:VitalOverdose/SFXPainful" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:VitalOverdose/SFXPainful" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-anonuserpage"><a href="../User_188.162.37.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">188.162.37.3</a></li>
													<li id="pt-anontalk"><a href="../User_talk_188.162.37.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AVitalOverdose%2FSFXPainful&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AVitalOverdose%2FSFXPainful" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="../index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="../Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:VitalOverdose/SFXPainful" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:VitalOverdose/SFXPainful" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful?oldid=44661" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:VitalOverdose/SFXPainful" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 09:03, 14 September 2011.</li>
									<li id="copyright">Licensed as <a href="../Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="../Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="../Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":117});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:VitalOverdose/SFXPainful by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:42:33 GMT -->
</html>
