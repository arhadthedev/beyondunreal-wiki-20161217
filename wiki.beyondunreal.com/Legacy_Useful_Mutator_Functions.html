<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Useful Mutator Functions - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_Useful_Mutator_Functions.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Useful_Mutator_Functions","wgTitle":"Useful Mutator Functions","wgCurRevisionId":8710,"wgRevisionId":8710,"wgArticleId":3377,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Legacy Refactor Me"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Useful_Mutator_Functions","wgRelevantArticleId":3377,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Useful_Mutator_Functions skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>Gah - a solution with more questions. &#8211;Â EntropicLqd
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Useful Mutator Functions</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Some useful <a href="Legacy_Mutator_(UT).html" title="Legacy:Mutator (UT)">Mutator (UT)</a> functions. The code on this page probably doesn't work at all in UT2003.</p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#HUD_Mutators"><span class="tocnumber">1</span> <span class="toctext">HUD Mutators</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Destructable_Mutators"><span class="tocnumber">2</span> <span class="toctext">Destructable Mutators</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Replacing_Inventory_Items"><span class="tocnumber">3</span> <span class="toctext">Replacing Inventory Items</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Giving_Weapons_To_Players"><span class="tocnumber">4</span> <span class="toctext">Giving Weapons To Players</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Related_Topics"><span class="tocnumber">5</span> <span class="toctext">Related Topics</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Discussion"><span class="tocnumber">6</span> <span class="toctext">Discussion</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="HUD_Mutators">HUD Mutators</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=1" title="Edit section: HUD Mutators">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<blockquote class="legacyquote">
<p>"How do I register a HUD mutator?"</p>
<p>"Why doesn't my HUD mutator work in online/LAN games?"</p>
</blockquote>
<p>This is a sample HUD mutator which does nothing more that registering itself and showing how to get a reference to the local <a href="Legacy_PlayerPawn.html" title="Legacy:PlayerPawn">PlayerPawn</a> and the <a href="Legacy_HUD_(UT).html" title="Legacy:HUD (UT)">HUD (UT)</a>.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> MyHUDMutator <span class="kw1">extends</span> <span class="kw9">Mutator</span>;
 
<span class="kw1">var</span> PlayerPawn MyPlayer;
<span class="kw1">var</span> <span class="kw9">HUD</span> MyHUD;
 
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span><span class="kw5">float</span> DeltaTime<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span> <span class="br0">(</span> <span class="sy0">!</span>bHUDMutator <span class="sy0">&amp;&amp;</span> <span class="kw7">Level</span>.<span class="me0">NetMode</span> <span class="sy0">!=</span> NM_DedicatedServer <span class="br0">)</span>
        RegisterHUDMutator<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">simulated</span> <span class="kw1">function</span> PostRender<span class="br0">(</span><span class="kw8">canvas</span> <span class="kw8">Canvas</span><span class="br0">)</span>
<span class="br0">{</span>
    MyPlayer <span class="sy0">=</span> <span class="kw8">Canvas</span>.<span class="me0">Viewport</span>.<span class="kw9">Actor</span>;
    <span class="kw2">if</span> <span class="br0">(</span> MyPlayer <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        MyHUD <span class="sy0">=</span> MyPlayer.<span class="me0">myHUD</span>;
 
    <span class="co1">// This is important! It allows the next HUD mutator to draw on the canvas.</span>
    <span class="kw2">if</span> <span class="br0">(</span> NextHUDMutator <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
        NextHUDMutator.<span class="me0">PostRender</span><span class="br0">(</span><span class="kw8">Canvas</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
     <span class="kw7">RemoteRole</span><span class="sy0">=</span><span class="kw7">ROLE_SimulatedProxy</span>
     bAlwaysRelevant<span class="sy0">=</span><span class="kw6">True</span>
     bNetTemporary<span class="sy0">=</span><span class="kw6">True</span>  <span class="co1">// Set to false if you need to replicate data to the clients more than once per level</span>
<span class="br0">}</span>
</pre></div>
</div>
<p><b>Note:</b> Don't use the code of the Team Beacon HUD mutator or the Relics. Team Beacon is far to complicated for this simple task and the RelicHUDMutator (apart from being incompatible to regular HUD mutators) calls its Destroy function without properly unregistering itself. (see Destructable Mutators below)</p>
<p><b>Note:</b> If you want to execute code once client-side, but wish to do it after values have been replicated from the server to the client then used the <i>PostNetBeginPlay()</i> function.</p>
<p>Also see <a href="Legacy_Netcode_Idioms.html" title="Legacy:Netcode Idioms">Netcode Idioms</a>.</p>
<h2><span class="mw-headline" id="Destructable_Mutators">Destructable Mutators</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=2" title="Edit section: Destructable Mutators">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Never destroy a <a href="Legacy_Mutator_(UT).html" title="Legacy:Mutator (UT)">Mutator (UT)</a> while it still is in any of the mutator chains. This would effectively disconnect all mutators further down in the list. If you really need to destroy a mutator make sure it was unregistered before destroying it.</p>
<p>The other possible solution is that the mutator unregisters itself:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// correctly unregister this mutator from all linked mutator chains</span>
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw9">Mutator</span> M;
	<span class="kw1">local</span> <span class="kw9">HUD</span> H;
 
	<span class="kw2">if</span> <span class="br0">(</span> <span class="kw7">Level</span>.<span class="kw7">Game</span> <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span> <span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span> <span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">BaseMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			<span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">BaseMutator</span> <span class="sy0">=</span> NextMutator;
		<span class="kw2">if</span> <span class="br0">(</span> <span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">DamageMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			<span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">DamageMutator</span> <span class="sy0">=</span> NextDamageMutator;
		<span class="kw2">if</span> <span class="br0">(</span> <span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">MessageMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			<span class="kw7">Level</span>.<span class="kw7">Game</span>.<span class="me0">MessageMutator</span> <span class="sy0">=</span> NextMessageMutator;
	<span class="br0">}</span>
	<span class="kw2">ForEach</span> <span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Engine.HUD'</span>, H<span class="br0">)</span>
		<span class="kw2">if</span> <span class="br0">(</span> H.<span class="me0">HUDMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			H.<span class="me0">HUDMutator</span> <span class="sy0">=</span> NextHUDMutator;
	<span class="kw2">ForEach</span> <span class="kw2">AllActors</span><span class="br0">(</span><span class="kw1">Class</span><span class="st0">'Engine.Mutator'</span>, M<span class="br0">)</span> <span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span> M.<span class="me0">NextMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			M.<span class="me0">NextMutator</span> <span class="sy0">=</span> NextMutator;
		<span class="kw2">if</span> <span class="br0">(</span> M.<span class="me0">NextHUDMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			M.<span class="me0">NextHUDMutator</span> <span class="sy0">=</span> NextHUDMutator;
		<span class="kw2">if</span> <span class="br0">(</span> M.<span class="me0">NextDamageMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			M.<span class="me0">NextDamageMutator</span> <span class="sy0">=</span> NextDamageMutator;
		<span class="kw2">if</span> <span class="br0">(</span> M.<span class="me0">NextMessageMutator</span> <span class="sy0">==</span> <span class="kw6">Self</span> <span class="br0">)</span>
			M.<span class="me0">NextMessageMutator</span> <span class="sy0">=</span> NextMessageMutator;
	<span class="br0">}</span>
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Replacing_Inventory_Items">Replacing Inventory Items</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=3" title="Edit section: Replacing Inventory Items">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <tt>ReplaceWith</tt> function does its job in most cases, but not in all maps the items are placed with their default properties. Some have the rotation turned off (either <tt>bRotatingPicklup=False</tt>, which is the recommended way to do it, or <tt>RotationRate.Yaw=0</tt>) or float in mid-air though they normally fall down. (<tt>Physics=PHYS_None</tt> instead of <tt>PHYS_Falling</tt>)</p>
<p>Also mutator sometimes want to further adjust the properties of the item after spawning it.</p>
<p>The <tt>ReplaceWithItem</tt> function takes both into account: It modifies the new item's rotation and physics and returns it, so the mutator can modify its properties.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Modified version of the ReplaceWith function</span>
<span class="co1">// Replaces an inventory Other with an inventory of class aClassName and</span>
<span class="co1">// returns a reference to it</span>
<span class="kw1">final</span> <span class="kw1">function</span> <span class="kw9">Inventory</span> ReplaceWithItem<span class="br0">(</span><span class="kw9">Inventory</span> Other, <span class="kw1">coerce</span> <span class="kw5">string</span> aClassName<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw9">Inventory</span> A;
	<span class="kw1">local</span> class<span class="sy0">&lt;</span>Inventory<span class="sy0">&gt;</span> a<span class="re0">Class</span>&lt; SEMI &gt;
	<span class="kw1">local</span> <span class="kw5">bool</span> bAllowItemFall, bForceItemFall;
	<span class="kw1">local</span> <span class="kw5">bool</span> bAllowItemRotation, bForceItemRotation;
 
	<span class="kw2">if</span> <span class="br0">(</span> Other.<span class="kw7">Location</span> <span class="sy0">==</span> <span class="kw3">vect</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="br0">)</span>
		<span class="kw2">return</span> <span class="kw5">None</span>;
	aClass <span class="sy0">=</span> class<span class="sy0">&lt;</span>Inventory<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw3">DynamicLoadObject</span><span class="br0">(</span>aClassName, <span class="kw1">class</span><span class="st0">'Class'</span><span class="br0">)</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span> aClass <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
		A <span class="sy0">=</span> <span class="kw4">Spawn</span><span class="br0">(</span>aClass, Other.<span class="kw7">Owner</span>, Other.<span class="kw7">Tag</span>,
				Other.<span class="kw7">Location</span> <span class="sy0">+</span> <span class="br0">(</span>aClass.<span class="kw1">Default</span>.<span class="kw7">CollisionHeight</span> <span class="sy0">-</span> Other.<span class="kw7">CollisionHeight</span><span class="br0">)</span> <span class="sy0">*</span> <span class="kw3">vect</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span>,
				Other.<span class="kw7">Rotation</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span> Other.<span class="me0">MyMarker</span> <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span> <span class="br0">{</span>
		Other.<span class="me0">MyMarker</span>.<span class="me0">markedItem</span> <span class="sy0">=</span> A;
		<span class="kw2">if</span> <span class="br0">(</span> A <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
			A.<span class="me0">MyMarker</span> <span class="sy0">=</span> Other.<span class="me0">MyMarker</span>;
		Other.<span class="me0">MyMarker</span> <span class="sy0">=</span> <span class="kw5">None</span>;
	<span class="br0">}</span>
	<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span> A <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span> <span class="br0">{</span>
		A.<span class="me0">bHeldItem</span> <span class="sy0">=</span> <span class="kw6">true</span>;
		A.<span class="me0">Respawntime</span> <span class="sy0">=</span> <span class="nu0">0.0</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span> <span class="br0">(</span> A <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span> <span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span> Other.<span class="kw7">Physics</span> <span class="sy0">!=</span> Other.<span class="kw1">Class</span>.<span class="kw1">Default</span>.<span class="kw7">Physics</span> <span class="br0">)</span> <span class="br0">{</span>
			<span class="kw2">if</span> <span class="br0">(</span> Other.<span class="kw7">Physics</span> <span class="sy0">==</span> <span class="kw7">PHYS_Falling</span> <span class="br0">)</span>
				bForceItemFall <span class="sy0">=</span> <span class="kw6">True</span>;
			<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span> Other.<span class="kw1">Class</span>.<span class="kw1">Default</span>.<span class="kw7">Physics</span> <span class="sy0">==</span> <span class="kw7">PHYS_Falling</span> <span class="br0">)</span>
				bAllowItemFall <span class="sy0">=</span> <span class="kw6">False</span>;
		<span class="br0">}</span>
		<span class="kw2">if</span> <span class="br0">(</span> <span class="br0">(</span><span class="sy0">!</span>Other.<span class="me0">bRotatingPickup</span> <span class="sy0">||</span> Other.<span class="kw7">RotationRate</span> <span class="sy0">==</span> <span class="kw3">rot</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>
				<span class="sy0">&amp;&amp;</span> <span class="br0">(</span>Other.<span class="kw7">Rotation</span>.<span class="me0">Pitch</span> <span class="sy0">!=</span> <span class="nu0">0</span> <span class="sy0">||</span> Other.<span class="kw7">Rotation</span>.<span class="me0">Roll</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">)</span>
			bAllowItemRotation <span class="sy0">=</span> <span class="kw6">False</span>;
		<span class="kw2">else</span>
			bAllowItemRotation <span class="sy0">=</span> <span class="br0">(</span>Other.<span class="kw7">RotationRate</span> <span class="sy0">!=</span> <span class="kw3">rot</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> Other.<span class="me0">bRotatingPickup</span><span class="br0">)</span>
					<span class="sy0">||</span> <span class="sy0">!</span>Other.<span class="kw1">default</span>.<span class="me0">bRotatingPickup</span> <span class="sy0">||</span> Other.<span class="kw1">default</span>.<span class="kw7">RotationRate</span> <span class="sy0">==</span> <span class="kw3">rot</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span>;
		bForceItemRotation <span class="sy0">=</span> Other.<span class="kw7">RotationRate</span> <span class="sy0">!=</span> <span class="kw3">rot</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> Other.<span class="me0">bRotatingPickup</span>
				<span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">!</span>Other.<span class="kw1">default</span>.<span class="me0">bRotatingPickup</span> <span class="sy0">||</span> Other.<span class="kw1">default</span>.<span class="kw7">RotationRate</span> <span class="sy0">==</span> <span class="kw3">rot</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span> A.<span class="kw7">Physics</span> <span class="sy0">==</span> <span class="kw7">PHYS_Falling</span> <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span>bAllowItemFall <span class="br0">)</span>
			A.<span class="kw4">SetPhysics</span><span class="br0">(</span><span class="kw7">PHYS_None</span><span class="br0">)</span>;
		<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span> A.<span class="kw7">Physics</span> <span class="sy0">!=</span> <span class="kw7">PHYS_Falling</span> <span class="sy0">&amp;&amp;</span> bForceItemFall <span class="br0">)</span>
			A.<span class="kw4">SetPhysics</span><span class="br0">(</span><span class="kw7">PHYS_Falling</span><span class="br0">)</span>;
		A.<span class="me0">bRotatingPickup</span> <span class="sy0">=</span> bAllowItemRotation <span class="sy0">&amp;&amp;</span> <span class="br0">(</span>A.<span class="me0">bRotatingPickup</span> <span class="sy0">||</span> bForceItemRotation<span class="br0">)</span>;
 
		A.<span class="kw1">Event</span> <span class="sy0">=</span> Other.<span class="kw1">Event</span>;
		A.<span class="kw7">Tag</span> <span class="sy0">=</span> Other.<span class="kw7">Tag</span>;
		<span class="kw2">return</span> A;
	<span class="br0">}</span>
	<span class="kw2">return</span> <span class="kw5">None</span>;
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Giving_Weapons_To_Players">Giving Weapons To Players</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=4" title="Edit section: Giving Weapons To Players">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This function is a modified version of the <tt><a href="Legacy_DeathMatchPlus.html" title="Legacy:DeathMatchPlus">DeathMatchPlus</a>.GiveWeapon</tt> function. It adds the weapon to the player's inventory and optionally brings it up as the players selected weapon. The function returns the weapon.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// Give a weapon to a player and optionally bring it up as current weapon.</span>
<span class="kw1">function</span> <span class="kw9">Weapon</span> GiveWeapon<span class="br0">(</span><span class="kw9">Pawn</span> PlayerPawn, <span class="kw5">string</span> aClassName, <span class="kw1">optional</span> <span class="kw5">bool</span> bBringUp<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> class<span class="sy0">&lt;</span>Weapon<span class="sy0">&gt;</span> Weapon<span class="re0">Class</span>&lt; SEMI &gt;
	<span class="kw1">local</span> <span class="kw9">Weapon</span> NewWeapon;
 
	WeaponClass <span class="sy0">=</span> class<span class="sy0">&lt;</span>Weapon<span class="sy0">&gt;</span><span class="br0">(</span><span class="kw3">DynamicLoadObject</span><span class="br0">(</span>aClassName, <span class="kw1">class</span><span class="st0">'Class'</span><span class="br0">)</span><span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span> PlayerPawn.<span class="me0">FindInventoryType</span><span class="br0">(</span>WeaponClass<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
		<span class="kw2">return</span> <span class="kw5">None</span>;
	newWeapon <span class="sy0">=</span> <span class="kw4">Spawn</span><span class="br0">(</span>WeaponClass<span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span> newWeapon <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span> <span class="br0">{</span>
		newWeapon.<span class="me0">RespawnTime</span> <span class="sy0">=</span> <span class="nu0">0.0</span>;
		newWeapon.<span class="me0">GiveTo</span><span class="br0">(</span>PlayerPawn<span class="br0">)</span>;
		newWeapon.<span class="me0">bHeldItem</span> <span class="sy0">=</span> <span class="kw6">true</span>;
		newWeapon.<span class="me0">GiveAmmo</span><span class="br0">(</span>PlayerPawn<span class="br0">)</span>;
		newWeapon.<span class="me0">SetSwitchPriority</span><span class="br0">(</span>PlayerPawn<span class="br0">)</span>;
		newWeapon.<span class="me0">WeaponSet</span><span class="br0">(</span>PlayerPawn<span class="br0">)</span>;
		newWeapon.<span class="me0">AmbientGlow</span> <span class="sy0">=</span> <span class="nu0">0</span>;
		<span class="kw2">if</span> <span class="br0">(</span> PlayerPawn.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'PlayerPawn'</span><span class="br0">)</span> <span class="br0">)</span>
			newWeapon.<span class="me0">SetHand</span><span class="br0">(</span>PlayerPawn<span class="br0">(</span>PlayerPawn<span class="br0">)</span>.<span class="me0">Handedness</span><span class="br0">)</span>;
		<span class="kw2">else</span>
			newWeapon.<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'Idle'</span><span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span> bBringUp <span class="br0">)</span> <span class="br0">{</span>
			PlayerPawn.<span class="kw9">Weapon</span>.<span class="kw3">GotoState</span><span class="br0">(</span><span class="st0">'DownWeapon'</span><span class="br0">)</span>;
			PlayerPawn.<span class="me0">PendingWeapon</span> <span class="sy0">=</span> <span class="kw5">None</span>;
			PlayerPawn.<span class="kw9">Weapon</span> <span class="sy0">=</span> newWeapon;
			PlayerPawn.<span class="kw9">Weapon</span>.<span class="me0">BringUp</span><span class="br0">(</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
	<span class="kw2">return</span> newWeapon;
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Related_Topics">Related Topics</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=5" title="Edit section: Related Topics">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="Legacy_Open_Source.html" title="Legacy:Open Source">Open Source</a></li>
<li><a href="Legacy_Mutator_Topics.html" title="Legacy:Mutator Topics">Mutator Topics</a></li>
<li><a href="Legacy_Making_Mods.html" title="Legacy:Making Mods">Making Mods</a></li>
</ul>
<h2><span class="mw-headline" id="Discussion">Discussion</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions?section=6" title="Edit section: Discussion">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Kuhal:</b> I have a developed a way to allow a mutator to "appear" to handle Damage to players BEFORE Inventory.ReduceDamage is called. Shall I create a page for this and link to it from OpenSource or would it be better to create the page and link form my homepage until one of the guru's can comment on the content? I investigated this while helping someone on the forums who wanted it specifically for his SpawnProtection code.</p>
<p><b>Mychaeel:</b> Would you describe that method in a few words? â By the way, I believe the sections on this page would be well worth individual pages; maybe subpages of this one.</p>
<p><b>Kuhal:</b> Synopsis: Create an Inventory Item with Charge=0; ArmorAbsorption=0; AbsorptionPriority=1000; bIsAnArmor=true;. Override ArmorAbsorbDamage in new class to update member variables for use by the mutator. Make sure that the mutator deals out the damage accordingly because the REAL armor was not damaged in the hit. Has limited usefulness - Why oh why didn't EPIC give Inventory.ReduceDamage the Victim and InstigatedBy vars too? I'm interested in other ideas in this area so by all means hook me up. I have full working source for the SpawnProtection use if needed.</p>
<p><b>Csimbi:</b> Could someone add an example of adding another mutator from a mutator that is already added? I want to have only one entry in the .int file for practical reasons (the one Mutator would add all the others), and I cannot figure out how to do it. I tried a couple of things, but none of those worked so far. Thank You in advance.</p>
<p><b>Foxpaw:</b> Depending on what exactly you had in mind, that may be quite easy. Or it may be next to impossible. Do you mean, you only want the one entry in the mutator list and when play begins all the other mutators are added? Or do you mean you want all of them to show up in the mutator list, but only want one listed in the INT file?</p>
<p><b>Wormbo:</b> Just Level.Game.BaseMutator.AddMutator(Spawn(theMutatorClass)) should do the trick, but why don't you just combine the mutators into a single class?</p>
<p><b>Csimbi:</b></p>
<p>Foxpaw, the idea is that one mutator adds all the others.</p>
<p>Wormbo, in which function do You call this? Prebeginplay, PostBeginPlay, or&#160;?</p>
<p><b>Wormbo:</b> Yes, call it from one of the *BeginPlay functions.</p>
<p><b>Csimbi:</b> I do this in the Mutator's PostBeginplay: Level.Game.BaseMutator.AddMutator(Spawn(class'CustomTranslocator'));</p>
<p>The error message I get is: "Error, Call to 'AddMutator': type mismatch in parameter 1"</p>
<p>What am I doing wrong?</p>
<p><b>Wormbo:</b> 'Type mismatch' <a href="Legacy_Compiler_Errors.html" title="Legacy:Compiler Errors">compiler errors</a> tell you that the function expects a different variable type than you used. This CustomTranslocator class of yours, it's a mutator subclass, isn't it?</p>
<p><b>Csimbi:</b> My mistake. It's a TournamentWeapon. Changed class name to the mutator's class, and it works like a charm. Thank You.</p>
<p><b>Vindexus:</b> I tried to make an arena mut using the Replace function above. However, when i try to</p>
<p>compile it with the ucc make command, it says I'm missing a ";" in "Class" on line 4 where the function is started. Anybody know what that means?</p>
<p><b>EntropicLqd:</b> Check your class definition. It should be similar to the very first line of the HUD Mutator code snippet (first code snippet) on this page. If you class definition is correct then check that you don't mention the word <i>class</i> anywhere in a comment block before the class declaration line. e.g. the following code will give you an error at line 1:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">// This class is a mutator that does some stuff</span>
<span class="kw1">class</span> MyMutator <span class="kw1">extends</span> <span class="kw9">Mutator</span>;
<span class="co1">// .. rest of class definition ...</span>
</pre></div>
</div>
<p><b>Vindexus:</b> For what it's worth, I'm using UT2004. Here's the line of code that has the error on it</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">final</span> <span class="kw1">function</span> <span class="kw9">Inventory</span> ReplaceWithItem<span class="br0">(</span><span class="kw9">Inventory</span> Other, <span class="kw1">coerce</span> <span class="kw5">string</span> MyWeaponPickup<span class="br0">)</span>
</pre></div>
</div>
<p><b>EntropicLqd:</b> The line number the error is being reported on is bogus. Something that's pretty normal for compilers. Check your code for missing semi-colons and the like - especially after the class definition. It might be worth posting the whole code block rather than just a single line.</p>
<p><b>Wormbo:</b> Vindexus, please read the top of this page again:</p>
<blockquote class="legacyquote">
<p>Some useful <a href="Legacy_Mutator_(UT).html" title="Legacy:Mutator (UT)">Mutator (UT)</a> functions. The code on this page probably doesn't work at all in UT2003.</p>
</blockquote>
<p>These functions are not intended to be used in UT2003/4 because many aspects of Mutators and also the Pickup/Inventory system have changed.</p>
<p><b>AJRAD:</b> I'm trying to use the weapon replacement mutator thingy, but you don't specify which bits to change!!! How the hell is a newbies such as me supposed to understand? Please tell me what needs to be changed.</p>

<!-- 
NewPP limit report
CPU time usage: 0.112 seconds
Real time usage: 0.114 seconds
Preprocessor visited node count: 86/1000000
Preprocessor generated node count: 229/1000000
Postâexpand include size: 646/2097152 bytes
Template argument size: 215/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   77.412      1 - -total
  3.89%    3.015      2 - Template:Innerbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3377-0!*!0!!en!*!* and timestamp 20161215143100 and revision id 8710
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions?oldid=8710">https://wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions?oldid=8710</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://wiki.beyondunreal.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="Category_Legacy_Refactor_Me.html" title="Category:Legacy Refactor Me">Legacy Refactor Me</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_Useful_Mutator_Functions.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Useful_Mutator_Functions?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Useful_Mutator_Functions" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Useful_Mutator_Functions" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUseful+Mutator+Functions&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUseful+Mutator+Functions" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Useful_Mutator_Functions" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Useful_Mutator_Functions" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions?oldid=8710" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Useful_Mutator_Functions" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 15:44, 7 January 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":74});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Useful_Mutator_Functions by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:49 GMT -->
</html>
