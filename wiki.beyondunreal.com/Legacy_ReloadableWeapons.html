<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:ReloadableWeapons by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:ReloadableWeapons - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_ReloadableWeapons.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:ReloadableWeapons","wgTitle":"ReloadableWeapons","wgCurRevisionId":6383,"wgRevisionId":6383,"wgArticleId":2679,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:ReloadableWeapons","wgRelevantArticleId":2679,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_ReloadableWeapons skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>I don't need to test my programs. I have an error-correcting modem.
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:ReloadableWeapons</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><h1><span class="mw-headline" id="Fairly_Simple_Reloadable_Weapons">Fairly Simple Reloadable Weapons</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons?section=1" title="Edit section: Fairly Simple Reloadable Weapons">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div class="infobox infobox-class infobox-legacy"><a href="Legacy_UT2004.html" title="Legacy:UT2004" class="mw-redirect">UT2004</a>&#160;:: <a href="Legacy_Actor.html" title="Legacy:Actor">Actor</a> &gt;&gt; ReloadableWeaponsBase</div>
<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons?section=2" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>I am working on a modification for UT2004 that required reloadable weapons, so I sat down and I coded a really simple version of reloadable weapons. I don't have any animations atm, so I didn't bother coding in animation support or sound support, but I will do that later if need be. Also, this is only really useful for new gametypes or total conversions as you need a new hud class to show the player how many bullets/clips he has left to use. Also, this script is NOT tested online but it should work fine.</p>
<p>Also... please note that to reload your weapon, you will have to call 'reloadme' in the console. For gametypes and mods, you should make a custom bind for this.</p>
<h2><span class="mw-headline" id="The_Script">The Script</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons?section=3" title="Edit section: The Script">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ReloadableWeaponsBase <span class="kw1">extends</span> <span class="kw9">Weapon</span>;
 
<span class="coMULTI">/* Note: The Reloading features of this custom class will only affect FireMode(0) or Primary Fire
   As most weapons will only have one fire that will use ammo */</span>
 
 
   <span class="co1">//TODO:  ADD DISABLING OF THE ABILITY TO FIRE WHEN RELOADING</span>
   <span class="co1">//TODO:  ADD ANIMATION SUPPORT</span>
   <span class="co1">//TODO:  ADD SUPPORT BOOLS FOR MORE FIREMODES</span>
 
 
 
<span class="co1">//New Reloadable Weapon System</span>
 
<span class="co1">//Basic Reload Vars</span>
<span class="kw1">var</span> <span class="kw5">bool</span> bReloading; <span class="co1">//True if the weapon has commenced reloading</span>
<span class="kw1">var</span> <span class="kw5">int</span> iReloadWait; <span class="co1">//How much time to wait before each reload is done? SET THIS ONLY IN YOUR CUSTOM WEAPON CLASS</span>
<span class="kw1">var</span> <span class="kw5">int</span> iTimeToReload; <span class="co1">//Internally Set... IGNORE</span>
 
<span class="co1">//Clips Reload Vars</span>
<span class="kw1">var</span> <span class="kw5">bool</span> bClipReload; <span class="co1">//Set to true in weapon class if you want the gun to reload like an assault rifle</span>
<span class="kw1">var</span> <span class="kw5">int</span> iNumberOfClips; <span class="co1">//How many clips does this gun have? SET IN WEAPON CLASS</span>
 
<span class="co1">//Single Reload Vars</span>
<span class="kw1">var</span> <span class="kw5">bool</span> bSingleReload; <span class="co1">//Set to true in weapon class if you want the gun to reload like a shotgun</span>
<span class="kw1">var</span> <span class="kw5">int</span> iNumberOfBullets; <span class="co1">//How many bullets does this gun have left? SET IN WEAPON CLASS</span>
 
 
 
<span class="kw1">exec</span> <span class="kw1">function</span> ReloadMe<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
     iTimeToReload<span class="sy0">=</span>iReloadWait; <span class="co1">//reset the amount of time to wait before you have completely reloaded</span>
     bReloading<span class="sy0">=</span><span class="kw6">True</span>; <span class="co1">//reloading has commenced</span>
     <span class="kw4">SetTimer</span><span class="br0">(</span><span class="nu0">1.0</span>, <span class="kw6">True</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
       <span class="kw6">Super</span>.<span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>;
 
       <span class="kw2">if</span><span class="br0">(</span>bClipReload<span class="br0">)</span>
       <span class="br0">{</span>
 
             <span class="kw2">if</span><span class="br0">(</span>bReloading<span class="br0">)</span> <span class="co1">//Reloading</span>
             <span class="br0">{</span>
                <span class="kw2">if</span><span class="br0">(</span>iTimeToReload <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
                iTimeToReload<span class="sy0">--</span>;  <span class="co1">//decrement the wait time</span>
 
                <span class="kw2">if</span><span class="br0">(</span>iTimeToReload <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="co1">//when iTimeToReload is 0, reload the weapon as long as...</span>
                <span class="br0">{</span>
                      <span class="kw2">if</span><span class="br0">(</span>iNumberOfClips <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="co1">//You still have clips left</span>
                      <span class="br0">{</span>
                                        <span class="kw2">if</span> <span class="br0">(</span> AmmoClass<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">!=</span> <span class="kw5">None</span> <span class="br0">)</span>
			                AmmoCharge<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">=</span> MaxAmmo<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>; <span class="co1">//max out the ammo of your primary fire</span>
 
                                      iNumberOfClips<span class="sy0">--</span>; <span class="co1">//Decrement the number of clips we have as we used one up!</span>
                      <span class="br0">}</span>
                      bReloading<span class="sy0">=</span><span class="kw6">False</span>; <span class="co1">//No longer reloading</span>
                <span class="br0">}</span>
             <span class="br0">}</span>
       <span class="br0">}</span>
       <span class="kw2">if</span><span class="br0">(</span>bSingleReload<span class="br0">)</span>
       <span class="br0">{</span>
 
            <span class="kw2">if</span><span class="br0">(</span>bReloading<span class="br0">)</span> <span class="co1">//Reloading</span>
            <span class="br0">{</span>
 
                         <span class="kw2">if</span><span class="br0">(</span>iTimeToReload <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
                         iTimeToReload<span class="sy0">--</span>;  <span class="co1">//decrement time to reload</span>
 
 
                          <span class="kw2">if</span><span class="br0">(</span>iTimeToReload <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="co1">//if time to reload is 0 (you don't have to wait anymore)</span>
                          <span class="br0">{</span>
                            <span class="kw2">if</span><span class="br0">(</span>iNumberOfBullets <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="co1">//and if you still have bullets left</span>
                            <span class="br0">{</span>
                              AddAmmo<span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">0</span><span class="br0">)</span>;   <span class="co1">//give gun 1 ammo and...</span>
                              iNumberOfBullets<span class="sy0">--</span>; <span class="co1">//take away one bullet from the belt</span>
                            <span class="br0">}</span>
                          <span class="br0">}</span>
 
                          <span class="kw2">if</span><span class="br0">(</span>AmmoMaxed<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="co1">//if you can't put anymore more bullets in... stop reloading</span>
                          <span class="br0">{</span>
                                iTimeToReload <span class="sy0">=</span> iReloadWait;
                                bReloading<span class="sy0">=</span><span class="kw6">False</span>;
                          <span class="br0">}</span>
            <span class="br0">}</span>
       <span class="br0">}</span>
 
 
<span class="br0">}</span>
 
<span class="kw1">DefaultProperties</span>
<span class="br0">{</span>
<span class="br0">}</span>
</pre></div>
</div>
<hr />
<p><b>zugy:</b> Nice. We happen to have reloadable weapons for our mod, HaloUT. It looks pretty similar to this. I think the class was called Haloweapon though...either way...It has the ability to stop firing when reloading as well...Basically it checks if the gun is currently reloading in the allowfire function and if it is, returns false...</p>
<p><b>MythOpus:</b> Well, in my mod, it's called Polarity_WeaponBase hehe... I just changed the name so it could be bit more descriptive. I tried to use the return value of allowfire (without overiding the function) by using it in an if statement but it didn't work. I will have to probably do what you did with your weapons then. Do you have animations that reload yet?</p>
<p><b>zugy:</b> Would have answered a but sooner, but I had to wait for a temp ban to get lifted...Anyhow...We have a subclass of weaponfire called HaloFire, and we do have reload animations...our allowfire function checks if the weapon is reloading by accessing a varible in the haloweapon class and if the gun is reloading it returns false.</p>
<p><b>MythOpus:</b> I see. Well, I don't want to complicate things by making a custom WeaponFire unless I absolutely have to... and perhaps I will absolutely have to&#160;:| It works good the way it does now though. When I add the stuff I need to add for sounds and animations, I'll most likely update this page. It sucks that you get temporailly banned for reverting sites with lots of links&#160;:(</p>
<p><b>zugy:</b> It isn't really all that much more complicated; all you do is the check if reloading and rely on the parent class for the rest...</p>
<p><b>Solid Snake:</b> Hmmm, simplistic, but I dont think you've got replication support.</p>
<p><b>MythOpus:</b> I hate replication, so I decided I would do all that when I have a complete working beta, but I didn't think I really needed replication as everything is client side anyways. All that the server needs to know is that there were shots fired, which it already does.</p>
<p><b>Solid Snake:</b> Not a good approach towards implementing replication. Its often much harder to code an entire project and then 'add' in replication which is not what you do. Often, it is much better to code with replication in mind rather than as an after thought. It shouldn't be client side, as that poses a lot of problems? Who regulates when the client needs to reload, who regulates how many bullets are in the magazine/clip, who regulates when a client can shoot and if the client shoot will it remove ammo in the magazine/clip? The client? ... I sure hope not. This isn't so much as an attack on your code example up there, but well, those are some things to consider first as more of a priority goal rather than as an after thought. That depends if your coding a MP or a SP project that is, as obviously with SP projects, replication isn't even a consideration.</p>
<p><b>MythOpus:</b> Attacks on my code are wanted&#160;:D Gives me insight. Anyways, here's why I don't think replication is very neccesary. I'm using functions to add the ammo from the clips from the weapon base class, which means it should all be properly replicated and what not. This new weapon basically works just like a normal weapon would, except that the player has the ability to load more ammo into it. The player can reload at any time. When the player has 0 ammo left, the gun doesn't work until the player calls the reloading function (via a bind or console). The gun doesn't work when it's ammo reaches 0 anyways, but the only difference is it won't switch to a weapon with ammo in it (at least not the way I have it set up). The amount of clips left are all held in the current weapon and I didn't think the server needs to know about how many clips are left. 'Lag' only affects the server-client connection and if you're talking about variables that are just client side, like the ClipsLeft variable, the server doesn't need to deal with them because they don't really affect anything. The server just needs to know that, "Hey, that weapon doesn't have any ammo anymore so it can't fire!" and "Hey, that weapon has ammo now so he can fire."</p>
<p>Unless I'm completely wrong about this&#160;:|</p>
<p>Any about the coding in replication later, I think I have replication in mind. I mean, I make doubles of everything to be compared to in my code so all I have to do is replicate the doubles... right?</p>
<p><b>Solid Snake:</b>Don't really know what you mean by doubling your code and replicating doubles...</p>
<p><b>MythOpus:</b> Haha. Okay, here's an example then. Instead of:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">var</span> <span class="kw5">int</span> AnInt;
 
AnInt <span class="sy0">=</span> <span class="nu0">5</span>;
</pre></div>
</div>
<p>Do this...</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">var</span> <span class="kw5">int</span> AnInt,AnotherInt;
 
<span class="kw1">replication</span> blah blah
AnotherInt
 
AnInt <span class="sy0">=</span> AnotherInt;
</pre></div>
</div>
<p>Haha&#160;:S</p>
<p><b>Wormbo:</b> Uhm, what's the point of that? Generally the server should dictate, what's going on. Especially something as important as ammunition management should not be delegated to the client. Clients might be allowed to <i>simulate</i> the server's behavior, but the server still has the final word about whether the weapon may fire or not. A popular example, how client side fire control can go wrong is the UT ZeroPing InstaGib mod. In an earlier version the server didn't check the firing rate and a so-called "mass-murder" cheat was created, where the client would immediately kill everyone in sight.</p>
<p><b>MythOpus:</b> Laughs to himself loudly. Okay... well... for replication I thought you couldn't replicate variables that are being used by the code. Instead, I thoguht you had to make another variable that would be replicated and you would set another variable that you would want to be replicated to the variable that was being replicated....</p>
<p>Anyways... Can you show me how I would do this clip/bullet left replication then?</p>
<p><b>zugy:</b> Well I don't understand much about replication, but this was in our weapons class, maybe it'll give you some ideas...</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">replication</span>
<span class="br0">{</span>
    <span class="kw1">reliable</span> <span class="kw2">if</span><span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
        ClipCount;
 
 
    <span class="kw1">reliable</span> <span class="kw2">if</span><span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">&lt;</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
        ReloadMeNow, FinishReloading;
 
 
    <span class="kw1">reliable</span> <span class="kw2">if</span><span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
        ClientReload, ClientFinishReloading, ClientReloadEffects;
<span class="br0">}</span>
</pre></div>
</div>
<p><b>Brian_The_Black:</b> And here is my quick and dirty method for reloading weapons:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ReloadableWepFire <span class="kw1">extends</span> <span class="kw8">WeaponFire</span>;
 
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span>	<span class="kw5">float</span>	ReloadTime;
<span class="kw1">var</span>	<span class="kw5">int</span>	ShotsFired;
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span>	<span class="kw5">int</span>	ClipSize;
 
<span class="kw1">event</span> ModeDoFire<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span>ShotsFired<span class="sy0">&lt;=</span><span class="br0">(</span>ClipSize <span class="sy0">-</span> <span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span>
		<span class="br0">{</span>
 
		  <span class="kw2">if</span> <span class="br0">(</span>FireRate<span class="sy0">==</span>ReloadTime<span class="br0">)</span>
			FireRate<span class="sy0">=</span><span class="kw1">Default</span>.<span class="me0">FireRate</span>;
 
		  ShotsFired <span class="sy0">=</span> <span class="br0">(</span>ShotsFired<span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="kw2">else</span>
		<span class="br0">{</span>
		  FireRate<span class="sy0">=</span>ReloadTime;
		  ShotsFired <span class="sy0">=</span> <span class="nu0">0</span>;
		  ReloadableWep<span class="br0">(</span><span class="kw9">Weapon</span><span class="br0">)</span>.<span class="me0">Reload</span><span class="br0">(</span>ReloadTime<span class="br0">)</span>;
		<span class="br0">}</span>
 
	<span class="kw6">super</span>.<span class="me0">ModeDoFire</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
     ClipSize<span class="sy0">=</span><span class="nu0">5</span>
     ReloadTime<span class="sy0">=</span><span class="nu0">2.000000</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>The animation and sounds are done in the weapon:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ReloadableWeapon <span class="kw1">extends</span> <span class="kw9">Weapon</span>
    <span class="kw1">config</span><span class="br0">(</span>user<span class="br0">)</span>;
 
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">Name</span> ReloadAnim;
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">Name</span> ReloadDownAnim;
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">Name</span> ReloadUpAnim;
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">Sound</span> ReloadSound;
<span class="kw1">var</span>   <span class="kw5">Float</span> SepReloadAnimRate;
 
<span class="kw1">simulated</span> <span class="kw1">function</span> Reload<span class="br0">(</span><span class="kw5">float</span> ReloadTime<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span> <span class="kw4">HasAnim</span><span class="br0">(</span>ReloadAnim<span class="br0">)</span> <span class="br0">)</span>
		<span class="kw4">PlayAnim</span><span class="br0">(</span>ReloadAnim, ReloadTime, <span class="nu0">0.0</span><span class="br0">)</span>;
	<span class="kw2">else</span>
		<span class="br0">{</span>
		  SepReloadAnimRate <span class="sy0">=</span> <span class="br0">(</span>ReloadTime<span class="sy0">-</span><span class="nu0">2</span><span class="br0">)</span>;
 
		  <span class="kw4">PlaySound</span><span class="br0">(</span>ReloadSound, <span class="kw7">SLOT_None</span>, <span class="nu0">1.0</span><span class="br0">)</span>;
		  <span class="kw4">PlayAnim</span><span class="br0">(</span>ReloadDownAnim, <span class="nu0">0.5</span>, <span class="nu0">0.0</span><span class="br0">)</span>;
		  <span class="kw4">SetTimer</span><span class="br0">(</span>SepReloadAnimRate, <span class="kw6">false</span><span class="br0">)</span>;
		  <span class="kw4">PlayAnim</span><span class="br0">(</span>ReloadUpAnim, <span class="nu0">0.5</span>,<span class="nu0">0.0</span><span class="br0">)</span>;
		<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
     ReloadUpAnim<span class="sy0">=</span><span class="st0">"Pickup"</span>
     ReloadDownAnim<span class="sy0">=</span><span class="st0">"PutDown"</span>
     ReloadSound<span class="sy0">=</span><span class="kw5">Sound</span><span class="st0">'NewWeaponSounds.NewSniper_load'</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>I have just made this today, my only problem with it is that the timer dosent seem to work. What is it's problem?</p>
<p>Oh yea, and I need to sort the HUD out to display the ammo (but I shouldnt have a problem with this)</p>
<p>Anyway, this is part of a project I have been doing in making a uber rocket launcher which has several intresting features:</p>
<p>1. Scope, with target tracking (possible targets have a white box drawn around them)</p>
<p>2. Homming missiles, missile launcher automaticaly locks onto target closest to the cross hairs (the current locked target has a red box instead of white)</p>
<p>3. Once missiles are locked on to targets, they follow them with reasonable agility, even if the missile launcher has selected a new target (or gone out of target locking range, or controller died, or target is no longer visible)</p>
<p>4. To make this weapon fairer, it fires 5 missiles and then has to reload.</p>
<p>Anyway, I have almost finished it, just need to make a nice mesh for it.... problem is I cant find a converter for lightwave 9 files that works!</p>

<!-- 
NewPP limit report
CPU time usage: 0.112 seconds
Real time usage: 0.114 seconds
Preprocessor visited node count: 39/1000000
Preprocessor generated node count: 189/1000000
Post‐expand include size: 270/2097152 bytes
Template argument size: 76/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.615      1 - -total
100.00%    2.615      1 - Template:Classbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:2679-0!*!0!!*!*!* and timestamp 20161215143220 and revision id 6383
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:ReloadableWeapons?oldid=6383">https://wiki.beyondunreal.com/Legacy:ReloadableWeapons?oldid=6383</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_ReloadableWeapons.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:ReloadableWeapons?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:ReloadableWeapons" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:ReloadableWeapons" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AReloadableWeapons&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AReloadableWeapons" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:ReloadableWeapons" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:ReloadableWeapons" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:ReloadableWeapons?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:ReloadableWeapons?oldid=6383" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:ReloadableWeapons" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 15:11, 28 April 2007.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":86});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:ReloadableWeapons by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
</html>
