<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Ultimate FlashLight 2k3 - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_Ultimate_FlashLight_2k3.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Ultimate_FlashLight_2k3","wgTitle":"Ultimate FlashLight 2k3","wgCurRevisionId":8900,"wgRevisionId":8900,"wgArticleId":3464,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Ultimate_FlashLight_2k3","wgRelevantArticleId":3464,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Ultimate_FlashLight_2k3 skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>There is no spoon
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Ultimate FlashLight 2k3</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>A really nice flashlight for UT2003. <a rel="nofollow" class="external text" href="../www.frag-ops.com/content/animations/FragOps-taclight.html">Watch it in action</a></p>
<p><a rel="nofollow" class="external text" href="../www.frag-ops.com/images/taclight.html">ScreenShot</a></p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#What_You_Need"><span class="tocnumber">2</span> <span class="toctext">What You Need</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Effect_TacLightProjector.uc"><span class="tocnumber">3</span> <span class="toctext">Effect_TacLightProjector.uc</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Effect_TacLightGlow.uc"><span class="tocnumber">4</span> <span class="toctext">Effect_TacLightGlow.uc</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Applications"><span class="tocnumber">5</span> <span class="toctext">Applications</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Final_Note"><span class="tocnumber">6</span> <span class="toctext">Final Note</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Comments"><span class="tocnumber">6.1</span> <span class="toctext">Comments</span></a></li>
</ul>
</li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Summary">Summary</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=1" title="Edit section: Summary">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>I spent a few days trying to create a fairly realistic flashlight using projectors, then switched to dynamic lights after i didn't get the specific look i wanted, at the same time discovering they had a random darkening effect when projected onto certain terrain. This worked out better for the terrain issue, but i felt it looked too drab. What i ended up deciding on was a dynamic projector to get a focal point with adjustable FOV, and then keeping the light for ambience. To follow the FOV adjustment of the projector, i'm manually adjusting the LightRadius of the dynamic light, which is dependant on a trace done every tick. The resulting effect was quite stunning, and i decided it was too good to go unshared.</p>
<p>On a side note, i made my projective texture light-affected, which seems to partially cure the darkening effect on terrain.</p>
<h2><span class="mw-headline" id="What_You_Need">What You Need</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=2" title="Edit section: What You Need">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol>
<li>A texture for the projector. I use a 256x256, DXT1 compressed bitmap. The full info is commented below.</li>
</ol>
<h2><span class="mw-headline" id="Effect_TacLightProjector.uc">Effect_TacLightProjector.uc</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=3" title="Edit section: Effect TacLightProjector.uc">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Here is where everything takes place. <b>bHasLight</b> is toggled from an outside control. All you need to do is call <b>spawn(class'Effect_TacLightProjector',Owner);</b> where "Owner" is the pawn that will be owning the light. Then set its <b>bHasLight</b> variable, and the actor will take care of the rest.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//=============================================================================</span>
<span class="co1">// Â© 2003 Matt 'SquirrelZero' Farber</span>
<span class="co1">//=============================================================================</span>
<span class="co1">// "UT2k3 Ultimate Flashlight"</span>
<span class="co1">// I wrote this using _both_ a dynamic projector and a dynamic light, with the </span>
<span class="co1">// dynamic projector as the focal point and lightsource providing general </span>
<span class="co1">// ambient illumination.  Either one by itself is pretty dull, but combine the </span>
<span class="co1">// two and you've got yourself a really nice effect if done correctly.</span>
<span class="co1">//=============================================================================</span>
<span class="kw1">class</span> Effect_TacLightProjector <span class="kw1">extends</span> <span class="kw9">DynamicProjector</span>;
 
<span class="co1">// add a light too, there seems to be a problem with the projector darkening terrain sometimes</span>
<span class="kw1">var</span> Effect_TacLightGlow TacLightGlow;
 
<span class="kw1">var</span> <span class="kw9">Pawn</span> LightPawn;
<span class="kw1">var</span> <span class="kw9">Controller</span> LightController;
<span class="kw1">var</span> <span class="kw5">bool</span> bHasLight;
 
<span class="kw1">replication</span>
<span class="br0">{</span>
	<span class="co1">// relevant variables needed by the client</span>
	<span class="kw1">reliable</span> <span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
		LightPawn, LightController;
 
	<span class="co1">// relevant variables needed by the client</span>
	<span class="kw1">reliable</span> <span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
		bHasLight;
<span class="br0">}</span>
 
<span class="co1">// setup the pawn and controller variables, spawn the dynamic light</span>
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span><span class="br0">(</span> bProjectActor <span class="br0">)</span>
		<span class="kw4">SetCollision</span><span class="br0">(</span><span class="kw6">True</span>, <span class="kw6">False</span>, <span class="kw6">False</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Owner</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		LightPawn <span class="sy0">=</span> <span class="kw9">Pawn</span><span class="br0">(</span><span class="kw7">Owner</span><span class="br0">)</span>;
		LightController <span class="sy0">=</span> LightPawn.<span class="kw9">Controller</span>;
	<span class="br0">}</span>
	<span class="kw2">if</span> <span class="br0">(</span>TacLightGlow <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">&amp;&amp;</span> <span class="kw7">Role</span> <span class="sy0">==</span> <span class="kw7">ROLE_Authority</span><span class="br0">)</span>
	<span class="br0">{</span>
		TacLightGlow <span class="sy0">=</span> <span class="kw4">spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'Effect_TacLightGlow'</span><span class="br0">)</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="co1">// updates the taclight projector and dynamic light positions</span>
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span><span class="kw5">float</span> DeltaTime<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">vector</span> StartTrace,EndTrace,X,Y,Z,HitLocation,HitNormal;
	<span class="kw1">local</span> <span class="kw5">material</span> SurfaceMat;
	<span class="kw1">local</span> <span class="kw5">float</span> BeamLength;
 
	<span class="co1">// we're changing its location and rotation, so detach it</span>
	DetachProjector<span class="br0">(</span><span class="br0">)</span>;
 
	<span class="co1">// fallback</span>
	<span class="kw2">if</span> <span class="br0">(</span>LightPawn <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">||</span> LightController <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">||</span> <span class="sy0">!</span>bHasLight<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>TacLightGlow <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
			TacLightGlow.<span class="me0">bDynamicLight</span> <span class="sy0">=</span> <span class="kw6">false</span>;
		<span class="kw2">return</span>;
	<span class="br0">}</span>
 
	<span class="co1">// ok, first we need to get a location directly in front of the player</span>
	StartTrace <span class="sy0">=</span> LightPawn.<span class="kw7">Location</span> <span class="sy0">+</span> LightPawn.<span class="me0">EyePosition</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="kw3">GetAxes</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span>,X,Y,Z<span class="br0">)</span>;
 
	<span class="co1">// not too far out, we don't want a flashlight that can shine across the map</span>
	EndTrace <span class="sy0">=</span> StartTrace <span class="sy0">+</span> <span class="nu0">1800</span><span class="sy0">*</span><span class="kw5">vector</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
	<span class="kw4">Trace</span><span class="br0">(</span>HitLocation,HitNormal,EndTrace,StartTrace,<span class="kw6">true</span>,,SurfaceMat<span class="br0">)</span>;
 
	<span class="co1">// find out how far the first hit was</span>
	BeamLength <span class="sy0">=</span> <span class="kw3">VSize</span><span class="br0">(</span>StartTrace<span class="sy0">-</span>HitLocation<span class="br0">)</span>;
 
	<span class="co1">// clear the base, we're going to be doing some adjustments</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Base</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>;
		<span class="kw4">SetBase</span><span class="br0">(</span><span class="kw5">none</span><span class="br0">)</span>;
 
	<span class="co1">// this makes a neat focus effect when you get close to a wall</span>
	<span class="kw2">if</span> <span class="br0">(</span>BeamLength <span class="sy0">&lt;=</span> <span class="nu0">90</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw4">SetLocation</span><span class="br0">(</span>StartTrace<span class="sy0">+</span><span class="kw5">vector</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="kw3">Max</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0.2</span><span class="sy0">*</span>BeamLength<span class="br0">)</span>, <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span>;
		<span class="kw4">SetBase</span><span class="br0">(</span>LightPawn<span class="br0">)</span>;
		<span class="kw4">SetRotation</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
		<span class="kw4">SetDrawScale</span><span class="br0">(</span><span class="kw3">FMax</span><span class="br0">(</span><span class="nu0">0.02</span>,<span class="br0">(</span>BeamLength<span class="sy0">/</span><span class="nu0">90</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="kw1">Default</span>.<span class="kw7">DrawScale</span><span class="br0">)</span>;
	<span class="br0">}</span>
	<span class="co1">// else we project it normally, positioning slightly in front of the player</span>
	<span class="kw2">else</span> 
	<span class="br0">{</span>
		<span class="kw4">SetLocation</span><span class="br0">(</span>StartTrace<span class="sy0">+</span><span class="kw5">vector</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">80</span><span class="br0">)</span>;
		<span class="kw4">SetBase</span><span class="br0">(</span>LightPawn<span class="br0">)</span>;
		<span class="kw4">SetRotation</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
		<span class="kw4">SetDrawScale</span><span class="br0">(</span><span class="kw1">Default</span>.<span class="kw7">DrawScale</span><span class="br0">)</span>;
	<span class="br0">}</span>
 
	<span class="co1">// reattach it</span>
	AttachProjector<span class="br0">(</span><span class="br0">)</span>;
 
	<span class="co1">// turns the dynamic light on if it's off</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>TacLightGlow.<span class="me0">bDynamicLight</span><span class="br0">)</span>
		TacLightGlow.<span class="me0">bDynamicLight</span> <span class="sy0">=</span> <span class="kw6">true</span>;
 
	<span class="co1">// better than tracing for the actor, makes it more projector-like</span>
	<span class="kw2">if</span> <span class="br0">(</span>SurfaceMat <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">// again, neat focus effect up close, starts earlier than the dynamic projector</span>
		<span class="kw2">if</span> <span class="br0">(</span>BeamLength <span class="sy0">&lt;=</span> <span class="nu0">100</span><span class="br0">)</span>
		<span class="br0">{</span>
			TacLightGlow.<span class="me0">LightBrightness</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightBrightness</span> <span class="sy0">*</span> <span class="br0">(</span><span class="nu0">1.0</span> <span class="sy0">+</span> <span class="br0">(</span><span class="nu0">1.0</span> <span class="sy0">-</span> <span class="br0">(</span>BeamLength<span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;
			TaclightGlow.<span class="me0">LightRadius</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightRadius</span> <span class="sy0">*</span> <span class="kw3">FMax</span><span class="br0">(</span><span class="nu0">0.3</span>,<span class="br0">(</span>BeamLength<span class="sy0">/</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span>;
		<span class="br0">}</span>
		<span class="co1">// else we scale its radius and brightness depending on distance from the material</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			<span class="co1">// fades the lightsource out as it moves farther away</span>
			<span class="kw2">if</span> <span class="br0">(</span>BeamLength <span class="sy0">&gt;=</span> <span class="nu0">1300</span><span class="br0">)</span>
				TacLightGlow.<span class="me0">LightBrightness</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightBrightness</span> <span class="sy0">*</span> <span class="br0">(</span><span class="br0">(</span><span class="nu0">1800</span><span class="sy0">-</span>BeamLength<span class="br0">)</span><span class="sy0">/</span><span class="nu0">500</span><span class="br0">)</span>;
			<span class="co1">// else normal brightness</span>
			<span class="kw2">else</span>
				TacLightGlow.<span class="me0">LightBrightness</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightBrightness</span>;
 
			<span class="co1">// this makes the light act more like a spotlight, resizing depending on distance</span>
			TacLightGlow.<span class="me0">LightRadius</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightRadius</span> <span class="sy0">+</span> <span class="br0">(</span><span class="nu0">4.5</span> <span class="sy0">*</span> <span class="br0">(</span>BeamLength<span class="sy0">/</span><span class="nu0">1900</span><span class="br0">)</span><span class="br0">)</span>;
		<span class="br0">}</span>
		TacLightGlow.<span class="kw4">SetLocation</span><span class="br0">(</span>HitLocation<span class="sy0">-</span><span class="kw5">vector</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">64</span><span class="br0">)</span>;
		TacLightGlow.<span class="kw4">SetRotation</span><span class="br0">(</span><span class="kw5">rotator</span><span class="br0">(</span>HitLocation<span class="sy0">-</span>StartTrace<span class="br0">)</span><span class="br0">)</span>;
 
	<span class="br0">}</span>
	<span class="co1">// else if the trace returned nothing, then we put the light right in front of the player, scale its brightness down,</span>
	<span class="co1">// and give it normal radius.  This makes it seem as if the light is casting a dull glow  onto the ground in front </span>
	<span class="co1">// of the player, and is dim enough for players to not notice the transition.</span>
	<span class="kw2">else</span>
	<span class="br0">{</span>
		TacLightGlow.<span class="me0">LightRadius</span> <span class="sy0">=</span> TacLightGlow.<span class="kw1">Default</span>.<span class="me0">LightRadius</span>;
		TacLightGlow.<span class="me0">LightBrightness</span> <span class="sy0">=</span> <span class="nu0">50</span>;
		TacLightGlow.<span class="kw4">SetLocation</span><span class="br0">(</span>StartTrace<span class="sy0">+</span><span class="kw5">vector</span><span class="br0">(</span>LightController.<span class="me0">GetViewRotation</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">100</span><span class="br0">)</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
	<span class="co1">// for my projtexture, i'm using a 256x256 DXT1 texture, created in the same way as the bulldog headlights --</span>
	<span class="co1">// just a bright white circle dead center on a black background.  Make sure the texture is set to TC_Clamp</span>
	<span class="co1">// or it'll repeat itself over the whole surface.</span>
	ProjTexture<span class="sy0">=</span><span class="kw5">Texture</span><span class="st0">'FOMisc.Projected.TacLight'</span>
	MaterialBlendingOp<span class="sy0">=</span>PB_Modulate
	FrameBufferBlendingOp<span class="sy0">=</span>PB_Add
	MaxTraceDistance<span class="sy0">=</span><span class="nu0">1600</span>
	bClipBSP<span class="sy0">=</span><span class="kw6">True</span>
	bProjectOnUnlit<span class="sy0">=</span><span class="kw6">True</span>
	bGradient<span class="sy0">=</span><span class="kw6">True</span>
	bProjectOnAlpha<span class="sy0">=</span><span class="kw6">True</span>
	bProjectOnParallelBSP<span class="sy0">=</span><span class="kw6">True</span>
	bLightChanged<span class="sy0">=</span><span class="kw6">True</span>
	<span class="kw7">RemoteRole</span><span class="sy0">=</span><span class="kw7">ROLE_SimulatedProxy</span>
	<span class="kw7">DrawScale</span><span class="sy0">=</span><span class="nu0">0.21000</span>
	FOV<span class="sy0">=</span><span class="nu0">5</span>
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Effect_TacLightGlow.uc">Effect_TacLightGlow.uc</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=4" title="Edit section: Effect TacLightGlow.uc">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A dynamic light used by the <b>Effect_TacLightProjector</b> class to provide extra ambience.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//=============================================================================</span>
<span class="co1">// Â© 2003 Matt 'SquirrelZero' Farber</span>
<span class="co1">//=============================================================================</span>
<span class="kw1">class</span> Effect_TacLightGlow <span class="kw1">extends</span> <span class="kw9">Light</span>;
 
<span class="kw1">function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw4">SetTimer</span><span class="br0">(</span><span class="nu0">1.0</span>,<span class="kw6">True</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// makes bots "see" the light when it's on</span>
<span class="kw1">function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw4">MakeNoise</span><span class="br0">(</span><span class="nu0">0.3</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
	<span class="kw5">Texture</span><span class="sy0">=</span>S_Light
	LightType<span class="sy0">=</span>LT_Steady
	LightEffect<span class="sy0">=</span>LE_None
	LightBrightness<span class="sy0">=</span><span class="nu0">180</span>
	LightSaturation<span class="sy0">=</span><span class="nu0">255</span>
	LightRadius<span class="sy0">=</span><span class="nu0">3.0</span>
	LightPeriod<span class="sy0">=</span><span class="nu0">34</span>
	<span class="kw7">CollisionRadius</span><span class="sy0">=+</span><span class="nu0">0005.000000</span>
	<span class="kw7">CollisionHeight</span><span class="sy0">=+</span><span class="nu0">0005.000000</span>
	bHidden<span class="sy0">=</span><span class="kw6">true</span>
	bStatic<span class="sy0">=</span><span class="kw6">false</span>
	bNoDelete<span class="sy0">=</span><span class="kw6">false</span>
	bMovable<span class="sy0">=</span><span class="kw6">true</span>
	bDynamicLight<span class="sy0">=</span><span class="kw6">false</span>
	bDirectional<span class="sy0">=</span><span class="kw6">true</span>
	<span class="kw7">RemoteRole</span><span class="sy0">=</span><span class="kw7">ROLE_SimulatedProxy</span>
<span class="br0">}</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Applications">Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=5" title="Edit section: Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In my case, i created a specialized exec function in my <b>PlayerController</b> class for toggling the light on or off, named <b>ToggleItem()</b>. Since my light will only be used by specific weapons and not all the time, the exec then calls my custom function <b>SpecialFire()</b>, declared in my <b>Weapon</b> class, on the currently held weapon. By default <b>SpecialFire()</b> is a blank function, but on taclight weapons here is where i insert my trigger for the light. This then calls a client-&gt;server (Reliable if Role &lt; ROLE_Authority) replicated function, and the server spawns the light if it doesn't exist, else toggles it on or off if it does (<b>bHasLight = true;</b> or <b>bHasLight = false;</b>). The <b>Owner</b> of the light is always the weapon's <b>Instigator</b>, since by default the Instigator is replicated in the WeaponClass. To see how to specify the Owner when spawning the projector, look at the <b>spawn()</b> function in the <b>Actor</b> class.</p>
<h2><span class="mw-headline" id="Final_Note">Final Note</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=6" title="Edit section: Final Note">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>That's all there is to it, the projector actor handles nearly everything on its own. If you intend to use this method, please contact me and let me know, only because i'd like to hear how you made use of it.</p>
<h3><span class="mw-headline" id="Comments">Comments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3?section=7" title="Edit section: Comments">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>MythOpus:</b> Wow, this looks good. I've been looking for a flshlight for awhile now. My search is over&#160;:D I have a question though... how did you get this ingame and how do you turn it on&#160;?? I've compiled it.. what next?</p>
<p><b>SquirrelZero:</b> Thanks =]. I added an 'applications' section, to explain how i put it to use.</p>
<p><b>MythOpus:</b> I see... Way outta my league&#160;:) So this is for Face Off then&#160;?</p>
<p><b>SquirrelZero:</b> nah, different mod coming out soon. <a rel="nofollow" class="external text" href="http://www.frag-ops.com/">Frag.Ops</a></p>
<p><b>Foxpaw:</b> Could this page be renamed to something simpler, like just Flashlight or Creating a flashlight or something to that effect? "Ultimate Flashlight 2K3" sound like "Xtreme Advertising" run amok.</p>
<p><b>SquirrelZero:</b> what am i advertising? This a free script. I'm not forcing anyone to use it over another one. Ultimate FlashLight 2k3 is the name of the program, i made it up in exactly 5 seconds, because honestly i didn't care what it was called as long as it was useful for someone. I mean cmon, that's along the same lines as asking someone to rename their mutator or mod. I'm sorry that my choice doesn't agree with you, but i think you're a bit too "Xtreme" yourself.</p>
<p><b>Mosquito:</b> IN BEFORE THE LOCK!! wait... this isn't a forum.... oh well. Hey? how did you record the video WITH sound?!</p>
<p><b>Dark Pulse:</b> He probably dumped Pictures repeatedly (I know there's a console command for this) and then Did a Rip of Audio using total Recorder or something, then bundled them together.</p>
<p><b>(v)adOnion:</b> Be glad he's sharing his code - a lot of people don't and you'll have to figure stuff out all on your own.</p>
<p><b>Bslayerw:</b> SquirrelZero, FragOps looks awesome. Thanks for sharing the code. It's people like you that make the modding community a better place. Sharing code like this is very valuable.</p>
<p><b>RegularX:</b> Ditto here SZ. I just started researching into some good flashlight code, had kinda wondered about a path like this, then found this page. Exactly what I was looking for. Thanks for sharing, this will shave off a lot of frustration I think&#160;:)</p>
<p><b>SquirrelZero:</b> I've gotten quite a few requests over the past few days on how to actually implement it in your own code, so i think i'll add some detailed examples soon. Gimme a few days to think them up tho&#160;:)</p>
<p><b>MythOpus:</b> I know your probably busy with FragOps. (Impressive BTW) but how are those 'examples' coming along&#160;:P I want to just put the turn on flashlight exec function in my playercontroller but I don't want it to have anything to do with the current weapon. Any ideas?</p>
<p><b>EricBlade:</b> I popped this in as a mutator in my game, and everything seems to be good on it, except that i'm not actually getting any light. &#160;:( I don't know if I know enough to debug this, either. All the code seems to be functioning.. am I having replication issues?</p>
<p><b>MythOpus:</b> Well, I haven't looked at this in a long time, but I don't think that it actually gives off light, as a light actor would. It should only display a projector of a light. Unless, that's the thing you're talking about.</p>
<p><b>EricBlade:</b> Turned out it was replication issues.. a tad difficult thing to work with in a mutator, i'm thinking.. so i implemented it into my playercontroller, and spent an hour or so before realising that exec function flashlight() { .. } doesn't work, for no obvious reason.&#160;:) Now, I have it working, though it obviously makes a much better spot/pointlight than a flashlight. Since it is implemented as both a projector, and a light, it should give off light, and it does (although I had to change the "if(TacLightGlow == None &amp;&amp; Role == ROLE_AUTHORITY)" to just if(TacLightGlow == None), else there was no light glow on the local players end, and the local players end filled with a zillion Accessed Nones.&#160;:) Now, to see if I can make it more flashlight like.. if anyone has suggestions, i'd love to hear&#160;:)</p>
<p><b>MythOpus:</b>Modify the texture so that it will have those... flashlight 'rings' around the light?</p>
<p><b>EricBlade:</b>Looks like that would be the first order. It looks like the Light part of this really doesn't seem to work. I actually commented out all the code having to do with the LightGlow, and it worked almost identically, except I didn't get weird spot flashes on parts of the level..</p>
<p><b>SuperApe:</b> A different <a rel="nofollow" class="external text" href="http://forums.unrealplayground.com/showthread.php?t=38185">Flashlight example</a> for UT200x. Not sure how it compares to this one, but it includes bot support, etc. Comments welcome on the UP forums.</p>

<!-- 
NewPP limit report
CPU time usage: 0.066 seconds
Real time usage: 0.067 seconds
Preprocessor visited node count: 45/1000000
Preprocessor generated node count: 72/1000000
Postâexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3464-0!*!*!!en!*!* and timestamp 20161215143212 and revision id 8900
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3?oldid=8900">https://wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3?oldid=8900</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_Ultimate_FlashLight_2k3.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Ultimate_FlashLight_2k3?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Ultimate_FlashLight_2k3" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Ultimate_FlashLight_2k3" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUltimate+FlashLight+2k3&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUltimate+FlashLight+2k3" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Ultimate_FlashLight_2k3" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Ultimate_FlashLight_2k3" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3?oldid=8900" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Ultimate_FlashLight_2k3" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 10:37, 6 March 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":78});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Ultimate_FlashLight_2k3 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
</html>
