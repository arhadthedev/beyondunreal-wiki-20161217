<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:UArch/USRender by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 10:53:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:UArch/USRender - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender" />
<link rel="shortcut icon" href="../w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="../w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="USRender.html" />
<link rel="copyright" href="../Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="../w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="../w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:UArch/USRender","wgTitle":"UArch/USRender","wgCurRevisionId":8807,"wgRevisionId":8807,"wgArticleId":3419,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:UArch/USRender","wgRelevantArticleId":3419,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_UArch_USRender skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>My program doesn't have bugs. It just develops random features.
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:UArch/USRender</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../Legacy_UArch.html" title="Legacy:UArch">Legacy:UArch</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#UnrealScript_Renderer"><span class="tocnumber">1</span> <span class="toctext">UnrealScript Renderer</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#First_Test_version"><span class="tocnumber">1.1</span> <span class="toctext">First Test version</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Second_version"><span class="tocnumber">1.2</span> <span class="toctext">Second version</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Future_plans"><span class="tocnumber">1.3</span> <span class="toctext">Future plans</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#The_Code"><span class="tocnumber">1.4</span> <span class="toctext">The Code</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Version_3"><span class="tocnumber">1.5</span> <span class="toctext">Version 3</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#pics:"><span class="tocnumber">2</span> <span class="toctext">pics:</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Todo:"><span class="tocnumber">3</span> <span class="toctext">Todo:</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Feedback"><span class="tocnumber">4</span> <span class="toctext">Feedback</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="UnrealScript_Renderer">UnrealScript Renderer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=1" title="Edit section: UnrealScript Renderer">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>it is not an actual render device, but instead draws the entire scene onto the canvas</p>
<p>the calculations are all per-pixel which gives the renderer realtime lighting and shadows specular and hopefully other effects in the future&#160;:P</p>
<p>the renderer is extremely slow (for obvious reasons) and the renderer runs best at 40x30 to 64x48 it cannot render meshes(only renders the collision cylinders) which makes it quite useless really =P but it was intresting to make</p>
<p>will update description later</p>
<h3><span class="mw-headline" id="First_Test_version">First Test version</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=2" title="Edit section: First Test version">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>black and white lighting only, very simple lighting calculations (no surface normal taken into account) so surfaces lack definition</p>
<p>[[Image:Legacy_usrender_v1_00.jpeg|]]</p>
<p>the cylinder on the bottom left picture is a bot&#160;;)</p>
<p>a short video is available here:</p>
<p><a rel="nofollow" class="external free" href="../../uarch.dyndns.org/ur/_Render.avi">http://uarch.dyndns.org/ur/_Render.avi</a> 3.3MB</p>
<h3><span class="mw-headline" id="Second_version">Second version</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=3" title="Edit section: Second version">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>huge step up from the previous version with colored lighting, specular, and distance fog</p>
<p>this version also lets you take screnshots much larger than the "render resolution" and has settings to enable/disable certain features</p>
<p>some higher resolution pictures which were taken at 256x192(i think) (actual render resolution was 40x30)</p>
<p>[[Image:Legacy_usrender_v2_00.jpeg|]]</p>
<p>[[Image:Legacy_usrender_v2_01.jpeg|]]</p>
<p>also below are 4 comparison screenshots, taken from DM-TDC-Derdak made by Derdak2rot for the theme design contest pack which is available at nalicity <a rel="nofollow" class="external free" href="http://nalicity.beyondunreal.com/map_hub.php?mid=9122">http://nalicity.beyondunreal.com/map_hub.php?mid=9122</a></p>
<p>on the left are normal screenshots of the map and on the right are screenshots with the unrealscript renderer</p>
<p>[[Image:Legacy_compare_00.jpeg|]]</p>
<p>[[Image:Legacy_compare_01.jpeg|]]</p>
<h3><span class="mw-headline" id="Future_plans">Future plans</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=4" title="Edit section: Future plans">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>volumetric and raytraced fog and possibly some additional lighting effects like coronas or bloom</p>
<p>will probably move this to 2k4 for performance reasons</p>
<h3><span class="mw-headline" id="The_Code">The Code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=5" title="Edit section: The Code">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="hidden-block"><span class="hint">Light Calculation</span>
<div class="hidden">
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="co1">//Made By UArch ;P</span>
<span class="kw1">simulated</span> <span class="kw1">static</span> <span class="kw1">final</span> <span class="kw1">function</span> calclighting<span class="br0">(</span><span class="kw9">actor</span> a,<span class="kw5">vector</span> loc,<span class="kw5">vector</span> norm,<span class="kw5">vector</span> mirror,<span class="kw1">out</span> <span class="kw5">color</span> lightcolor<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">float</span> lr,lg,lb;
	<span class="kw1">local</span> <span class="kw5">float</span> fscale; <span class="co1">//fogdist thingy</span>
	<span class="kw1">local</span> <span class="kw5">float</span> dot,dotm; <span class="co1">//dot and specular dot</span>
	<span class="kw1">local</span> <span class="kw5">int</span> dist;
	<span class="kw1">local</span> <span class="kw5">vector</span> dir; <span class="co1">//direction from the "sample location" to lightsource</span>
	<span class="kw1">local</span> urlight l;
	<span class="kw1">local</span> <span class="kw5">float</span> specstart;
	<span class="kw1">local</span> <span class="kw5">bool</span> bshad,bspec,bdfog,bvfog;
 
	<span class="kw2">if</span><span class="br0">(</span>a<span class="sy0">==</span><span class="kw5">none</span><span class="br0">)</span> <span class="co1">//ph33r</span>
	<span class="kw2">return</span>;
 
	bshad<span class="sy0">=</span><span class="kw1">class</span><span class="st0">'ursettings'</span>.<span class="kw1">default</span>.<span class="me0">shadows</span>;
	bspec<span class="sy0">=</span><span class="kw1">class</span><span class="st0">'ursettings'</span>.<span class="kw1">default</span>.<span class="me0">specular</span>;
	bdfog<span class="sy0">=</span><span class="kw1">class</span><span class="st0">'ursettings'</span>.<span class="kw1">default</span>.<span class="me0">DistanceFog</span>;
 
	<span class="kw2">foreach</span> a.<span class="kw2">radiusactors</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'urlight'</span>,l,<span class="nu0">8192</span>,loc<span class="br0">)</span>
	<span class="br0">{</span>
 
		<span class="kw2">if</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="sy0">&lt;=</span><span class="nu0">0</span><span class="sy0">||</span><span class="br0">(</span><span class="sy0">!</span>l.<span class="me0">bfixeddir</span><span class="sy0">&amp;&amp;</span><span class="kw3">vsize</span><span class="br0">(</span>loc<span class="sy0">-</span>l.<span class="kw7">location</span><span class="br0">)</span><span class="sy0">&gt;=</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="sy0">||</span><span class="br0">(</span>bshad<span class="sy0">&amp;&amp;</span>l.<span class="me0">bcastshadows</span><span class="sy0">&amp;&amp;!</span>a.<span class="kw4">fasttrace</span><span class="br0">(</span>loc,l.<span class="kw7">location</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>
			<span class="kw2">continue</span>;
 
		dir <span class="sy0">=</span> l.<span class="me0">location</span><span class="sy0">-</span>loc;
 
		dot <span class="sy0">=</span> <span class="kw3">normal</span><span class="br0">(</span>dir<span class="br0">)</span> dot <span class="kw3">normal</span><span class="br0">(</span>norm<span class="br0">)</span>;
 
		<span class="kw2">if</span><span class="br0">(</span>dot<span class="sy0">&lt;</span><span class="nu0">0</span><span class="br0">)</span>
			dot<span class="sy0">=</span><span class="nu0">0</span>;
 
		specstart<span class="sy0">=</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span>l.<span class="me0">specularlevel</span><span class="br0">)</span>;
 
		<span class="kw2">if</span><span class="br0">(</span>specstart<span class="sy0">&lt;</span><span class="nu0">1</span><span class="sy0">&amp;&amp;</span>bspec<span class="br0">)</span>
		<span class="br0">{</span>
			dotm <span class="sy0">=</span> <span class="kw3">normal</span><span class="br0">(</span>dir<span class="br0">)</span> dot <span class="kw3">normal</span><span class="br0">(</span>mirror<span class="br0">)</span>;
 
			<span class="kw2">if</span><span class="br0">(</span>dotm<span class="sy0">&lt;</span><span class="nu0">0</span><span class="br0">)</span>
				dotm<span class="sy0">=</span><span class="nu0">0</span>;
		<span class="br0">}</span>
 
		dist <span class="sy0">=</span> <span class="kw3">vsize</span><span class="br0">(</span>dir<span class="br0">)</span>;
 
		<span class="kw2">if</span><span class="br0">(</span>l.<span class="me0">bspotlight</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">//spotlight calc, not done yet</span>
		<span class="br0">}</span>
		<span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>l.<span class="me0">bfixeddir</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">//fixed directional light calc, not done yet</span>
		<span class="br0">}</span>
		<span class="kw2">else</span>
		<span class="br0">{</span>
			<span class="kw2">if</span><span class="br0">(</span>l.<span class="me0">bsimple</span><span class="br0">)</span>
			<span class="br0">{</span>
 
				lr<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span>;
				lg<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span>;
				lb<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span>;
 
				<span class="kw2">if</span><span class="br0">(</span>bspec<span class="sy0">&amp;&amp;</span>dotm<span class="sy0">&gt;=</span>specstart<span class="br0">)</span>
				<span class="br0">{</span>
					lr<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
					lg<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
					lb<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
				<span class="br0">}</span>
 
			<span class="br0">}</span>
			<span class="kw2">else</span>
			<span class="br0">{</span>
 
				lr<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">lightingscale</span><span class="sy0">*</span>dot<span class="br0">)</span>;
				lg<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">lightingscale</span><span class="sy0">*</span>dot<span class="br0">)</span>;
				lb<span class="sy0">+=</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span><span class="kw5">float</span><span class="br0">(</span>dist<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>l.<span class="me0">lightingradius</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span><span class="kw5">float</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="br0">)</span><span class="sy0">/</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">lightingscale</span><span class="sy0">*</span>dot<span class="br0">)</span>;
 
				<span class="kw2">if</span><span class="br0">(</span>bspec<span class="sy0">&amp;&amp;</span>dotm<span class="sy0">&gt;=</span>specstart<span class="br0">)</span>
				<span class="br0">{</span>
					lr<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">r</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
					lg<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">g</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
					lb<span class="sy0">+=</span><span class="br0">(</span>l.<span class="me0">lightingcolor</span>.<span class="me0">b</span><span class="sy0">*</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">/</span>specstart<span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>dotm<span class="sy0">-</span>specstart<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">*</span>l.<span class="me0">specularscale</span>;
				<span class="br0">}</span>
 
			<span class="br0">}</span>
 
		<span class="br0">}</span>
 
	<span class="br0">}</span>
 
	<span class="kw2">if</span><span class="br0">(</span>bdfog<span class="sy0">&amp;&amp;</span>a.<span class="kw7">level</span>.<span class="me0">fogdistance</span><span class="sy0">&gt;</span><span class="nu0">0</span><span class="br0">)</span>
	<span class="br0">{</span>
		fscale <span class="sy0">=</span> <span class="kw3">fmin</span><span class="br0">(</span><span class="nu0">1</span>,<span class="kw3">vsize</span><span class="br0">(</span>loc<span class="sy0">-</span>a.<span class="kw7">location</span><span class="br0">)</span><span class="sy0">/</span>a.<span class="kw7">level</span>.<span class="me0">fogdistance</span><span class="br0">)</span>;
 
		lr<span class="sy0">=</span>lr<span class="sy0">*</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span>fscale<span class="br0">)</span>;
		lg<span class="sy0">=</span>lg<span class="sy0">*</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span>fscale<span class="br0">)</span>;
		lb<span class="sy0">=</span>lb<span class="sy0">*</span><span class="br0">(</span><span class="nu0">1</span><span class="sy0">-</span>fscale<span class="br0">)</span>;
 
		lr<span class="sy0">+=</span>a.<span class="kw7">level</span>.<span class="me0">fogcolor</span>.<span class="me0">r</span><span class="sy0">*</span>fscale;
		lg<span class="sy0">+=</span>a.<span class="kw7">level</span>.<span class="me0">fogcolor</span>.<span class="me0">g</span><span class="sy0">*</span>fscale;
		lb<span class="sy0">+=</span>a.<span class="kw7">level</span>.<span class="me0">fogcolor</span>.<span class="me0">b</span><span class="sy0">*</span>fscale;
	<span class="br0">}</span>
 
	lightcolor.<span class="me0">r</span><span class="sy0">=</span><span class="kw3">min</span><span class="br0">(</span><span class="nu0">255</span>,lr<span class="br0">)</span>;
	lightcolor.<span class="me0">g</span><span class="sy0">=</span><span class="kw3">min</span><span class="br0">(</span><span class="nu0">255</span>,lg<span class="br0">)</span>;
	lightcolor.<span class="me0">b</span><span class="sy0">=</span><span class="kw3">min</span><span class="br0">(</span><span class="nu0">255</span>,lb<span class="br0">)</span>;
<span class="br0">}</span>
</pre></div>
</div>
</div>
</div>
<h3><span class="mw-headline" id="Version_3">Version 3</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=6" title="Edit section: Version 3">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>this was actually done quite a while ago but i forgot to update this page</p>
<p>version 3 features volumetric lighting, soft shadows ambient occlusion, fisheye and panoramic rendering and also a crappy global illumination method which pushes the render time up by several hours..and doesnt look too great either&#160;:P having soft shadows and gi basically makes it non-realtime since it takes too long to render each frame</p>
<h2><span class="mw-headline" id="pics:">pics:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=7" title="Edit section: pics:">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="floatleft"><a href="../File_Legacy_pass_materials.html" class="image" title="solid color material pass"><img alt="solid color material pass" src="../w/images/Legacy_pass_materials.jpg" width="400" height="300" /></a></div>
<div class="floatleft"><a href="../File_Legacy_pass_light.html" class="image" title="lighting pass"><img alt="lighting pass" src="../w/images/Legacy_pass_light.jpg" width="400" height="300" /></a></div>
<div class="floatleft"><a href="../File_Legacy_pass_softlight.html" class="image" title="lighting with soft shadows"><img alt="lighting with soft shadows" src="../w/images/Legacy_pass_softlight.jpg" width="400" height="300" /></a></div>
<div class="floatleft"><a href="../File_Legacy_pass_volumetric.html" class="image" title="volumetric light, i know..it looks terrible&#160;;) plenty of artifacts here"><img alt="volumetric light, i know..it looks terrible&#160;;) plenty of artifacts here" src="../w/images/Legacy_pass_volumetric.jpg" width="400" height="300" /></a></div>
<div class="floatleft"><a href="../File_Legacy_pass_gi.html" class="image" title="global illumination pass"><img alt="global illumination pass" src="../w/images/Legacy_pass_gi.jpg" width="400" height="300" /></a></div>
<div class="center">
<div class="floatnone"><a href="../File_Legacy_roomrender_color.html" class="image" title="Completed render using all features, this was rendered at 800x600 and took about 9 hours, the global illumination is very noisy and doesnt reflect color just brightness"><img alt="Completed render using all features, this was rendered at 800x600 and took about 9 hours, the global illumination is very noisy and doesnt reflect color just brightness" src="../w/images/Legacy_roomrender_color.jpg" width="512" height="384" /></a></div>
</div>
<div class="center">
<div class="floatnone"><a href="../File_Legacy_globalillum_fisheye.html" class="image" title="global illumination test"><img alt="global illumination test" src="../w/images/Legacy_globalillum_fisheye.jpg" width="512" height="384" /></a></div>
</div>
<div class="center">
<div class="floatnone"><a href="../File_Legacy_panoramic_2.html" class="image" title="panoramic render test"><img alt="panoramic render test" src="../w/images/Legacy_panoramic_2.jpg" width="800" height="300" /></a></div>
</div>
<div class="floatleft"><a href="../File_Legacy_pass_final.html" class="image" title="final scene rendered at 800x600 with high settings, i cant remember how long this took, i left it on overnight&#160;:P"><img alt="final scene rendered at 800x600 with high settings, i cant remember how long this took, i left it on overnight&#160;:P" src="../w/images/Legacy_pass_final.jpg" width="800" height="600" /></a></div>
<h2><span class="mw-headline" id="Todo:">Todo:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=8" title="Edit section: Todo:">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>work on the realtime renderer a bit more</p>
<p>add better(more evenly distributed) raytracing for soft shadows and global illumination</p>
<p>translucent materials</p>
<p>anti aliasing</p>
<h2><span class="mw-headline" id="Feedback">Feedback</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender?section=9" title="Edit section: Feedback">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Xian:</b> WOW, very impressive. I look forward to seeing the next version, keep up the good work&#160;:) It's nice to see another fellow UT developer, since so many moved to UE2 (UT2004 in particular).</p>
<p><b>UArch</b> should probably update this at some point, light calculation code above is old and..well..crap&#160;;)</p>
<p><b>UArch</b> should have a nifty update to this code soon, added some optimizations to the renderer mostly to do with soft shadowing and gi, added support for "plug-ins" (dynamically loaded static-classes to add custom ray-tracing methods and such)</p>
<p>gi is still really noisy and well...it sucks to put it simple&#160;;P i need to find an even hackier and faster method!..in uscript i think this may be an impossibility</p>

<!-- 
NewPP limit report
CPU time usage: 0.098 seconds
Real time usage: 0.108 seconds
Preprocessor visited node count: 46/1000000
Preprocessor generated node count: 66/1000000
Postâ€expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3419-0!*!*!!en!5!* and timestamp 20161215185956 and revision id 8807
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:UArch/USRender?oldid=8807">https://wiki.beyondunreal.com/Legacy:UArch/USRender?oldid=8807</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="USRender.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:UArch/USRender?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:UArch/USRender" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:UArch/USRender" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUArch%2FUSRender&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AUArch%2FUSRender" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="../index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="../Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:UArch/USRender" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:UArch/USRender" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:UArch/USRender?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:UArch/USRender?oldid=8807" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:UArch/USRender" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 03:54, 31 March 2007.</li>
									<li id="copyright">Licensed as <a href="../Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="../Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="../Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":74});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:UArch/USRender by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 10:53:39 GMT -->
</html>
