<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:34:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Tamearia Elevator System - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Tamearia_Elevator_System" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Tamearia_Elevator_System" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_Tamearia_Elevator_System.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Tamearia_Elevator_System","wgTitle":"Tamearia Elevator System","wgCurRevisionId":8432,"wgRevisionId":8432,"wgArticleId":3247,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Tamearia_Elevator_System","wgRelevantArticleId":3247,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Tamearia_Elevator_System skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>Always snap to grid
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Tamearia Elevator System</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This is the code I wrote for Tamearia's elevator system. Due to the complexity of it and the fact that it intertwines with the PlayerController and GameType classes, this can't be used for normal UT2004 maps as is. It would have to be rewritten to, among other things, take replication into account.</p>
<p>This elevator system includes working inner and outer doors, call buttons, and floor indicators inside and outside the elevator. Any number of elevators can be linked to one set of call buttons (one per floor).</p>
<p>This is the main elevator class:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> Elevator <span class="kw1">extends</span> Mover;
 
<span class="kw1">var</span> <span class="kw5">int</span> DestinationFloor;
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> edfindable ElevatorDoor InnerDoor;  <span class="co1">// Set by the mapper.</span>
<span class="kw1">var</span> array<span class="sy0">&lt;</span>ElevatorIndicator<span class="sy0">&gt;</span> MyIndicators;  <span class="co1">// Holds the array of floor indicators.</span>
<span class="kw1">var</span> ElevatorCallButton MyCallButton;  <span class="co1">// Holds the call button that the player used (so the elevator can 'turn off' the light on the call button).</span>
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> <span class="kw5">int</span> NumberOfFloors;
 
<span class="kw1">struct</span> OuterDoors
<span class="br0">{</span>
    <span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> edfindable ElevatorDoor OuterDoor;
<span class="br0">}</span>;
 
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> array<span class="sy0">&lt;</span>OuterDoors<span class="sy0">&gt;</span> TheDoors;  <span class="co1">// Used as a struct so edfindable works.  Holds the array of outer doors (in order of floor number).</span>
<span class="kw1">var</span> <span class="kw5">bool</span> bIsMoving, bOuterDoorReady, bInnerDoorReady, bIsBeingCalled, bIsAtDestination;
<span class="kw1">var</span> <span class="kw5">Shader</span> Highlight;
<span class="kw1">var</span> <span class="kw5">ConstantColor</span> Nolight;  <span class="co1">// Used to change the internal floor indicator.</span>
 
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i, j;
 
    <span class="kw6">super</span>.<span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
    <span class="kw2">if</span><span class="br0">(</span>InnerDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
    <span class="br0">{</span>
        InnerDoor.<span class="me0">MyElevator</span> <span class="sy0">=</span> <span class="kw6">self</span>;
        <span class="kw2">if</span><span class="br0">(</span>InnerDoor.<span class="me0">CompanionDoor</span> <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
            InnerDoor.<span class="me0">CompanionDoor</span>.<span class="me0">MyElevator</span> <span class="sy0">=</span> <span class="kw6">self</span>;
    <span class="br0">}</span>
    <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>TheDoors.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>
        TheDoors<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">OuterDoor</span>.<span class="me0">MyElevator</span> <span class="sy0">=</span> <span class="kw6">self</span>;
    <span class="kw2">for</span><span class="br0">(</span>j<span class="sy0">=</span><span class="nu0">0</span>;j<span class="sy0">&lt;</span>MyIndicators.<span class="me0">length</span>;j<span class="sy0">++</span><span class="br0">)</span>
        MyIndicators<span class="br0">[</span>j<span class="br0">]</span>.<span class="me0">SetIndicator</span><span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="br0">)</span>;
    SetIndicator<span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">UsedBy</span><span class="br0">(</span><span class="kw9">Pawn</span> User<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span><span class="br0">(</span>bIsMoving<span class="br0">)</span>
        <span class="kw2">return</span>;
    <span class="co1">// An easy way for the menu to return the floor number pressed back to the elevator.</span>
    TameariaController<span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">GetLocalPlayerController</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me0">CurrentlyUsedElevator</span> <span class="sy0">=</span> <span class="kw6">self</span>;
 
    <span class="kw2">if</span><span class="br0">(</span>NumberOfFloors <span class="sy0">==</span> <span class="nu0">3</span><span class="br0">)</span>
        TameariaController<span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">GetLocalPlayerController</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me0">ClientOpenMenu</span><span class="br0">(</span><span class="st0">"TameariaInterface.ElevatorMenuThree"</span>,<span class="kw6">false</span><span class="br0">)</span>;
    <span class="co1">// Add more if there are other elevator banks that have more or less floor numbers.</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> SetDestinationFloor<span class="br0">(</span><span class="kw5">int</span> FloorNumber<span class="br0">)</span>
<span class="br0">{</span>
    DestinationFloor <span class="sy0">=</span> FloorNumber;
    <span class="kw2">if</span><span class="br0">(</span><span class="sy0">!</span>bInnerDoorReady <span class="sy0">||</span> <span class="sy0">!</span>bOuterDoorReady<span class="br0">)</span>  <span class="co1">// If inner and outer doors aren't ready, close them before moving.</span>
        MoveDoors<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>;
    <span class="kw2">else</span>
        IncrementFloor<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> CheckDoorsClosed<span class="br0">(</span><span class="kw5">bool</span> bInnerDoor<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span><span class="br0">(</span>bInnerDoor<span class="br0">)</span>
        bInnerDoorReady <span class="sy0">=</span> <span class="kw6">true</span>;
    <span class="kw2">else</span>
        bOuterDoorReady <span class="sy0">=</span> <span class="kw6">true</span>;
 
    <span class="kw2">if</span><span class="br0">(</span>bInnerDoorReady <span class="sy0">&amp;&amp;</span> bOuterDoorReady<span class="br0">)</span>  <span class="co1">// Once both inner and outer doors are closed, then move.</span>
        SetDestinationFloor<span class="br0">(</span>DestinationFloor<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> IncrementFloor<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
 
    <span class="kw2">if</span><span class="br0">(</span>PrevKeyNum <span class="sy0">==</span> DestinationFloor <span class="sy0">&amp;&amp;</span> <span class="br0">(</span><span class="sy0">!</span>bIsAtDestination <span class="sy0">||</span> bIsBeingCalled<span class="br0">)</span><span class="br0">)</span>  <span class="co1">// If I'm already at the floor, open the doors.</span>
    <span class="br0">{</span>
        MoveDoors<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;
        <span class="kw2">if</span><span class="br0">(</span>InnerDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
            InnerDoor.<span class="me0">StopFollowing</span><span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// Release the Inner Door from being attached to the elevator.</span>
        bIsMoving <span class="sy0">=</span> <span class="kw6">false</span>;
        bIsAtDestination <span class="sy0">=</span> <span class="kw6">true</span>;
        bIsBeingCalled <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>KeyNum <span class="sy0">&lt;</span> DestinationFloor<span class="br0">)</span>  <span class="co1">// Move up.</span>
    <span class="br0">{</span>
        bIsMoving <span class="sy0">=</span> <span class="kw6">true</span>;
        <span class="kw2">if</span><span class="br0">(</span>InnerDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
            InnerDoor.<span class="me0">FollowMe</span><span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// Attach inner door to elevator.</span>
        <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>MyIndicators.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>
            MyIndicators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">SetIndicator</span><span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>;  <span class="co1">// Sets the indicator to the dash between this floor and the next one.</span>
        SetIndicator<span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span>;  <span class="co1">// Sets internal indicator.</span>
        <span class="kw4">SetTimer</span><span class="br0">(</span>MoveTime<span class="sy0">/</span><span class="nu0">2</span>,<span class="kw6">false</span><span class="br0">)</span>;  <span class="co1">// If the indicator was set when it reached the floor,</span>
                                     <span class="co1">//it would only be on for a fraction of a second.</span>
                                     <span class="co1">//This switches it before it reaches the next floor.</span>
        InterpolateTo<span class="br0">(</span>KeyNum<span class="sy0">+</span><span class="nu0">1</span>,MoveTime<span class="br0">)</span>;
        bIsAtDestination <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>KeyNum <span class="sy0">&gt;</span> DestinationFloor<span class="br0">)</span>
    <span class="br0">{</span>
        bIsMoving <span class="sy0">=</span> <span class="kw6">true</span>;
        <span class="kw2">if</span><span class="br0">(</span>InnerDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
            InnerDoor.<span class="me0">FollowMe</span><span class="br0">(</span><span class="br0">)</span>;
        <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>MyIndicators.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>
            MyIndicators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">SetIndicator</span><span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>;
        SetIndicator<span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>;
        <span class="kw4">SetTimer</span><span class="br0">(</span>MoveTime<span class="sy0">/</span><span class="nu0">2</span>,<span class="kw6">false</span><span class="br0">)</span>;
        InterpolateTo<span class="br0">(</span>KeyNum<span class="sy0">-</span><span class="nu0">1</span>,MoveTime<span class="br0">)</span>;
        bIsAtDestination <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
    <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>MyIndicators.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>
        MyIndicators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">SetIndicator</span><span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="br0">)</span>;  <span class="co1">// Sets the floor indicator to the next floor a little bit before it gets there.</span>
    SetIndicator<span class="br0">(</span>KeyNum<span class="sy0">*</span><span class="nu0">2</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> MoveDoors<span class="br0">(</span><span class="kw5">int</span> KeyFrame<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span><span class="br0">(</span>KeyFrame <span class="sy0">==</span> <span class="nu0">1</span> <span class="sy0">&amp;&amp;</span> MyCallButton <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
        MyCallButton.<span class="me0">LightOff</span><span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// 'Turns off' the call button that the player used.</span>
    <span class="kw2">if</span><span class="br0">(</span>InnerDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
    <span class="br0">{</span>
        InnerDoor.<span class="me0">MoveDoor</span><span class="br0">(</span>KeyFrame<span class="br0">)</span>;  <span class="co1">// Opens or closes the inner door.</span>
        bInnerDoorReady <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
    <span class="kw2">if</span><span class="br0">(</span>TheDoors.<span class="me0">length</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span>
    <span class="br0">{</span>
        TheDoors<span class="br0">[</span>KeyNum<span class="br0">]</span>.<span class="me0">OuterDoor</span>.<span class="me0">MoveDoor</span><span class="br0">(</span>KeyFrame<span class="br0">)</span>;  <span class="co1">// Opens or closes the outer doors.</span>
        bOuterDoorReady <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">simulated</span> <span class="kw1">event</span> KeyFrameReached<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">byte</span> OldKeyNum;
 
    OldKeyNum  <span class="sy0">=</span> PrevKeyNum;
    PrevKeyNum <span class="sy0">=</span> KeyNum;
    PhysAlpha  <span class="sy0">=</span> <span class="nu0">0</span>;
    <span class="kw9">AmbientSound</span> <span class="sy0">=</span> <span class="kw5">None</span>;
 
    IncrementFloor<span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// Check to see if we're at the right floor, if not, keep going.</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> SetIndicator<span class="br0">(</span><span class="kw5">int</span> FloorNumber<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
    <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span><span class="nu0">5</span>;i<span class="sy0">++</span><span class="br0">)</span>
        <span class="kw7">Skins</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> Nolight;
    <span class="kw7">Skins</span><span class="br0">[</span>FloorNumber<span class="br0">]</span> <span class="sy0">=</span> Highlight;  <span class="co1">// Changes the texture on the indicator section to an unlit version.</span>
<span class="br0">}</span>
 
<span class="kw1">DefaultProperties</span>
<span class="br0">{</span>
    bOuterDoorReady<span class="sy0">=</span><span class="kw6">True</span>
    bInnerDoorReady<span class="sy0">=</span><span class="kw6">True</span>
    Highlight<span class="sy0">=</span><span class="kw5">Shader</span><span class="st0">'TameariaTextures.RedUnlit'</span>
    Nolight<span class="sy0">=</span><span class="kw5">ConstantColor</span><span class="st0">'TameariaTextures.DarkRed'</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>The elevator was made in Max so that materials 0-4 were the floor indicator sections, to make the code easier.</p>
<p>Next is the elevator doors. Only one class was needed for the inner and outer doors, a bool can be set by the mapper to indicate which one it is.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ElevatorDoor <span class="kw1">extends</span> Mover;
 
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> edfindable ElevatorDoor CompanionDoor;  <span class="co1">// Optional companion door (for two door elevators).</span>
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> <span class="kw5">bool</span> bInnerDoor;  <span class="co1">// Set by the mapper to indicate that this is the inner door.</span>
<span class="kw1">var</span> Elevator MyElevator;
<span class="kw1">var</span> <span class="kw5">vector</span> InitialOffset;  <span class="co1">// Store the initial distance from the elevator for when we are attached to it.</span>
<span class="kw1">var</span> <span class="kw5">bool</span> bInitialized, bIsMoving;
 
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw6">super</span>.<span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
    <span class="kw2">if</span><span class="br0">(</span>bInnerDoor <span class="sy0">&amp;&amp;</span> MyElevator <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
    <span class="br0">{</span>
        InitialOffset <span class="sy0">=</span> <span class="kw7">Location</span> <span class="sy0">-</span> MyElevator.<span class="kw7">Location</span>;
        <span class="kw2">if</span><span class="br0">(</span>CompanionDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
            CompanionDoor.<span class="me0">InitialOffset</span> <span class="sy0">=</span> CompanionDoor.<span class="kw7">Location</span> <span class="sy0">-</span> MyElevator.<span class="kw7">Location</span>;  <span class="co1">// This door controls the companion door.</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> FollowMe<span class="br0">(</span><span class="br0">)</span>  <span class="co1">// Called from the elevator to attach the door to it while moving.</span>
<span class="br0">{</span>
    <span class="kw3">Enable</span><span class="br0">(</span><span class="st0">'Tick'</span><span class="br0">)</span>;
    bIsMoving <span class="sy0">=</span> <span class="kw6">true</span>;
    <span class="kw4">SetTimer</span><span class="br0">(</span><span class="nu0">0.1</span>,<span class="kw6">false</span><span class="br0">)</span>;
    <span class="kw2">if</span><span class="br0">(</span>CompanionDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
    <span class="br0">{</span>
        CompanionDoor.<span class="kw3">Enable</span><span class="br0">(</span><span class="st0">'Tick'</span><span class="br0">)</span>;
        CompanionDoor.<span class="me0">bIsMoving</span> <span class="sy0">=</span> <span class="kw6">true</span>;
        CompanionDoor.<span class="kw4">SetTimer</span><span class="br0">(</span><span class="nu0">0.1</span>,<span class="kw6">false</span><span class="br0">)</span>;
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> StopFollowing<span class="br0">(</span><span class="br0">)</span>  <span class="co1">// Called from the elevator to detach the door so it can open.</span>
<span class="br0">{</span>
    <span class="kw3">Disable</span><span class="br0">(</span><span class="st0">'Tick'</span><span class="br0">)</span>;
    bIsMoving <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="kw2">if</span><span class="br0">(</span>CompanionDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
    <span class="br0">{</span>
        CompanionDoor.<span class="kw3">Disable</span><span class="br0">(</span><span class="st0">'Tick'</span><span class="br0">)</span>;
        CompanionDoor.<span class="me0">bIsMoving</span> <span class="sy0">=</span> <span class="kw6">false</span>;
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> MoveDoor<span class="br0">(</span><span class="kw5">int</span> MoveToKeyNum<span class="br0">)</span>
<span class="br0">{</span>
    StopFollowing<span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// Make sure we're detached.</span>
    InterpolateTo<span class="br0">(</span>MoveToKeyNum,MoveTime<span class="br0">)</span>;  <span class="co1">// Open or close.</span>
    <span class="kw2">if</span><span class="br0">(</span>CompanionDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
        CompanionDoor.<span class="me0">MoveDoor</span><span class="br0">(</span>MoveToKeyNum<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Tick</span><span class="br0">(</span><span class="kw5">float</span> DeltaTime<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span><span class="br0">(</span><span class="sy0">!</span>bInitialized<span class="br0">)</span>
    <span class="br0">{</span>
        StopFollowing<span class="br0">(</span><span class="br0">)</span>;
        bInitialized <span class="sy0">=</span> <span class="kw6">true</span>;
        <span class="kw2">return</span>;
    <span class="br0">}</span>
    <span class="kw4">SetLocation</span><span class="br0">(</span>MyElevator.<span class="kw7">Location</span> <span class="sy0">+</span> InitialOffset<span class="br0">)</span>;  <span class="co1">// Follow the elevator.</span>
    BasePos <span class="sy0">=</span> <span class="kw7">Location</span>;  <span class="co1">// Adjust the base position so the doors don't return to the ground floor while opening.</span>
<span class="br0">}</span>
 
<span class="kw1">simulated</span> <span class="kw1">event</span> KeyFrameReached<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw6">super</span>.<span class="me0">KeyFrameReached</span><span class="br0">(</span><span class="br0">)</span>;
    <span class="kw2">if</span><span class="br0">(</span>KeyNum <span class="sy0">==</span> <span class="nu0">0</span> <span class="sy0">&amp;&amp;</span> bInnerDoor <span class="sy0">&amp;&amp;</span> MyElevator <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
        MyElevator.<span class="me0">CheckDoorsClosed</span><span class="br0">(</span><span class="kw6">True</span><span class="br0">)</span>;  <span class="co1">// Tell the door I'm ready.</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>KeyNum <span class="sy0">==</span> <span class="nu0">0</span> <span class="sy0">&amp;&amp;</span> MyElevator <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
        MyElevator.<span class="me0">CheckDoorsClosed</span><span class="br0">(</span><span class="kw6">False</span><span class="br0">)</span>;
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>KeyNum <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span>
        <span class="kw4">SetTimer</span><span class="br0">(</span>StayOpenTime,<span class="kw6">false</span><span class="br0">)</span>;  <span class="co1">// If I'm opening, set a timer so I close automatically (don't stay open forever).</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">if</span><span class="br0">(</span>bIsMoving<span class="br0">)</span>
        <span class="kw2">return</span>;
    MoveDoor<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw5">bool</span> <span class="kw4">EncroachingOn</span><span class="br0">(</span><span class="kw9">Actor</span> Other<span class="br0">)</span>
<span class="br0">{</span>
    <span class="co1">// Tried to make the doors detect when they hit the player, but one of them always pushes the player.</span>
    <span class="co1">// Can't seem to figure out the best way to do this.  This function is still a WIP.</span>
    <span class="kw2">if</span> <span class="br0">(</span> Other <span class="sy0">==</span> <span class="kw5">None</span> <span class="br0">)</span>
	<span class="kw2">return</span> <span class="kw6">false</span>;
    <span class="kw2">if</span> <span class="br0">(</span> Leader <span class="sy0">==</span> <span class="kw5">None</span> <span class="br0">)</span>
	Leader <span class="sy0">=</span> <span class="kw6">self</span>;
 
    Leader.<span class="me0">MakeGroupReturn</span><span class="br0">(</span><span class="br0">)</span>;
    <span class="kw2">if</span><span class="br0">(</span>CompanionDoor <span class="sy0">!=</span> <span class="kw5">none</span><span class="br0">)</span>
        CompanionDoor.<span class="kw4">EncroachingOn</span><span class="br0">(</span>Other<span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span> Other.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'Pawn'</span><span class="br0">)</span> <span class="br0">)</span>
		<span class="kw9">Pawn</span><span class="br0">(</span>Other<span class="br0">)</span>.<span class="me0">PlayMoverHitSound</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="kw2">return</span> <span class="kw6">true</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Next up, the call button.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ElevatorCallButton <span class="kw1">extends</span> TameariaObject
    <span class="kw1">placeable</span>;
 
<span class="kw1">struct</span> Elevators
<span class="br0">{</span>
    <span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> edfindable Elevator MyElevator;  <span class="co1">// Bank of elevators set by mapper.</span>
<span class="br0">}</span>;
 
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> array<span class="sy0">&lt;</span>Elevators<span class="sy0">&gt;</span> MyElevators;
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> <span class="kw5">int</span> FloorNumber;  <span class="co1">// Floor number this call button is at.</span>
<span class="kw1">var</span> <span class="kw5">Shader</span> Highlight;
<span class="kw1">var</span> <span class="kw5">ConstantColor</span> Nolight;
 
<span class="kw1">function</span> <span class="kw4">UsedBy</span><span class="br0">(</span><span class="kw9">Pawn</span> User<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i, x;
    <span class="kw1">local</span> Elevator ClosestElevator;
 
    x <span class="sy0">=</span> <span class="nu0">99</span>;
 
    <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>MyElevators.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>  <span class="co1">// Find the closest elevator.</span>
    <span class="br0">{</span>
        <span class="kw2">if</span><span class="br0">(</span>MyElevators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">MyElevator</span> <span class="sy0">!=</span> <span class="kw5">none</span> <span class="sy0">&amp;&amp;</span> <span class="kw3">abs</span><span class="br0">(</span>FloorNumber <span class="sy0">-</span> MyElevators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">MyElevator</span>.<span class="me0">KeyNum</span><span class="br0">)</span> <span class="sy0">&lt;</span> x<span class="br0">)</span>
        <span class="br0">{</span>
            ClosestElevator <span class="sy0">=</span> MyElevators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">MyElevator</span>;
            x <span class="sy0">=</span> <span class="kw3">abs</span><span class="br0">(</span>FloorNumber <span class="sy0">-</span> MyElevators<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">MyElevator</span>.<span class="me0">KeyNum</span><span class="br0">)</span>;
        <span class="br0">}</span>
    <span class="br0">}</span>
 
    <span class="kw2">if</span><span class="br0">(</span>x <span class="sy0">&lt;</span> <span class="nu0">99</span><span class="br0">)</span>
    <span class="br0">{</span>
        ClosestElevator.<span class="me0">MyCallButton</span> <span class="sy0">=</span> <span class="kw6">self</span>;  <span class="co1">// Tell the elevator to turn me off when it gets here.</span>
        <span class="kw7">Skins</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">=</span> Highlight;
        ClosestElevator.<span class="me0">bIsBeingCalled</span> <span class="sy0">=</span> <span class="kw6">true</span>;
        <span class="kw2">if</span><span class="br0">(</span>x <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span>
            ClosestElevator.<span class="me0">MoveDoors</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;  <span class="co1">// If there's an elevator at this floor, open it.</span>
        <span class="kw2">else</span>
            ClosestElevator.<span class="me0">SetDestinationFloor</span><span class="br0">(</span>FloorNumber<span class="br0">)</span>;  <span class="co1">// Otherwise, move the closest one here.</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> LightOff<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw7">Skins</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">=</span> Nolight;
<span class="br0">}</span>
 
<span class="kw1">DefaultProperties</span>
<span class="br0">{</span>
    <span class="kw7">DrawType</span><span class="sy0">=</span><span class="kw7">DT_StaticMesh</span>
    <span class="kw5">StaticMesh</span><span class="sy0">=</span><span class="kw5">StaticMesh</span><span class="st0">'TameariaMeshes.ElevatorCallButtonMesh'</span>
    bEdShouldSnap<span class="sy0">=</span><span class="kw6">True</span>
    bHidden<span class="sy0">=</span><span class="kw6">False</span>
    Highlight<span class="sy0">=</span><span class="kw5">Shader</span><span class="st0">'TameariaTextures.PaleYellowUnlit'</span>
    Nolight<span class="sy0">=</span><span class="kw5">ConstantColor</span><span class="st0">'TameariaTextures.PaleYellow'</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Simple script for the floor indicator outside the elevator:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ElevatorIndicator <span class="kw1">extends</span> TameariaObject
    <span class="kw1">placeable</span>;
 
<span class="co2">#exec obj load file=TameariaTextures.utx</span>
 
<span class="kw1">var</span><span class="br0">(</span>Tamearia<span class="br0">)</span> edfindable Elevator MyElevator;
<span class="kw1">var</span> <span class="kw5">Shader</span> Highlight;
<span class="kw1">var</span> <span class="kw5">ConstantColor</span> Nolight;
 
<span class="kw1">simulated</span> <span class="kw1">function</span> <span class="kw4">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw6">super</span>.<span class="kw4">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>;
    MyElevator.<span class="me0">MyIndicators</span><span class="br0">[</span>MyElevator.<span class="me0">MyIndicators</span>.<span class="me0">Length</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw6">self</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> SetIndicator<span class="br0">(</span><span class="kw5">int</span> FloorNumber<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
    <span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span><span class="nu0">5</span>;i<span class="sy0">++</span><span class="br0">)</span>
        <span class="kw7">Skins</span><span class="br0">[</span>i<span class="br0">]</span> <span class="sy0">=</span> Nolight;
    <span class="kw7">Skins</span><span class="br0">[</span>FloorNumber<span class="br0">]</span> <span class="sy0">=</span> Highlight;
<span class="br0">}</span>
 
<span class="kw1">DefaultProperties</span>
<span class="br0">{</span>
    <span class="kw7">DrawType</span><span class="sy0">=</span><span class="kw7">DT_StaticMesh</span>
    <span class="kw5">StaticMesh</span><span class="sy0">=</span><span class="kw5">StaticMesh</span><span class="st0">'TameariaMeshes.ElevatorIndicatorMesh'</span>
    bEdShouldSnap<span class="sy0">=</span><span class="kw6">True</span>
    bHidden<span class="sy0">=</span><span class="kw6">False</span>
    Highlight<span class="sy0">=</span><span class="kw5">Shader</span><span class="st0">'TameariaTextures.RedUnlit'</span>
    Nolight<span class="sy0">=</span><span class="kw5">ConstantColor</span><span class="st0">'TameariaTextures.DarkRed'</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Now the menu that opens up when the player hits Use inside the elevator:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ElevatorMenuThree <span class="kw1">extends</span> TameariaGUIPage;
 
<span class="kw1">var</span> automated GUIGFxButton b0, b1, b2, b_OpenDoors;
<span class="kw1">var</span> automated BackgroundImage Bkgd;
 
<span class="kw1">function</span> <span class="kw5">bool</span> InternalOnClick<span class="br0">(</span>GUIComponent Sender<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> TameariaController TC;
 
    TC <span class="sy0">=</span> TameariaController<span class="br0">(</span>PlayerOwner<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>;
 
    <span class="kw2">if</span><span class="br0">(</span>Sender <span class="sy0">==</span> b0<span class="br0">)</span>
    <span class="br0">{</span>
        TC.<span class="me0">CurrentlyUsedElevator</span>.<span class="me0">SetDestinationFloor</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>;  <span class="co1">// Move the elevator to floor 0 (ground floor).</span>
	    <span class="kw9">Controller</span>.<span class="me0">CloseMenu</span><span class="br0">(</span><span class="kw6">false</span><span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>Sender <span class="sy0">==</span> b1<span class="br0">)</span>
    <span class="br0">{</span>
        TC.<span class="me0">CurrentlyUsedElevator</span>.<span class="me0">SetDestinationFloor</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;
	    <span class="kw9">Controller</span>.<span class="me0">CloseMenu</span><span class="br0">(</span><span class="kw6">false</span><span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>Sender <span class="sy0">==</span> b2<span class="br0">)</span>
    <span class="br0">{</span>
        TC.<span class="me0">CurrentlyUsedElevator</span>.<span class="me0">SetDestinationFloor</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>;
	    <span class="kw9">Controller</span>.<span class="me0">CloseMenu</span><span class="br0">(</span><span class="kw6">false</span><span class="br0">)</span>;
    <span class="br0">}</span>
    <span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span>Sender <span class="sy0">==</span> b_OpenDoors<span class="br0">)</span>
    <span class="br0">{</span>
        TC.<span class="me0">CurrentlyUsedElevator</span>.<span class="me0">MoveDoors</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;  <span class="co1">// Open the elevator doors (open door button standard on elevators).</span>
	    <span class="kw9">Controller</span>.<span class="me0">CloseMenu</span><span class="br0">(</span><span class="kw6">false</span><span class="br0">)</span>;
    <span class="br0">}</span>
	<span class="kw2">return</span> <span class="kw6">false</span>;
<span class="br0">}</span>
 
<span class="kw1">DefaultProperties</span>
<span class="br0">{</span>
    <span class="co1">// Standard GUI button stuff, not important.</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>Now the interconnecting pieces. Part of the code is in the GameInfo:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> TameariaGame <span class="kw1">extends</span> <span class="kw9">GameInfo</span>
	<span class="kw1">HideDropDown</span>
	<span class="kw1">CacheExempt</span>
	<span class="kw1">config</span><span class="br0">(</span>Tamearia<span class="br0">)</span>;
 
...
 
<span class="co1">// Things to keep track of that player can use.</span>
<span class="kw1">var</span> array<span class="sy0">&lt;</span>ElevatorCallButton<span class="sy0">&gt;</span> ElevatorCallButtons;
 
 
<span class="kw1">function</span> <span class="kw4">PreBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> ElevatorCallButton ECB;
 
...
    <span class="co1">// Use button is pretty flaky, so hold an array of all the items I can use so that I can access them easier.</span>
    <span class="kw2">foreach</span> <span class="kw2">DynamicActors</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'ElevatorCallButton'</span>,ECB<span class="br0">)</span>
        ElevatorCallButtons<span class="br0">[</span>ElevatorCallButtons.<span class="me0">Length</span><span class="br0">]</span> <span class="sy0">=</span> ECB;
<span class="br0">}</span>
</pre></div>
</div>
<p>And finally, the PlayerController class:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> TameariaController <span class="kw1">extends</span> <span class="kw9">xPlayer</span>
	<span class="kw1">config</span><span class="br0">(</span>TameariaUser<span class="br0">)</span>;
 
...
 
<span class="kw1">var</span> TameariaGame TAMGame;
<span class="kw1">var</span> Elevator CurrentlyUsedElevator;
<span class="kw1">var</span> <span class="kw5">int</span> ObjectUseDistance;
 
<span class="kw1">exec</span> <span class="kw1">function</span> Use<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw9">Pawn</span>.<span class="kw7">Base</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="kw9">Pawn</span>.<span class="kw7">Base</span>.<span class="kw4">UsedBy</span><span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>;
 
	<span class="co1">// Order these in importance (will want to check for elevator buttons before NPC's etc)</span>
	<span class="kw2">for</span><span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>TAMGame.<span class="me0">ElevatorCallButtons</span>.<span class="me0">length</span>;i<span class="sy0">++</span><span class="br0">)</span>
	<span class="br0">{</span>
	    <span class="kw2">if</span><span class="br0">(</span><span class="kw3">VSize</span><span class="br0">(</span>TAMGame.<span class="me0">ElevatorCallButtons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw7">Location</span> <span class="sy0">-</span> <span class="kw9">Pawn</span>.<span class="kw7">Location</span><span class="br0">)</span> <span class="sy0">&lt;</span> ObjectUseDistance<span class="br0">)</span>
	    <span class="br0">{</span>
	        TAMGame.<span class="me0">ElevatorCallButtons</span><span class="br0">[</span>i<span class="br0">]</span>.<span class="kw4">UsedBy</span><span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">)</span>;
	        <span class="kw2">return</span>;
	    <span class="br0">}</span>
	<span class="br0">}</span>
 
        <span class="co1">// If I wanted to check for other usable objects, I would put for() statements here.</span>
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
    ObjectUseDistance<span class="sy0">=</span><span class="nu0">128</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>[[Image:Legacy_AngelMapperElevator.jpeg|]]</p>

<!-- 
NewPP limit report
CPU time usage: 0.143 seconds
Real time usage: 0.144 seconds
Preprocessor visited node count: 22/1000000
Preprocessor generated node count: 144/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:3247-0!*!*!*!*!*!* and timestamp 20161215152749 and revision id 8432
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System?oldid=8432">https://wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System?oldid=8432</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_Tamearia_Elevator_System.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Tamearia_Elevator_System?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Tamearia_Elevator_System" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Tamearia_Elevator_System" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ATamearia+Elevator+System&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ATamearia+Elevator+System" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Tamearia_Elevator_System" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Tamearia_Elevator_System" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System?oldid=8432" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Tamearia_Elevator_System" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 20:18, 20 May 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":136});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Tamearia_Elevator_System by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:34:50 GMT -->
</html>
