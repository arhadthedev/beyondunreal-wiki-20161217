<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:35:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:Bonehed316/ShadowSource - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Bonehed316/ShadowSource" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:Bonehed316/ShadowSource" />
<link rel="shortcut icon" href="../w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="../w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="../w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="ShadowSource.html" />
<link rel="copyright" href="../Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="../w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="../w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:Bonehed316/ShadowSource","wgTitle":"Bonehed316/ShadowSource","wgCurRevisionId":1939,"wgRevisionId":1939,"wgArticleId":658,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:Bonehed316/ShadowSource","wgRelevantArticleId":658,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_Bonehed316_ShadowSource skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>I love the smell of UnrealEd crashing in the morning. &#8211;Â tarquin
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:Bonehed316/ShadowSource</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../Legacy_Bonehed316.html" title="Legacy:Bonehed316">Legacy:Bonehed316</a></span></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>As many others have done, I have created some form of shadows using projectors. There are other methods, including SquirrelZero's <a href="../Legacy_SquirrelZero/RealtimeShadows.html" title="Legacy:SquirrelZero/RealtimeShadows">RealtimeShadows</a>, which are good indeed, but the workload is per pawn, and performed each tick, and therefor is, and will always be, very slow.</p>
<p>Next there is a method, which is very similar to my own, called <a href="../Legacy_Sourced_Player_Shadows.html" title="Legacy:Sourced Player Shadows">Sourced_Player_Shadows</a>. There are also some others, but I cant find the links right off hand, and I'm sure there are some which I've never thought of myself. I am not familiar with other methods, so I will not comment on them, nor compare directly with any of them.</p>
<p>The method I worked on, which is by no means a superb solution, is to use an actor I call a ShadowSource to handle attaching and detaching shadow projectors, and also act as a "source" of the shadow itself. It uses the Touch() and UnTouch() functions to spawn and destroy shadow projectors. The projectors use a reference to the ShadowSource as a location from which the shadow should be cast. A level designer would place these ShadowSources wherever a static mesh that represents a light source exists, and the code will take care of the rest.</p>
<p>Once the idea is down, the code here is trivial:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> ShadowSource <span class="kw1">extends</span> <span class="kw9">Actor</span>
	<span class="kw1">placeable</span>;
 
<span class="kw1">var</span> class<span class="sy0">&lt;</span>ShadowBitmapMaterial<span class="sy0">&gt;</span> TextureDetail<span class="re0">Class</span>&lt; SEMI &gt;
<span class="kw1">var</span> array<span class="sy0">&lt;</span>DynamicShadow<span class="sy0">&gt;</span> Shadows;
 
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">enum</span> EShadowDetail        <span class="co1">// shadow detail level</span>
<span class="br0">{</span>
	SD_Low,                 <span class="co1">// 64x64</span>
	SD_Medium,              <span class="co1">// 128x128</span>
	SD_High,                <span class="co1">// 256x256</span>
	SD_Highest,             <span class="co1">// 512x512</span>
<span class="br0">}</span> ShadowDetail;
 
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> DynamicShadow.<span class="me0">EShadowEffect</span> ShadowEffect;		<span class="co1">// the type of light effect for this shadow</span>
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span> MaxFOV;					<span class="co1">// adjusts rotation to compensate for FOV</span>
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">float</span> FOVScale;					<span class="co1">// scales FOV to change the size of the shadow</span>
<span class="kw1">var</span><span class="br0">(</span><span class="br0">)</span> <span class="kw5">int</span> MaxTraceDistance;				<span class="co1">// how far the projector can draw</span>
<span class="kw1">var</span><span class="br0">(</span>ShadowSourceEffect<span class="br0">)</span> <span class="kw5">float</span> PhaseScale;		<span class="co1">// used to control light effects, result may vary depending on the effect used</span>
 
<span class="co1">// fire effect specific variables</span>
<span class="kw1">var</span><span class="br0">(</span>ShadowSourceEffect<span class="br0">)</span> <span class="kw5">int</span> FireFlickerMagnitude;	<span class="co1">// how far the fire flicker is allowed to move</span>
<span class="kw1">var</span><span class="br0">(</span>ShadowSourceEffect<span class="br0">)</span> <span class="kw5">int</span> FireFlickerSpeed;		<span class="co1">// how fast the shadow moves</span>
 
<span class="co1">// Initialize anything</span>
<span class="kw1">event</span> <span class="kw4">PostBeginPlay</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	GetShadowTexture<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// sets the shadow texture depending on the selected detail setting</span>
<span class="co1">// each class is simply a subclass of ShadowBitmapMaterial with a different USize and VSize</span>
<span class="kw1">function</span> GetShadowTexture<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">Switch</span><span class="br0">(</span>ShadowDetail<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">case</span> SD_Low: TextureDetailClass <span class="sy0">=</span> <span class="kw1">Class</span><span class="st0">'ShadowDetailLow'</span>; <span class="kw2">break</span>;
		<span class="kw2">case</span> SD_Medium: TextureDetailClass <span class="sy0">=</span> <span class="kw1">Class</span><span class="st0">'ShadowDetailMedium'</span>;<span class="kw2">break</span>;
		<span class="kw2">case</span> SD_High:   TextureDetailClass <span class="sy0">=</span> <span class="kw1">Class</span><span class="st0">'ShadowDetailHigh'</span>;<span class="kw2">break</span>;
		<span class="kw2">case</span> SD_Highest: TextureDetailClass <span class="sy0">=</span> <span class="kw1">Class</span><span class="st0">'ShadowDetailHighest'</span>; <span class="kw2">break</span>;
		<span class="kw1">default</span>: TextureDetailClass <span class="sy0">=</span> <span class="kw1">Class</span><span class="st0">'ShadowDetailLow'</span>; <span class="kw2">break</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">function</span> DynamicShadow SpawnShadow<span class="br0">(</span><span class="kw9">Pawn</span> P<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> DynamicShadow DynamicShadow;
 
	DynamicShadow <span class="sy0">=</span> <span class="kw4">Spawn</span><span class="br0">(</span><span class="kw1">class</span><span class="st0">'DynamicShadow'</span>,<span class="kw6">self</span>,,P.<span class="kw7">Location</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span>DynamicShadow <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		DynamicShadow.<span class="me0">ShadowActor</span> <span class="sy0">=</span> P;
		DynamicShadow.<span class="kw7">Instigator</span> <span class="sy0">=</span> P;
		DynamicShadow.<span class="me0">ShadowEffect</span> <span class="sy0">=</span> ShadowEffect;
		DynamicShadow.<span class="me0">FireFlickerMagnitude</span> <span class="sy0">=</span> FireFlickerMagnitude;
		DynamicShadow.<span class="me0">FireFlickerSpeed</span> <span class="sy0">=</span> FireFlickerSpeed;
		DynamicShadow.<span class="me0">PhaseScale</span> <span class="sy0">=</span> PhaseScale;
		DynamicShadow.<span class="me0">bBlobShadow</span> <span class="sy0">=</span> <span class="kw6">False</span>;
		DynamicShadow.<span class="me0">FOVScale</span> <span class="sy0">=</span> FOVScale;
		DynamicShadow.<span class="me0">MaxFOV</span> <span class="sy0">=</span> MaxFOV;
		DynamicShadow.<span class="me0">MaxTraceDistance</span> <span class="sy0">=</span> MaxTraceDistance;
		DynamicShadow.<span class="me0">ShadowTexture</span> <span class="sy0">=</span> <span class="kw5">ShadowBitmapMaterial</span><span class="br0">(</span> <span class="kw7">Level</span>.<span class="kw8">ObjectPool</span>.<span class="me0">AllocateObject</span><span class="br0">(</span>TextureDetailClass<span class="br0">)</span> <span class="br0">)</span>;
		DynamicShadow.<span class="me0">InitShadow</span><span class="br0">(</span><span class="br0">)</span>;
	<span class="br0">}</span>
	<span class="kw2">return</span> DynamicShadow;
<span class="br0">}</span>
 
<span class="co1">// pawns are given a shadow when they touch</span>
<span class="kw1">event</span> <span class="kw4">Touch</span><span class="br0">(</span><span class="kw9">Actor</span> Other<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">(</span>Other<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		Shadows<span class="br0">[</span>Shadows.<span class="me0">Length</span><span class="br0">]</span> <span class="sy0">=</span> SpawnShadow<span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">(</span>Other<span class="br0">)</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="co1">// pawns are removed from the shadow list when they untouch, and the shadow is destroyed</span>
<span class="kw1">event</span> <span class="kw4">UnTouch</span><span class="br0">(</span><span class="kw9">Actor</span> Other<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw9">Pawn</span><span class="br0">(</span>Other<span class="br0">)</span> <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		i <span class="sy0">=</span> GetShadowIndex<span class="br0">(</span>Other<span class="br0">)</span>;
		<span class="kw2">if</span> <span class="br0">(</span>i <span class="sy0">&gt;</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span>
		<span class="br0">{</span>
			Shadows<span class="br0">[</span>i<span class="br0">]</span>.<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
			Shadows.<span class="me0">Remove</span><span class="br0">(</span>i,<span class="nu0">1</span><span class="br0">)</span>;
		<span class="br0">}</span>
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="co1">// returns the index of an actor within the shadow array</span>
<span class="kw1">function</span> <span class="kw5">int</span> GetShadowIndex<span class="br0">(</span><span class="kw9">Actor</span> A<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">int</span> i;
 
	<span class="kw2">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span>;i<span class="sy0">&lt;</span>Shadows.<span class="me0">Length</span>;<span class="sy0">++</span>i<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw2">if</span> <span class="br0">(</span>Shadows<span class="br0">[</span>i<span class="br0">]</span>.<span class="me0">ShadowActor</span> <span class="sy0">==</span> A<span class="br0">)</span>
			<span class="kw2">return</span> i;
	<span class="br0">}</span>
	<span class="kw2">return</span> <span class="sy0">-</span><span class="nu0">1</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
	bHidden<span class="sy0">=</span><span class="kw6">True</span>
	ShadowDetail<span class="sy0">=</span>SD_Medium
	ShadowEffect<span class="sy0">=</span>SE_Normal
 
	FireFlickerMagnitude<span class="sy0">=</span><span class="nu0">60</span>
	FireFlickerSpeed<span class="sy0">=</span><span class="nu0">20</span>
	PhaseScale<span class="sy0">=</span><span class="nu0">0.5</span>
	MaxFOV<span class="sy0">=</span><span class="nu0">70</span>
	FOVScale<span class="sy0">=</span><span class="nu0">0.9</span>
	MaxTraceDistance<span class="sy0">=</span><span class="nu0">1000</span>
 
	bCollideActors<span class="sy0">=</span><span class="kw6">True</span>
	bUseCylinderCollision<span class="sy0">=</span><span class="kw6">True</span>
	<span class="kw7">CollisionHeight</span><span class="sy0">=</span><span class="nu0">500</span>
	<span class="kw7">CollisionRadius</span><span class="sy0">=</span><span class="nu0">500</span>
<span class="br0">}</span>
</pre></div>
</div>
<p>The key here is that the CollisionHeight and CollisionRadius are what effect how close to the source you have to be to recieve a shadow from it. Adjusting this radius is important to the concept. Basic projector properties can be controlled with the exposed variables, and more can be added easily, and subclasses of ShadowSource can be created which have even more functionality, if that is the method you prefer.</p>
<p>As you can see, the real magic is all in the projector class. The beauty is that the projector draws itself, from the location of the ShadowSource that owns it. This way, the overhead of sorting lights and shadow projectors is eliminated. The projector simply draws until it is destroyed.</p>
<p>The projector is listed here:</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">class</span> DynamicShadow <span class="kw1">extends</span> <span class="kw9">ShadowProjector</span>;
 
<span class="co1">// various shadow effects can exist here</span>
<span class="kw1">var</span> <span class="kw1">enum</span> EShadowEffect
<span class="br0">{</span>
	SE_Normal,
	SE_Fire,
<span class="br0">}</span> ShadowEffect;
 
<span class="co1">// these are set by the shadow source</span>
<span class="kw1">var</span> <span class="kw5">int</span> FireFlickerMagnitude;
<span class="kw1">var</span> <span class="kw5">int</span> FireFlickerSpeed;
<span class="kw1">var</span> <span class="kw5">int</span> MaxFOV;
<span class="kw1">var</span> <span class="kw5">float</span> PhaseScale, FOVScale;
 
<span class="co1">//hack for interpolating crouch distance over time when pawn stands up again</span>
<span class="kw1">var</span> <span class="kw5">float</span> crouchtime;
<span class="kw1">var</span> <span class="kw5">vector</span> CurrentFirePos, TargetFirePos;
<span class="kw1">var</span> array<span class="sy0">&lt;</span>vector<span class="sy0">&gt;</span> FirePositions;
 
<span class="co1">// This must be called by the ShadowSource to initialize the projector to start drawing</span>
<span class="kw1">function</span> InitShadow<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span>ShadowActor <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		ShadowTexture.<span class="me0">bBlobShadow</span> <span class="sy0">=</span> bBlobShadow;
		ShadowTexture.<span class="me0">ShadowActor</span> <span class="sy0">=</span> ShadowActor;
		ProjTexture <span class="sy0">=</span> ShadowTexture;
 
		<span class="kw2">if</span> <span class="br0">(</span>ProjTexture <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="br0">{</span>
			<span class="co1">// UpdateShadows is time driven, to allow shadow animating</span>
			UpdateShadows<span class="br0">(</span><span class="nu0">0.03</span><span class="br0">)</span>;  <span class="co1">// start the shadow rendering, and enable tick</span>
			<span class="kw3">Enable</span><span class="br0">(</span><span class="st0">'Tick'</span><span class="br0">)</span>;
		<span class="br0">}</span>
		<span class="co1">// timer is used for fire effect, but could be used for others as well, so </span>
		<span class="co1">// we start it up here as well</span>
		<span class="kw4">SetTimer</span><span class="br0">(</span><span class="kw3">FRand</span><span class="br0">(</span><span class="br0">)</span>,<span class="kw6">true</span><span class="br0">)</span>;
	<span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw1">event</span> <span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span> <span class="br0">(</span>ShadowTexture <span class="sy0">!=</span> <span class="kw5">None</span><span class="br0">)</span>
	<span class="br0">{</span>
		ShadowTexture.<span class="me0">ShadowActor</span> <span class="sy0">=</span> <span class="kw5">None</span>;
 
		<span class="kw2">if</span> <span class="br0">(</span><span class="sy0">!</span>ShadowTexture.<span class="me0">Invalid</span><span class="br0">)</span>
			<span class="kw7">Level</span>.<span class="kw8">ObjectPool</span>.<span class="me0">FreeObject</span><span class="br0">(</span>ShadowTexture<span class="br0">)</span>;
 
		ShadowTexture <span class="sy0">=</span> <span class="kw5">None</span>;
		ProjTexture <span class="sy0">=</span> <span class="kw5">None</span>;
	<span class="br0">}</span>
 
	<span class="kw6">Super</span>.<span class="kw4">Destroyed</span><span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">event</span> <span class="kw4">Tick</span><span class="br0">(</span><span class="kw5">float</span> dt<span class="br0">)</span>
<span class="br0">{</span>
	UpdateShadows<span class="br0">(</span>dt<span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">function</span> <span class="kw4">Timer</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw2">if</span><span class="br0">(</span>ShadowEffect <span class="sy0">==</span> SE_Fire<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">// random target positions for fire flicker, and random timer rate</span>
		TargetFirePos <span class="sy0">=</span> FirePositions<span class="br0">[</span><span class="kw3">Rand</span><span class="br0">(</span>FirePositions.<span class="me0">Length</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">*</span> <span class="kw3">Rand</span><span class="br0">(</span>FireFlickerMagnitude<span class="br0">)</span>;
		TimerRate <span class="sy0">=</span> <span class="kw3">FRand</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span> PhaseScale;
	<span class="br0">}</span>
	<span class="kw2">else</span>
		bTimerLoop<span class="sy0">=</span><span class="kw6">False</span>;       <span class="co1">// disable timer loop for non-effect shadows</span>
 
<span class="br0">}</span>
 
<span class="co1">// we use our own update shadow function</span>
<span class="kw1">function</span> UpdateShadow<span class="br0">(</span><span class="br0">)</span>;
 
<span class="co1">// updates location, rotation, and FOV</span>
<span class="kw1">function</span> UpdateShadows<span class="br0">(</span><span class="kw5">float</span> dt<span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">local</span> <span class="kw5">vector</span> Diff, ShadowLocation, RandVec, instloc;
	<span class="kw1">local</span> <span class="kw5">rotator</span> AdjustedRotation;
	<span class="kw1">local</span> <span class="kw5">Plane</span> BoundingSphere;
 
	DetachProjector<span class="br0">(</span><span class="kw6">True</span><span class="br0">)</span>;
 
	<span class="co1">// check to make sure we should draw, maybe this should also destroy the projector</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Instigator</span>.<span class="me0">bHidden</span> <span class="sy0">||</span> <span class="sy0">!</span>bShadowActive <span class="sy0">||</span> ShadowTexture <span class="sy0">==</span> <span class="kw5">None</span> <span class="sy0">||</span> <span class="kw7">Instigator</span> <span class="sy0">==</span> <span class="kw5">None</span><span class="br0">)</span>
		<span class="kw2">return</span>;
 
	instloc <span class="sy0">=</span> <span class="kw7">Instigator</span>.<span class="kw7">Location</span>;
 
	<span class="co1">// hack for fixing shadow detaching from pawn when crouching</span>
	<span class="co1">// crouchheight based on anim time, values may vary</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Instigator</span>.<span class="me0">bIsCrouched</span><span class="br0">)</span>
		crouchtime <span class="sy0">=</span> <span class="kw3">FMin</span><span class="br0">(</span>crouchtime<span class="sy0">+</span>dt<span class="sy0">*</span><span class="nu0">5</span>,<span class="nu0">0.5</span><span class="br0">)</span>;
	<span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>crouchtime <span class="sy0">&gt;</span> <span class="nu0">0.0</span><span class="br0">)</span>
		crouchtime <span class="sy0">-=</span> dt<span class="sy0">*</span><span class="nu0">2</span>;
 
	instloc.<span class="me0">Z</span> <span class="sy0">-=</span> <span class="br0">(</span><span class="kw7">Instigator</span>.<span class="me0">CrouchHeight</span><span class="sy0">*</span>crouchtime<span class="br0">)</span>;
 
	<span class="kw2">if</span> <span class="br0">(</span>ShadowTexture.<span class="me0">Invalid</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw4">Destroy</span><span class="br0">(</span><span class="br0">)</span>;
		<span class="kw2">return</span>;
	<span class="br0">}</span>
 
	<span class="kw2">if</span><span class="br0">(</span>ShadowEffect <span class="sy0">==</span> SE_Fire<span class="br0">)</span>
	<span class="br0">{</span>
		<span class="co1">// move a bit closer to the target position</span>
		RandVec <span class="sy0">=</span> CurrentFirePos <span class="sy0">+</span> <span class="br0">(</span><span class="kw3">Normal</span><span class="br0">(</span>TargetFirePos <span class="sy0">-</span> CurrentFirePos<span class="br0">)</span> <span class="sy0">*</span> <span class="br0">(</span>FireFlickerSpeed <span class="sy0">*</span> dt<span class="br0">)</span><span class="br0">)</span>;
		<span class="co1">// if we have moved too far out of range, begin moving back to the shadow source</span>
		<span class="kw2">if</span><span class="br0">(</span> <span class="kw3">VSize</span><span class="br0">(</span>CurrentFirePos<span class="br0">)</span> <span class="sy0">&gt;</span>  FireFlickerMagnitude<span class="br0">)</span>
		<span class="br0">{</span>
			TargetFirePos <span class="sy0">=</span> FirePositions<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>;       <span class="co1">// reset back to 0,0,0</span>
			RandVec <span class="sy0">=</span> CurrentFirePos <span class="sy0">+</span> <span class="br0">(</span><span class="kw3">Normal</span><span class="br0">(</span>TargetFirePos <span class="sy0">-</span> CurrentFirePos<span class="br0">)</span> <span class="sy0">*</span> <span class="br0">(</span>FireFlickerSpeed <span class="sy0">*</span> dt<span class="br0">)</span><span class="br0">)</span>;
		<span class="br0">}</span>
		<span class="co1">// if we have already reached our target position, pick a new one</span>
		<span class="kw2">else</span> <span class="kw2">if</span><span class="br0">(</span> <span class="kw3">VSize</span><span class="br0">(</span>TargetFirePos <span class="sy0">-</span> RandVec<span class="br0">)</span> <span class="sy0">&gt;</span> <span class="kw3">VSize</span><span class="br0">(</span>TargetFirePos <span class="sy0">-</span> CurrentFirePos<span class="br0">)</span> <span class="br0">)</span>
		<span class="br0">{</span>
			TargetFirePos <span class="sy0">=</span> FirePositions<span class="br0">[</span><span class="kw3">Rand</span><span class="br0">(</span>FirePositions.<span class="me0">Length</span><span class="br0">)</span><span class="br0">]</span> <span class="sy0">*</span> <span class="kw3">Rand</span><span class="br0">(</span>FireFlickerMagnitude<span class="br0">)</span>;
			RandVec <span class="sy0">=</span> CurrentFirePos <span class="sy0">+</span> <span class="br0">(</span><span class="kw3">Normal</span><span class="br0">(</span>TargetFirePos <span class="sy0">-</span> CurrentFirePos<span class="br0">)</span> <span class="sy0">*</span> <span class="br0">(</span>FireFlickerSpeed <span class="sy0">*</span> dt<span class="br0">)</span><span class="br0">)</span>;
		<span class="br0">}</span>
 
		CurrentFirePos <span class="sy0">=</span> RandVec;
	<span class="br0">}</span>
 
	Diff <span class="sy0">=</span> <span class="br0">(</span> <span class="kw7">Owner</span>.<span class="kw7">Location</span> <span class="sy0">+</span> RandVec <span class="br0">)</span> <span class="sy0">-</span> instloc;
	LightDistance <span class="sy0">=</span> <span class="kw3">VSize</span><span class="br0">(</span>Diff<span class="br0">)</span>;
	ShadowLocation <span class="sy0">=</span> instloc <span class="sy0">+</span> <span class="br0">(</span><span class="nu0">4</span> <span class="sy0">*</span> <span class="kw3">Normal</span><span class="br0">(</span>Diff<span class="br0">)</span><span class="br0">)</span>;
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw3">VSize</span><span class="br0">(</span>ShadowLocation<span class="sy0">-</span>instloc<span class="br0">)</span> <span class="sy0">&gt;</span> LightDistance<span class="br0">)</span>
		ShadowLocation <span class="sy0">=</span> instloc;
	<span class="kw4">SetLocation</span><span class="br0">(</span>ShadowLocation<span class="br0">)</span>;
 
	BoundingSphere <span class="sy0">=</span> <span class="kw7">Instigator</span>.<span class="me0">GetRenderBoundingSphere</span><span class="br0">(</span><span class="br0">)</span>;
	FOV <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">Atan</span><span class="br0">(</span>BoundingSphere.<span class="me0">W</span><span class="sy0">*</span><span class="nu0">2</span> <span class="sy0">+</span> <span class="nu0">160</span>, LightDistance<span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">180</span><span class="sy0">/</span><span class="kw6">PI</span><span class="br0">)</span><span class="sy0">*</span>FOVScale;
	<span class="kw4">SetDrawScale</span><span class="br0">(</span> LightDistance <span class="sy0">*</span> <span class="kw3">tan</span><span class="br0">(</span><span class="nu0">0.5</span> <span class="sy0">*</span> FOV <span class="sy0">*</span> <span class="kw6">PI</span> <span class="sy0">/</span> <span class="nu0">180</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span><span class="nu0">0.5</span> <span class="sy0">*</span> ShadowTexture.<span class="me0">USize</span><span class="br0">)</span> <span class="br0">)</span>;
 
	<span class="co1">// adjust rotation to fix the FOV causing the shadow to detatch from the player</span>
	AdjustedRotation <span class="sy0">=</span> <span class="kw5">rotator</span><span class="br0">(</span>instloc<span class="sy0">-</span><span class="br0">(</span><span class="kw7">Owner</span>.<span class="kw7">Location</span> <span class="sy0">+</span> RandVec<span class="br0">)</span><span class="br0">)</span>;
	AdjustedRotation.<span class="me0">Pitch</span> <span class="sy0">-=</span> <span class="nu0">1408</span><span class="sy0">*</span><span class="br0">(</span>FOV<span class="sy0">/</span>MaxFOV<span class="br0">)</span>;
	<span class="kw4">SetRotation</span><span class="br0">(</span>AdjustedRotation<span class="br0">)</span>;
 
	LightDirection <span class="sy0">=</span> <span class="sy0">-</span><span class="kw5">vector</span><span class="br0">(</span>AdjustedRotation<span class="br0">)</span>;
 
	ShadowTexture.<span class="me0">LightDirection</span> <span class="sy0">=</span> LightDirection;
	ShadowTexture.<span class="me0">LightDistance</span> <span class="sy0">=</span> LightDistance;
	ShadowTexture.<span class="me0">LightFOV</span> <span class="sy0">=</span> FOV;
 
	<span class="co1">// cull more if we havent rendered this pawn in 5 seconds</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">TimeSeconds</span> <span class="sy0">-</span> <span class="kw7">Instigator</span>.<span class="me0">LastRenderTime</span> <span class="sy0">&gt;</span> <span class="nu0">5</span><span class="br0">)</span>
		CullDistance <span class="sy0">=</span> <span class="nu0">0.25</span><span class="sy0">*</span><span class="kw1">Default</span>.<span class="me0">CullDistance</span>;
	<span class="kw2">else</span>
		CullDistance <span class="sy0">=</span> <span class="kw1">Default</span>.<span class="me0">CullDistance</span>;
 
	<span class="co1">// cull shadows much earlier if below min framerate</span>
	<span class="co1">// ..this may or may not be desired, it does get rather ugly</span>
	<span class="kw2">if</span> <span class="br0">(</span><span class="kw7">Level</span>.<span class="me0">bDropDetail</span><span class="br0">)</span>
		ShadowTexture.<span class="me0">CullDistance</span> <span class="sy0">=</span> <span class="nu0">0.5</span><span class="sy0">*</span>CullDistance;
	<span class="kw2">else</span>
		ShadowTexture.<span class="me0">CullDistance</span> <span class="sy0">=</span> CullDistance;
	ShadowTexture.<span class="me0">Dirty</span> <span class="sy0">=</span> <span class="kw6">true</span>;
 
	AttachProjector<span class="br0">(</span><span class="br0">)</span>;
<span class="br0">}</span>
 
<span class="kw1">defaultproperties</span>
<span class="br0">{</span>
	bGradient<span class="sy0">=</span><span class="kw6">True</span>
	CullDistance<span class="sy0">=</span><span class="nu0">1800</span>.<span class="me0">f</span>
 
	<span class="co1">// directional offsets for target pos movements</span>
	<span class="co1">// 1. origin (will move back to the shadow source)</span>
	FirePositions<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span>
	<span class="co1">// 2. ordinal directions (will move along one axis)</span>
	FirePositions<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">6</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	<span class="co1">// 3. diagonal on axis directions (will move on two axes)</span>
	FirePositions<span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">8</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">9</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">11</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">13</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">0</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">14</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">0</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	<span class="co1">// 4. diagonal mid axis directions (will move on three axes)</span>
	FirePositions<span class="br0">(</span><span class="nu0">15</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">16</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">17</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">18</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=-</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">19</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">20</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">21</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=</span><span class="nu0">1</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
	FirePositions<span class="br0">(</span><span class="nu0">22</span><span class="br0">)</span><span class="sy0">=</span><span class="br0">(</span>X<span class="sy0">=-</span><span class="nu0">1</span>,Y<span class="sy0">=-</span><span class="nu0">1</span>,Z<span class="sy0">=</span><span class="nu0">1</span><span class="br0">)</span>
<span class="br0">}</span>
</pre></div>
</div>
<h3><span class="mw-headline" id="Issues_to_consider">Issues to consider</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Bonehed316/ShadowSource?section=1" title="Edit section: Issues to consider">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>First, the code is largely untested in practical play, but does work. Issues to consider, which have not been specifically tested include:</p>
<ul>
<li><b>What happens if a pawn is spawned inside the CollisionRadius of a ShadowSource?</b>
<ul>
<li>If Touch() is called correctly, then everything works properly, but if not...</li>
</ul>
</li>
<li><b>What happens if a pawn is killed inside the CollisionRadius of a ShadowSource?</b>
<ul>
<li>Only if UnTouch() is called when the pawn dies will the shadow be destroyed</li>
</ul>
</li>
<li><b>What about other light effects?</b></li>
</ul>
<h3><span class="mw-headline" id="Comments">Comments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:Bonehed316/ShadowSource?section=2" title="Edit section: Comments">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Blueneptune:</b> It appears that the shadow projectors will clip off pieces of the shadow that are out of their FOV angle. This happens often when near a light since the projector is always so close to the shadowed actor. This solution is bad for the shadow texture sharpness, but I found that setting the projector to the light's location works much better for shadow clipping (unless the mesh being shadowed encapsulates the light). As said, it's bad for the shadow sharpness and it often needs adjustments to the rotation since it's set too low.</p>
<p><b>Bonehed316:</b> A compromise solution would be to set the projector location somewhere between the source and the pawn. Also I need to put some pics up, and get a working demo, I think. Maybe one day.</p>
<p><b>MythOpus:</b> To solve the problems of a pawn dying inside the actors collision zone, when spawning the projectors, set the owner of the projector to that of the pawn it is being created on. Then in the projector class, have it destroy itself when it's owner = none.</p>
<p><b>Foxpaw:</b> Untouch() will not get called when a pawn is destroyed, but I believe it will be called when a pawn actor is destroyed (and removed from the world). So the pawn would continue to have the projector acting on it while it was ragdolling.</p>
<p>Mythopus' solution is good but instead of using Owner I would use a variable declared in the projector and use that to store the pawn. I am wary of using Owner because Owner has some special implications when it comes to replication that I'd generally prefer not to worry about. Since the projector would be client-side, I don't THINK that you would have problems with this, but it might not hurt to store it in an internal variable instead of Owner.</p>
<p><b>Bonehed316:</b> It uses the owning pawn as its Instigator as well, so that could be checked, since it's already used. I think the Owner should be the ShadowSource (logically this is accurate, but I'm not sure about the replication implications). As far as I know though, the shadow is destroyed when the Pawn dies, but the ShadowSource's list would not be updated, which must also be solved . This could probably be solved by calling a new function on the ShadowSource from the Projector's Destroyed() function which would remove itself from the ShadowSource's array iff Instigator == None (which, correct me if I'm wrong, means the Instigator was killed).</p>
<p><b>Bonehed316:</b> Also the ShadowSource needs to destroy any projectors that exist if/when it is destroyed. The garbage collector might still get them, but I think this is important anyway.</p>

<!-- 
NewPP limit report
CPU time usage: 0.092 seconds
Real time usage: 0.093 seconds
Preprocessor visited node count: 25/1000000
Preprocessor generated node count: 52/1000000
Postâexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:658-0!*!0!!*!*!* and timestamp 20161215152759 and revision id 1939
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource?oldid=1939">https://wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource?oldid=1939</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="ShadowSource.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:Bonehed316/ShadowSource?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:Bonehed316/ShadowSource" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:Bonehed316/ShadowSource" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ABonehed316%2FShadowSource&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3ABonehed316%2FShadowSource" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="../index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="../index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="../Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:Bonehed316/ShadowSource" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:Bonehed316/ShadowSource" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource?oldid=1939" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:Bonehed316/ShadowSource" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 00:15, 25 June 2005.</li>
									<li id="copyright">Licensed as <a href="../Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="../Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="../Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="../Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":150});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:Bonehed316/ShadowSource by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 09:35:03 GMT -->
</html>
