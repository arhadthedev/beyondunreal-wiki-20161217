<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from wiki.beyondunreal.com/Legacy:OS_Detection by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Legacy:OS Detection - Unreal Wiki</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection" />
<link rel="edit" title="Edit" href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection" />
<link rel="shortcut icon" href="w/uewiki-favicon.png" />
<link rel="search" type="application/opensearchdescription+xml" href="w/opensearch_desc.php" title="Unreal Wiki" />
<link rel="EditURI" type="application/rsd+xml" href="w/api251f.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="Legacy_OS_Detection.html" />
<link rel="copyright" href="Unreal_Wiki_Copyrights.html" />
<link rel="alternate" type="application/atom+xml" title="Unreal Wiki Atom feed" href="https://wiki.beyondunreal.com/Special:RecentChanges?feed=atom" />
<link rel="stylesheet" href="w/load2743.css?debug=false&amp;lang=en&amp;modules=ext.geshi.language.uscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="w/load484a.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wiki:resourceloader:filter:minify-css:7:29b70323345a439ab9ed7007e0c178a6 */</style>
<script src="w/load9316.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Legacy","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Legacy:OS_Detection","wgTitle":"OS Detection","wgCurRevisionId":5618,"wgRevisionId":5618,"wgArticleId":2331,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Legacy:OS_Detection","wgRelevantArticleId":2331,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: wiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-100 ns-subject page-Legacy_OS_Detection skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p>Worst-case scenario: the UEd Goblin wipes the map and burns down your house.
</p></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Legacy:OS Detection</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From Unreal Wiki, The Unreal Engine Documentation Site</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Although <a href="https://wiki.beyondunreal.com/edit/Legacy:Unrealscript?redlink=1" class="new" title="Legacy:Unrealscript (page does not exist)">Unrealscript</a> is platform-independant, it can sometimes be useful for your code to determine what operating system it is running on. For instance, a Macintosh or Linux version of the Unreal Engine will not have Direct3D support and will only show white boxes if you try to use a <a href="Legacy_ScriptedTexture.html" title="Legacy:ScriptedTexture">ScriptedTexture</a>. It may make sense if you use <a href="Legacy_ScriptedTexture.html" title="Legacy:ScriptedTexture">ScriptedTextures</a> to have the script detect if the user is using Linux or Mac OS and replace the texture with something more attractive than a stark white box.</p>
<h2><span class="mw-headline" id="General_OS_Detection">General OS Detection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection?section=1" title="Edit section: General OS Detection">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This snippet works by attempting to pull a non-existing property from one of the drivers. An instance of the driver class will only exist, and therefore only reply with unrecognized property, if the driver is in fact loaded. WinDrv only being loaded on Windows, XDrv on Linux, and so on. This is not the most efficient implementation but should work on all Unreal Engine versions. (At least, Unreal Engine 2.5 and earlier. This is useable in any actor. The ConsoleCommand function of an <a href="Legacy_Interaction.html" title="Legacy:Interaction">Interaction</a> does not return a string, and so will not work.</p>
<p>Note that "Unrecognized property" indicates that that is the CORRECT operating system. If you attempt to access XDrv.XClient from Windows, for instance, you get a different error message, "Unrecognized Class XDrv.XClient."</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw2">if</span><span class="br0">(</span><span class="kw4">consolecommand</span><span class="br0">(</span><span class="st0">"get WinDrv.WindowsClient"</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"Unrecognized property"</span><span class="br0">)</span>
<span class="co1">// I'm windows</span>
<span class="kw2">if</span><span class="br0">(</span><span class="kw4">consolecommand</span><span class="br0">(</span><span class="st0">"get XDrv.XClient"</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"Unrecognized property"</span><span class="br0">)</span>
<span class="co1">// I'm linux</span>
<span class="kw2">if</span><span class="br0">(</span><span class="kw4">consolecommand</span><span class="br0">(</span><span class="st0">"get MacDrv.MacClient"</span><span class="br0">)</span><span class="sy0">==</span><span class="st0">"Unrecognized property"</span><span class="br0">)</span>
<span class="co1">// I'm mac</span>
</pre></div>
</div>
<p>Posted by Fish HF on the Beyond Unreal coding forums.</p>
<h2><span class="mw-headline" id="UT2004">UT2004</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection?section=2" title="Edit section: UT2004">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>UT2004 has a few native functions that return what OS it is. They will also return whether the binary is 64-bit or 32-bit. A 32-bit binary running on a 64-bit system will return false to PlatformIs64Bit(). Note that although Mac OS is based on Unix, it will return false on PlatformIsUnix(), as it is already covered by PlatformIsMacOS(). These functions are declared in Object and so should be useable anywhere in script.</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">native</span> <span class="kw1">final</span> <span class="kw1">function</span> <span class="kw5">bool</span> <span class="kw3">PlatformIsMacOS</span><span class="br0">(</span><span class="br0">)</span>;    <span class="co1">// MacOS X.</span>
<span class="kw1">native</span> <span class="kw1">final</span> <span class="kw1">function</span> <span class="kw5">bool</span> <span class="kw3">PlatformIsUnix</span><span class="br0">(</span><span class="br0">)</span>;     <span class="co1">// Linux, FreeBSD, etc (NOT OSX!)</span>
<span class="kw1">native</span> <span class="kw1">final</span> <span class="kw1">function</span> <span class="kw5">bool</span> <span class="kw3">PlatformIsWindows</span><span class="br0">(</span><span class="br0">)</span>;  <span class="co1">// Win32, Win32.</span>
<span class="kw1">native</span> <span class="kw1">final</span> <span class="kw1">function</span> <span class="kw5">bool</span> <span class="kw3">PlatformIs64Bit</span><span class="br0">(</span><span class="br0">)</span>;    <span class="co1">// Linux64, Win64.</span>
</pre></div>
</div>
<h2><span class="mw-headline" id="Comments">Comments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection?section=3" title="Edit section: Comments">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>El Muerte TDS:</b> and what about "SDLDrv.SDLClient" that one is system independed, besides on dedicated servers the viewport setting doesn't matter. Also, what is the use, the Unreal engine is system independed in UScript, even things like filenames are corrected.</p>
<p><b>Foxpaw:</b> The UT2004 one should be useable from any actor. The UT/UT2003 will need to be called on something that can execute console commands, and have the string value of lines written to the console during such time returned. (Some return only true or false instead of a string.) However, you could probrably do GetPropertyText instead.</p>
<p>Also, the above code was right before. You are attempting to access a non-existing property of an existing class. If you attempt to access XDrv.XClient it will give you "Unrecognized class XDrv.XClient" instead of "Unrecognized property"</p>
<p><b>Xian:</b> XDrv is wrong, that is an experimental emulator for XWindows, not Linux necessarily.</p>
<p>The correct way is this (should work on UT400 - UTPG451b, but not sure about UTPG468):</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr">
<div class="uscript source-uscript">
<pre class="de1">
<span class="kw1">function</span> <span class="kw5">string</span> CheckOS <span class="br0">(</span>PlayerPawn OSOwner<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">local</span> <span class="kw5">string</span> OS<span class="re0">Class</span>&lt; SEMI &gt;
    <span class="kw1">local</span> <span class="kw5">string</span> OS;
 
    OSClass <span class="sy0">=</span> <span class="kw5">string</span><span class="br0">(</span>OSOwner.<span class="kw8">Player</span>.<span class="kw1">Class</span><span class="br0">)</span>;
 
    <span class="co1">// string way</span>
    <span class="kw2">switch</span> <span class="br0">(</span>OSClass<span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw2">case</span> <span class="st0">"WinDrv.WindowsClient"</span> :
            OS <span class="sy0">=</span> <span class="st0">"Windows"</span>;
            <span class="kw2">break</span>;
        <span class="kw2">case</span> <span class="st0">"SDLDrv.SDLClient"</span> :
            OS <span class="sy0">=</span> <span class="st0">"Linux"</span>;
            <span class="kw2">break</span>;
        <span class="kw2">case</span> <span class="st0">"MacDrv.MacClient"</span> :
            OS <span class="sy0">=</span> <span class="st0">"Mac"</span>;
            <span class="kw2">break</span>;
    <span class="br0">}</span>
 
    <span class="co1">// name way</span>
    <span class="kw2">if</span> <span class="br0">(</span>OSOwner.<span class="kw8">Player</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'WindowsViewport'</span><span class="br0">)</span><span class="br0">)</span>
        OS <span class="sy0">=</span> <span class="st0">"Windows"</span>;
    <span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>OSOwner.<span class="kw8">Player</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'LinuxViewport'</span><span class="br0">)</span><span class="br0">)</span>
        OS <span class="sy0">=</span> <span class="st0">"Linux"</span>;
    <span class="kw2">else</span> <span class="kw2">if</span> <span class="br0">(</span>OSOwner.<span class="kw8">Player</span>.<span class="kw3">IsA</span><span class="br0">(</span><span class="st0">'MacViewport'</span><span class="br0">)</span><span class="br0">)</span>
        OS <span class="sy0">=</span> <span class="st0">"Mac"</span>;
 
    <span class="kw2">return</span> OS;
<span class="br0">}</span>
</pre></div>
</div>
<blockquote class="legacyquote">
<p><b>FoxPawn:</b> Also, the above code was right before. You are attempting to access a non-existing property of an existing class. If you attempt to access XDrv.XClient it will give you "Unrecognized class XDrv.XClient" instead of "Unrecognized property"</p>
</blockquote>
<p>Wrong&#160;:) Well you're correct in what you said, but wrong in this case. That was not his point. It's true that if you attempt to recover a value of a property from a non existant class (we include typo-ed classes here too) it will return "Unrecognized Class" or a localized versioned text of that. However, his point was to check if the class is found, but property isn't, which proves the class exists, therefore, he can "guess" the OS. Although the Linux detection is wrong. The one I showed should be correct (both ways) for UE 1 games.</p>

<!-- 
NewPP limit report
CPU time usage: 0.049 seconds
Real time usage: 0.050 seconds
Preprocessor visited node count: 41/1000000
Preprocessor generated node count: 129/1000000
Post‐expand include size: 604/2097152 bytes
Template argument size: 254/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.586      1 - -total
100.00%    2.586      1 - Template:Innerbox
-->

<!-- Saved in parser cache with key wiki:pcache:idhash:2331-0!*!0!!*!*!* and timestamp 20161215143209 and revision id 5618
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://wiki.beyondunreal.com/Legacy:OS_Detection?oldid=5618">https://wiki.beyondunreal.com/Legacy:OS_Detection?oldid=5618</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-legacy" class="selected"><a href="Legacy_OS_Detection.html">Legacy</a></li>
				<li id="ca-talk" class="new"><a href="https://wiki.beyondunreal.com/edit/Legacy_talk:OS_Detection?redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="https://wiki.beyondunreal.com/edit/Legacy:OS_Detection" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="https://wiki.beyondunreal.com/history/Legacy:OS_Detection" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AOS+Detection&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="https://wiki.beyondunreal.com/Special:UserLogin?returnto=Legacy%3AOS+Detection" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
											<li id="n-portal"><a href="Unreal_Wiki_Community_portal-2.html" title="About the project, what you can do, where to find things">Community portal</a></li>
											<li id="n-recentchanges"><a href="https://wiki.beyondunreal.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="https://wiki.beyondunreal.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
											<li id="n-Forums-.28General.29"><a href="https://forums.beyondunreal.com/forums/wiki-general.250/" rel="nofollow">Forums (General)</a></li>
											<li id="n-Forums-.28Technical.29"><a href="https://forums.beyondunreal.com/forums/wiki-technical.251/" rel="nofollow">Forums (Technical)</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="https://wiki.beyondunreal.com/" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search Unreal Wiki [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="https://wiki.beyondunreal.com/Special:WhatLinksHere/Legacy:OS_Detection" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="https://wiki.beyondunreal.com/Special:RecentChangesLinked/Legacy:OS_Detection" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="https://wiki.beyondunreal.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="https://wiki.beyondunreal.com/Legacy:OS_Detection?printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="https://wiki.beyondunreal.com/Legacy:OS_Detection?oldid=5618" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="https://wiki.beyondunreal.com/info/Legacy:OS_Detection" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../licensebuttons.net/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<script async src="../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <!-- Home Page -->
        <ins class="adsbygoogle"
             style="display:inline-block;width:728px;height:90px"
             data-ad-client="ca-pub-9605963037553244"
             data-ad-slot="9528541415"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
							</div>
					<ul id="f-list">
									<li id="lastmod"> Last modified at 07:11, 11 April 2006.</li>
									<li id="copyright">Licensed as <a href="Unreal_Wiki_Copyrights.html" title="Unreal Wiki:Copyrights">Attribution-Noncommercial-Share Alike 3.0</a>.</li>
									<li id="privacy"><a href="Unreal_Wiki_Privacy_policy.html" title="Unreal Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="Unreal_Wiki_About.html" title="Unreal Wiki:About">About Unreal Wiki</a></li>
									<li id="disclaimer"><a href="Unreal_Wiki_General_disclaimer.html" title="Unreal Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://wiki.beyondunreal.com/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":83});
}</script></body>
<!-- Mirrored from wiki.beyondunreal.com/Legacy:OS_Detection by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Dec 2016 07:56:53 GMT -->
</html>
